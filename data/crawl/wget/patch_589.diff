diff --git a/ChangeLog b/ChangeLog
index 9850cb3..dab7866 100644
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,3 +1,7 @@
+2000-10-19  Dan Harkless  <dan-wget@dilvish.speed.net>
+
+	* TODO: -E / --html-extension / html_extension has been implemented.
+
 2000-10-16  Dan Harkless  <dan-wget@dilvish.speed.net>
 
 	* TODO: Add option to save local filenames without extra %-encoding.
diff --git a/TODO b/TODO
index 9711d86..1d036e0 100644
--- a/TODO
+++ b/TODO
@@ -26,11 +26,6 @@ user-visible changes.
 * Make -K compare X.orig to X and move the former on top of the latter if 
   they're the same, rather than leaving identical .orig files laying around.
 
-* Add an option to save all text/html files with a .html extension so that when
-  grabbing the output of a dynamically-generated remote page, you'll end up with
-  a filename that will cause _your_ webserver to realize the saved static HTML
-  file isn't text/plain (or an illegal CGI script in the case of *.cgi).
-
 * Allow mirroring of FTP URLs where logging in puts you somewhere else besides 
   '/'. 
 
diff --git a/doc/ChangeLog b/doc/ChangeLog
index 6875977..2127bd8 100644
--- a/doc/ChangeLog
+++ b/doc/ChangeLog
@@ -1,3 +1,7 @@
+2000-10-19  Dan Harkless  <dan-wget@dilvish.speed.net>
+
+	* wget.texi (HTTP Options): Documented my new -E / --html-extension.
+
 2000-10-09  Dan Harkless  <dan-wget@dilvish.speed.net>
 
 	* wget.texi (FTP Options): --retr-symlinks wasn't documented properly.
diff --git a/doc/wget.info b/doc/wget.info
index 87ff5b3..468ec3c 100644
--- a/doc/wget.info
+++ b/doc/wget.info
@@ -26,8 +26,8 @@ notice identical to this one.
 
 Indirect:
 wget.info-1: 961
-wget.info-2: 50884
-wget.info-3: 97808
+wget.info-2: 48421
+wget.info-3: 96314
 
 Tag Table:
 (Indirect)
@@ -41,48 +41,48 @@ Node: Logging and Input File Options10287
 Node: Download Options12812
 Node: Directory Options20659
 Node: HTTP Options23137
-Node: FTP Options27042
-Node: Recursive Retrieval Options29024
-Node: Recursive Accept/Reject Options33736
-Node: Recursive Retrieval36962
-Node: Following Links39260
-Node: Relative Links40288
-Node: Host Checking40802
-Node: Domain Acceptance42827
-Node: All Hosts44497
-Node: Types of Files44924
-Node: Directory-Based Limits47374
-Node: FTP Links50014
-Node: Time-Stamping50884
-Node: Time-Stamping Usage52521
-Node: HTTP Time-Stamping Internals54090
-Node: FTP Time-Stamping Internals55560
-Node: Startup File56768
-Node: Wgetrc Location57641
-Node: Wgetrc Syntax58456
-Node: Wgetrc Commands59171
-Node: Sample Wgetrc66699
-Node: Examples71718
-Node: Simple Usage72325
-Node: Advanced Usage74719
-Node: Guru Usage77470
-Node: Various79132
-Node: Proxies79656
-Node: Distribution82421
-Node: Mailing List82772
-Node: Reporting Bugs83471
-Node: Portability85256
-Node: Signals86631
-Node: Appendices87285
-Node: Robots87700
-Node: Introduction to RES88847
-Node: RES Format90740
-Node: User-Agent Field91844
-Node: Disallow Field92608
-Node: Norobots Examples93219
-Node: Security Considerations94173
-Node: Contributors95169
-Node: Copying97808
-Node: Concept Index116971
+Node: FTP Options28089
+Node: Recursive Retrieval Options30071
+Node: Recursive Accept/Reject Options34783
+Node: Recursive Retrieval38009
+Node: Following Links40307
+Node: Relative Links41335
+Node: Host Checking41849
+Node: Domain Acceptance43874
+Node: All Hosts45544
+Node: Types of Files45971
+Node: Directory-Based Limits48421
+Node: FTP Links51061
+Node: Time-Stamping51931
+Node: Time-Stamping Usage53568
+Node: HTTP Time-Stamping Internals55137
+Node: FTP Time-Stamping Internals56607
+Node: Startup File57815
+Node: Wgetrc Location58688
+Node: Wgetrc Syntax59503
+Node: Wgetrc Commands60218
+Node: Sample Wgetrc67844
+Node: Examples72863
+Node: Simple Usage73470
+Node: Advanced Usage75864
+Node: Guru Usage78615
+Node: Various80277
+Node: Proxies80801
+Node: Distribution83566
+Node: Mailing List83917
+Node: Reporting Bugs84616
+Node: Portability86401
+Node: Signals87776
+Node: Appendices88430
+Node: Robots88845
+Node: Introduction to RES89992
+Node: RES Format91885
+Node: User-Agent Field92989
+Node: Disallow Field93753
+Node: Norobots Examples94364
+Node: Security Considerations95318
+Node: Contributors96314
+Node: Copying98953
+Node: Concept Index118116
 
 End Tag Table
diff --git a/doc/wget.info-1 b/doc/wget.info-1
index aa78284..a2c9796 100644
--- a/doc/wget.info-1
+++ b/doc/wget.info-1
@@ -585,6 +585,26 @@ File: wget.info,  Node: HTTP Options,  Next: FTP Options,  Prev: Directory Optio
 HTTP Options
 ============
 
+`-E'
+`--html-extension'
+     If a file of type `text/html' is downloaded and the URL does not
+     end with the regexp "\.[Hh][Tt][Mm][Ll]?", this option will cause
+     the suffix `.html' to be appended to the local filename.  This is
+     useful, for instance, when you're you're mirroring a remote site
+     that uses `.asp' pages, but you want the mirrored pages to be
+     viewable on your stock Apache server.  Another good use for this
+     is when you're downloading the output of CGIs.  A URL like
+     `http://site.com/article.cgi?25' will be saved as
+     `article.cgi?25.html'.
+
+     Note that filenames changed in this way will be re-downloaded
+     every time you re-mirror a site, because wget can't tell that the
+     local `X.html' file corresponds to remote URL `X' (since it
+     doesn't yet know that the URL produces output of type `text/html'.
+     To prevent this re-downloading, you must use `-k' and `-K' so
+     that the original version of the file will be saved as `X.orig'
+     (*Note Recursive Retrieval Options::).
+
 `--http-user=USER'
 `--http-passwd=PASSWORD'
      Specify the username USER and password PASSWORD on an HTTP server.
@@ -1168,88 +1188,3 @@ name, but *not* the PostScript files.
 files; Wget must load all the HTMLs to know where to go at
 all--recursive retrieval would make no sense otherwise.
 
-
-File: wget.info,  Node: Directory-Based Limits,  Next: FTP Links,  Prev: Types of Files,  Up: Following Links
-
-Directory-Based Limits
-======================
-
-   Regardless of other link-following facilities, it is often useful to
-place the restriction of what files to retrieve based on the directories
-those files are placed in.  There can be many reasons for this--the
-home pages may be organized in a reasonable directory structure; or some
-directories may contain useless information, e.g. `/cgi-bin' or `/dev'
-directories.
-
-   Wget offers three different options to deal with this requirement.
-Each option description lists a short name, a long name, and the
-equivalent command in `.wgetrc'.
-
-`-I LIST'
-`--include LIST'
-`include_directories = LIST'
-     `-I' option accepts a comma-separated list of directories included
-     in the retrieval.  Any other directories will simply be ignored.
-     The directories are absolute paths.
-
-     So, if you wish to download from `http://host/people/bozo/'
-     following only links to bozo's colleagues in the `/people'
-     directory and the bogus scripts in `/cgi-bin', you can specify:
-
-          wget -I /people,/cgi-bin http://host/people/bozo/
-
-`-X LIST'
-`--exclude LIST'
-`exclude_directories = LIST'
-     `-X' option is exactly the reverse of `-I'--this is a list of
-     directories *excluded* from the download.  E.g. if you do not want
-     Wget to download things from `/cgi-bin' directory, specify `-X
-     /cgi-bin' on the command line.
-
-     The same as with `-A'/`-R', these two options can be combined to
-     get a better fine-tuning of downloading subdirectories.  E.g. if
-     you want to load all the files from `/pub' hierarchy except for
-     `/pub/worthless', specify `-I/pub -X/pub/worthless'.
-
-`-np'
-`--no-parent'
-`no_parent = on'
-     The simplest, and often very useful way of limiting directories is
-     disallowing retrieval of the links that refer to the hierarchy
-     "above" than the beginning directory, i.e. disallowing ascent to
-     the parent directory/directories.
-
-     The `--no-parent' option (short `-np') is useful in this case.
-     Using it guarantees that you will never leave the existing
-     hierarchy.  Supposing you issue Wget with:
-
-          wget -r --no-parent http://somehost/~luzer/my-archive/
-
-     You may rest assured that none of the references to
-     `/~his-girls-homepage/' or `/~luzer/all-my-mpegs/' will be
-     followed.  Only the archive you are interested in will be
-     downloaded.  Essentially, `--no-parent' is similar to
-     `-I/~luzer/my-archive', only it handles redirections in a more
-     intelligent fashion.
-
-
-File: wget.info,  Node: FTP Links,  Prev: Directory-Based Limits,  Up: Following Links
-
-Following FTP Links
-===================
-
-   The rules for FTP are somewhat specific, as it is necessary for them
-to be.  FTP links in HTML documents are often included for purposes of
-reference, and it is often inconvenient to download them by default.
-
-   To have FTP links followed from HTML documents, you need to specify
-the `--follow-ftp' option.  Having done that, FTP links will span hosts
-regardless of `-H' setting.  This is logical, as FTP links rarely point
-to the same host where the HTTP server resides.  For similar reasons,
-the `-L' options has no effect on such downloads.  On the other hand,
-domain acceptance (`-D') and suffix rules (`-A' and `-R') apply
-normally.
-
-   Also note that followed links to FTP directories will not be
-retrieved recursively further.
-
diff --git a/doc/wget.info-2 b/doc/wget.info-2
index 804867f..c323b0e 100644
--- a/doc/wget.info-2
+++ b/doc/wget.info-2
@@ -24,6 +24,91 @@ resulting derived work is distributed under the terms of a permission
 notice identical to this one.
 
 
+File: wget.info,  Node: Directory-Based Limits,  Next: FTP Links,  Prev: Types of Files,  Up: Following Links
+
+Directory-Based Limits
+======================
+
+   Regardless of other link-following facilities, it is often useful to
+place the restriction of what files to retrieve based on the directories
+those files are placed in.  There can be many reasons for this--the
+home pages may be organized in a reasonable directory structure; or some
+directories may contain useless information, e.g. `/cgi-bin' or `/dev'
+directories.
+
+   Wget offers three different options to deal with this requirement.
+Each option description lists a short name, a long name, and the
+equivalent command in `.wgetrc'.
+
+`-I LIST'
+`--include LIST'
+`include_directories = LIST'
+     `-I' option accepts a comma-separated list of directories included
+     in the retrieval.  Any other directories will simply be ignored.
+     The directories are absolute paths.
+
+     So, if you wish to download from `http://host/people/bozo/'
+     following only links to bozo's colleagues in the `/people'
+     directory and the bogus scripts in `/cgi-bin', you can specify:
+
+          wget -I /people,/cgi-bin http://host/people/bozo/
+
+`-X LIST'
+`--exclude LIST'
+`exclude_directories = LIST'
+     `-X' option is exactly the reverse of `-I'--this is a list of
+     directories *excluded* from the download.  E.g. if you do not want
+     Wget to download things from `/cgi-bin' directory, specify `-X
+     /cgi-bin' on the command line.
+
+     The same as with `-A'/`-R', these two options can be combined to
+     get a better fine-tuning of downloading subdirectories.  E.g. if
+     you want to load all the files from `/pub' hierarchy except for
+     `/pub/worthless', specify `-I/pub -X/pub/worthless'.
+
+`-np'
+`--no-parent'
+`no_parent = on'
+     The simplest, and often very useful way of limiting directories is
+     disallowing retrieval of the links that refer to the hierarchy
+     "above" than the beginning directory, i.e. disallowing ascent to
+     the parent directory/directories.
+
+     The `--no-parent' option (short `-np') is useful in this case.
+     Using it guarantees that you will never leave the existing
+     hierarchy.  Supposing you issue Wget with:
+
+          wget -r --no-parent http://somehost/~luzer/my-archive/
+
+     You may rest assured that none of the references to
+     `/~his-girls-homepage/' or `/~luzer/all-my-mpegs/' will be
+     followed.  Only the archive you are interested in will be
+     downloaded.  Essentially, `--no-parent' is similar to
+     `-I/~luzer/my-archive', only it handles redirections in a more
+     intelligent fashion.
+
+
+File: wget.info,  Node: FTP Links,  Prev: Directory-Based Limits,  Up: Following Links
+
+Following FTP Links
+===================
+
+   The rules for FTP are somewhat specific, as it is necessary for them
+to be.  FTP links in HTML documents are often included for purposes of
+reference, and it is often inconvenient to download them by default.
+
+   To have FTP links followed from HTML documents, you need to specify
+the `--follow-ftp' option.  Having done that, FTP links will span hosts
+regardless of `-H' setting.  This is logical, as FTP links rarely point
+to the same host where the HTTP server resides.  For similar reasons,
+the `-L' options has no effect on such downloads.  On the other hand,
+domain acceptance (`-D') and suffix rules (`-A' and `-R') apply
+normally.
+
+   Also note that followed links to FTP directories will not be
+retrieved recursively further.
+
+
 File: wget.info,  Node: Time-Stamping,  Next: Startup File,  Prev: Following Links,  Up: Top
 
 Time-Stamping
@@ -351,6 +436,9 @@ glob = on/off
 header = STRING
      Define an additional header, like `--header'.
 
+html_extension = on/off
+     Add a `.html' extension to `text/html' files without it, like `-E'.
+
 http_passwd = STRING
      Set HTTP password.
 
@@ -1245,70 +1333,3 @@ Here are the main issues, and some solutions.
      being careful when you send debug logs (yes, even when you send
      them to me).
 
-
-File: wget.info,  Node: Contributors,  Prev: Security Considerations,  Up: Appendices
-
-Contributors
-============
-
-   GNU Wget was written by Hrvoje Niksic <hniksic@iskon.hr>.  However,
-its development could never have gone as far as it has, were it not for
-the help of many people, either with bug reports, feature proposals,
-patches, or letters saying "Thanks!".
-
-   Special thanks goes to the following people (no particular order):
-
-   * Karsten Thygesen--donated the mailing list and the initial FTP
-     space.
-
-   * Shawn McHorse--bug reports and patches.
-
-   * Kaveh R. Ghazi--on-the-fly `ansi2knr'-ization.
-
-   * Gordon Matzigkeit--`.netrc' support.
-
-   * Zlatko Calusic, Tomislav Vujec and Drazen Kacar--feature
-     suggestions and "philosophical" discussions.
-
-   * Darko Budor--initial port to Windows.
-
-   * Antonio Rosella--help and suggestions, plus the Italian
-     translation.
-
-   * Tomislav Petrovic, Mario Mikocevic--many bug reports and
-     suggestions.
-
-   * Francois Pinard--many thorough bug reports and discussions.
-
-   * Karl Eichwalder--lots of help with internationalization and other
-     things.
-
-   * Junio Hamano--donated support for Opie and HTTP `Digest'
-     authentication.
-
-   * Brian Gough--a generous donation.
-
-   The following people have provided patches, bug/build reports, useful
-suggestions, beta testing services, fan mail and all the other things
-that make maintenance so much fun:
-
-   Tim Adam, Martin Baehr, Dieter Baron, Roger Beeman and the Gurus at
-Cisco, Dan Berger, Mark Boyns, John Burden, Wanderlei Cavassin, Gilles
-Cedoc, Tim Charron, Noel Cragg, Kristijan Conkas, Andrew Deryabin,
-Damir Dzeko, Andrew Davison, Ulrich Drepper, Marc Duponcheel,
-Aleksandar Erkalovic, Andy Eskilsson, Masashi Fujita, Howard Gayle,
-Marcel Gerrits, Hans Grobler, Mathieu Guillaume, Dan Harkless, Heiko
-Herold, Karl Heuer, HIROSE Masaaki, Gregor Hoffleit, Erik Magnus
-Hulthen, Richard Huveneers, Simon Josefsson, Mario Juric, Goran
-Kezunovic, Robert Kleine, Fila Kolodny, Alexander Kourakos, Martin
-Kraemer, Simos KSenitellis, Hrvoje Lacko, Daniel S. Lewart, Dave Love,
-Jordan Mendelson, Lin Zhe Min, Charlie Negyesi, Andrew Pollock, Steve
-Pothier, Jan Prikryl, Marin Purgar, Keith Refson, Tobias Ringstrom,
-Juan Jose Rodrigues, Edward J. Sabol, Heinz Salzmann, Robert Schmidt,
-Toomas Soome, Tage Stabell-Kulo, Sven Sternberger, Markus Strasser,
-Szakacsits Szabolcs, Mike Thomas, Russell Vincent, Charles G Waldman,
-Douglas E. Wegscheid, Jasmin Zainul, Bojan Zdrnja, Kristijan Zimmer.
-
-   Apologies to all who I accidentally left out, and many thanks to all
-the subscribers of the Wget mailing list.
-
diff --git a/doc/wget.info-3 b/doc/wget.info-3
index e73c05e..ea52779 100644
--- a/doc/wget.info-3
+++ b/doc/wget.info-3
@@ -24,6 +24,73 @@ resulting derived work is distributed under the terms of a permission
 notice identical to this one.
 
 
+File: wget.info,  Node: Contributors,  Prev: Security Considerations,  Up: Appendices
+
+Contributors
+============
+
+   GNU Wget was written by Hrvoje Niksic <hniksic@iskon.hr>.  However,
+its development could never have gone as far as it has, were it not for
+the help of many people, either with bug reports, feature proposals,
+patches, or letters saying "Thanks!".
+
+   Special thanks goes to the following people (no particular order):
+
+   * Karsten Thygesen--donated the mailing list and the initial FTP
+     space.
+
+   * Shawn McHorse--bug reports and patches.
+
+   * Kaveh R. Ghazi--on-the-fly `ansi2knr'-ization.
+
+   * Gordon Matzigkeit--`.netrc' support.
+
+   * Zlatko Calusic, Tomislav Vujec and Drazen Kacar--feature
+     suggestions and "philosophical" discussions.
+
+   * Darko Budor--initial port to Windows.
+
+   * Antonio Rosella--help and suggestions, plus the Italian
+     translation.
+
+   * Tomislav Petrovic, Mario Mikocevic--many bug reports and
+     suggestions.
+
+   * Francois Pinard--many thorough bug reports and discussions.
+
+   * Karl Eichwalder--lots of help with internationalization and other
+     things.
+
+   * Junio Hamano--donated support for Opie and HTTP `Digest'
+     authentication.
+
+   * Brian Gough--a generous donation.
+
+   The following people have provided patches, bug/build reports, useful
+suggestions, beta testing services, fan mail and all the other things
+that make maintenance so much fun:
+
+   Tim Adam, Martin Baehr, Dieter Baron, Roger Beeman and the Gurus at
+Cisco, Dan Berger, Mark Boyns, John Burden, Wanderlei Cavassin, Gilles
+Cedoc, Tim Charron, Noel Cragg, Kristijan Conkas, Andrew Deryabin,
+Damir Dzeko, Andrew Davison, Ulrich Drepper, Marc Duponcheel,
+Aleksandar Erkalovic, Andy Eskilsson, Masashi Fujita, Howard Gayle,
+Marcel Gerrits, Hans Grobler, Mathieu Guillaume, Dan Harkless, Heiko
+Herold, Karl Heuer, HIROSE Masaaki, Gregor Hoffleit, Erik Magnus
+Hulthen, Richard Huveneers, Simon Josefsson, Mario Juric, Goran
+Kezunovic, Robert Kleine, Fila Kolodny, Alexander Kourakos, Martin
+Kraemer, Simos KSenitellis, Hrvoje Lacko, Daniel S. Lewart, Dave Love,
+Jordan Mendelson, Lin Zhe Min, Charlie Negyesi, Andrew Pollock, Steve
+Pothier, Jan Prikryl, Marin Purgar, Keith Refson, Tobias Ringstrom,
+Juan Jose Rodrigues, Edward J. Sabol, Heinz Salzmann, Robert Schmidt,
+Toomas Soome, Tage Stabell-Kulo, Sven Sternberger, Markus Strasser,
+Szakacsits Szabolcs, Mike Thomas, Russell Vincent, Charles G Waldman,
+Douglas E. Wegscheid, Jasmin Zainul, Bojan Zdrnja, Kristijan Zimmer.
+
+   Apologies to all who I accidentally left out, and many thanks to all
+the subscribers of the Wget mailing list.
+
+
 File: wget.info,  Node: Copying,  Next: Concept Index,  Prev: Appendices,  Up: Top
 
 GNU GENERAL PUBLIC LICENSE
@@ -395,6 +462,7 @@ Concept Index
 
 * Menu:
 
+* .html extension:                       HTTP Options.
 * .netrc:                                Startup File.
 * .wgetrc:                               Startup File.
 * accept directories:                    Directory-Based Limits.
diff --git a/doc/wget.texi b/doc/wget.texi
index c61e0c7..816e79e 100644
--- a/doc/wget.texi
+++ b/doc/wget.texi
@@ -706,6 +706,27 @@ current directory).
 @section HTTP Options
 
 @table @samp
+@cindex .html extension
+@item -E
+@itemx --html-extension
+If a file of type @samp{text/html} is downloaded and the URL does not
+end with the regexp "\.[Hh][Tt][Mm][Ll]?", this option will cause the
+suffix @samp{.html} to be appended to the local filename.  This is
+useful, for instance, when you're you're mirroring a remote site that
+uses @samp{.asp} pages, but you want the mirrored pages to be viewable
+on your stock Apache server.  Another good use for this is when you're
+downloading the output of CGIs.  A URL like
+@samp{http://site.com/article.cgi?25} will be saved as
+@file{article.cgi?25.html}.
+
+Note that filenames changed in this way will be re-downloaded every time
+you re-mirror a site, because wget can't tell that the local
+@file{@var{X}.html} file corresponds to remote URL @samp{@var{X}} (since
+it doesn't yet know that the URL produces output of type
+@samp{text/html}.  To prevent this re-downloading, you must use
+@samp{-k} and @samp{-K} so that the original version of the file will be
+saved as @file{@var{X}.orig} (@xref{Recursive Retrieval Options}).
+
 @cindex http user
 @cindex http password
 @cindex authentication
@@ -1785,6 +1806,10 @@ Turn globbing on/off -- the same as @samp{-g}.
 @item header = @var{string}
 Define an additional header, like @samp{--header}.
 
+@item html_extension = on/off
+Add a @samp{.html} extension to @samp{text/html} files without it, like
+@samp{-E}.
+
 @item http_passwd = @var{string}
 Set @sc{http} password.
 
diff --git a/po/cs.gmo b/po/cs.gmo
index 7d4f9d3..3292bfe 100644
Binary files a/po/cs.gmo and b/po/cs.gmo differ
diff --git a/po/cs.po b/po/cs.po
index acfd688..6092702 100644
--- a/po/cs.po
+++ b/po/cs.po
@@ -5,7 +5,7 @@
 msgid ""
 msgstr ""
 "Project-Id-Version: GNU wget 1.5.2-b1\n"
-"POT-Creation-Date: 2000-10-09 15:38-0700\n"
+"POT-Creation-Date: 2000-10-19 22:52-0700\n"
 "PO-Revision-Date: 1998-06-05 08:47\n"
 "Last-Translator: Jan Prikryl <prikryl@acm.org>\n"
 "Language-Team: Czech <cs@li.org>\n"
@@ -16,19 +16,19 @@ msgstr ""
 # , c-format
 #. Login to the server:
 #. First: Establish the control connection.
-#: src/ftp.c:147 src/http.c:347
+#: src/ftp.c:147 src/http.c:348
 #, c-format
 msgid "Connecting to %s:%hu... "
 msgstr "Navazuji spojení s %s:%hu... "
 
 # , c-format
-#: src/ftp.c:169 src/ftp.c:411 src/http.c:364
+#: src/ftp.c:169 src/ftp.c:411 src/http.c:365
 #, c-format
 msgid "Connection to %s:%hu refused.\n"
 msgstr "Spojení s %s:%hu odmítnuto.\n"
 
 #. Second: Login with proper USER/PASS sequence.
-#: src/ftp.c:190 src/http.c:375
+#: src/ftp.c:190 src/http.c:376
 msgid "connected!\n"
 msgstr "spojeno!\n"
 
@@ -88,7 +88,7 @@ msgstr ""
 "Adresáø `%s' neexistuje.\n"
 "\n"
 
-#: src/ftp.c:331 src/ftp.c:599 src/ftp.c:647 src/url.c:1501
+#: src/ftp.c:331 src/ftp.c:599 src/ftp.c:647 src/url.c:1523
 msgid "done.\n"
 msgstr "hotovo.\n"
 
@@ -196,13 +196,13 @@ msgid "File `%s' already there, not retrieving.\n"
 msgstr "Soubor `%s' je ji¾ zde, nebudu jej pøená¹et.\n"
 
 # , c-format
-#: src/ftp.c:915 src/http.c:992
+#: src/ftp.c:915 src/http.c:1016
 #, c-format
 msgid "(try:%2d)"
 msgstr "(pokus:%2d)"
 
 # , c-format
-#: src/ftp.c:979 src/http.c:1199
+#: src/ftp.c:979 src/http.c:1236
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld]\n"
@@ -229,7 +229,7 @@ msgstr "Vymazal jsem `%s'.\n"
 msgid "Recursion depth %d exceeded max. depth %d.\n"
 msgstr "Hloubka rekurze %d pøekroèila maximální povolenou hloubku %d.\n"
 
-#: src/ftp.c:1125 src/http.c:1136
+#: src/ftp.c:1125 src/http.c:1163
 #, c-format
 msgid ""
 "Server file no newer than local file `%s' -- not retrieving.\n"
@@ -237,7 +237,7 @@ msgid ""
 msgstr ""
 
 # , c-format
-#: src/ftp.c:1131 src/http.c:1142
+#: src/ftp.c:1131 src/http.c:1171
 #, fuzzy, c-format
 msgid "The sizes do not match (local %ld) -- retrieving.\n"
 msgstr "Velikosti se neshodují (lokálnì %ld), pøená¹ím.\n"
@@ -459,141 +459,127 @@ msgstr "Nezn
 msgid " (%s bytes)"
 msgstr " (%s bajtù)"
 
-#: src/http.c:507
+#: src/http.c:508
 msgid "Failed writing HTTP request.\n"
 msgstr "HTTP po¾adavek nebylo mo¾né odeslat.\n"
 
 # , c-format
-#: src/http.c:511
+#: src/http.c:512
 #, c-format
 msgid "%s request sent, awaiting response... "
 msgstr "%s po¾adavek odeslán, èekám na odpovìï ... "
 
-#: src/http.c:550
+#: src/http.c:551
 msgid "End of file while parsing headers.\n"
 msgstr "Hlavièka není úplná.\n"
 
 # , c-format
-#: src/http.c:561
+#: src/http.c:562
 #, c-format
 msgid "Read error (%s) in headers.\n"
 msgstr "Chyba (%s) pøi ètení hlavièek.\n"
 
-#: src/http.c:601
+#: src/http.c:602
 msgid "No data received"
 msgstr "Nepøi¹la ¾ádná data"
 
-#: src/http.c:603
+#: src/http.c:604
 msgid "Malformed status line"
 msgstr "Odpovìï serveru má zkomolený stavový øádek"
 
-#: src/http.c:608
+#: src/http.c:609
 msgid "(no description)"
 msgstr "(¾ádný popis)"
 
 #. If we have tried it already, then there is not point
 #. retrying it.
-#: src/http.c:692
+#: src/http.c:693
 msgid "Authorization failed.\n"
 msgstr "Autorizace selhala.\n"
 
-#: src/http.c:699
+#: src/http.c:700
 msgid "Unknown authentication scheme.\n"
 msgstr "Server po¾aduje neznámý zpùsob autentifikace.\n"
 
 # , c-format
-#: src/http.c:762
+#: src/http.c:783
 #, c-format
 msgid "Location: %s%s\n"
 msgstr "Pøesmìrováno na: %s%s\n"
 
-#: src/http.c:763 src/http.c:788
+#: src/http.c:784 src/http.c:809
 msgid "unspecified"
 msgstr "neudáno"
 
-#: src/http.c:764
+#: src/http.c:785
 msgid " [following]"
 msgstr " [následuji]"
 
 #. No need to print this output if the body won't be
 #. downloaded at all, or if the original server response is
 #. printed.
-#: src/http.c:778
+#: src/http.c:799
 msgid "Length: "
 msgstr "Délka: "
 
 # , c-format
-#: src/http.c:783
+#: src/http.c:804
 #, c-format
 msgid " (%s to go)"
 msgstr " (%s zbývá)"
 
-#: src/http.c:788
+#: src/http.c:809
 msgid "ignored"
 msgstr "je ignorována"
 
-#: src/http.c:880
+#: src/http.c:903
 msgid "Warning: wildcards not supported in HTTP.\n"
 msgstr "Varování: HTTP nepodporuje ¾olíkové znaky.\n"
 
 # , c-format
 #. If opt.noclobber is turned on and file already exists, do not
 #. retrieve the file
-#: src/http.c:895
+#: src/http.c:924
 #, c-format
 msgid "File `%s' already there, will not retrieve.\n"
 msgstr "Soubor `%s' nebudu pøená¹et, je ji¾ zde.\n"
 
 # , c-format
-#: src/http.c:1048
+#: src/http.c:1083
 #, c-format
 msgid "Cannot write to `%s' (%s).\n"
 msgstr "Nemohu zapsat do `%s' (%s).\n"
 
 # , c-format
-#: src/http.c:1058
+#: src/http.c:1094
 #, c-format
 msgid "ERROR: Redirection (%d) without location.\n"
 msgstr "CHYBA: Pøesmìrování (%d) bez udané nové adresy.\n"
 
 # , c-format
-#: src/http.c:1081
+#: src/http.c:1119
 #, c-format
 msgid "%s ERROR %d: %s.\n"
 msgstr "%s CHYBA %d: %s.\n"
 
-#: src/http.c:1093
+#: src/http.c:1132
 msgid "Last-modified header missing -- time-stamps turned off.\n"
 msgstr ""
 "Nebudu pou¾ívat èasová razítka (`time-stamps'), proto¾e hlavièka\n"
 "\"Last-modified\" v odpovìdi serveru schází.\n"
 
-#: src/http.c:1101
+#: src/http.c:1140
 msgid "Last-modified header invalid -- time-stamp ignored.\n"
 msgstr ""
 "Ignoruji èasové razítko souboru (`time-stamp'), proto¾e hlavièka \n"
 "\"Last-modified\" obsahuje neplatné údaje.\n"
 
-#. We can't collapse this down into just one logprintf()
-#. call with a variable set to u->local or the .orig
-#. filename because we have to malloc() space for the
-#. latter, and because there are multiple returns above (a
-#. coding style no-no by many measures, for reasons such as
-#. this) we'd have to remember to free() the string at each
-#. one to avoid a memory leak.
-#: src/http.c:1132
-#, c-format
-msgid ""
-"Server file no newer than local file `%s.orig' -- not retrieving.\n"
-"\n"
-msgstr ""
-
-#: src/http.c:1146
+#: src/http.c:1175
 msgid "Remote file is newer, retrieving.\n"
 msgstr "Vzdálený soubor je novìj¹ího data, pøená¹ím.\n"
 
 # , c-format
-#: src/http.c:1180
+#: src/http.c:1210
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld/%ld]\n"
@@ -603,13 +589,13 @@ msgstr ""
 "\n"
 
 # , c-format
-#: src/http.c:1214
+#: src/http.c:1258
 #, c-format
 msgid "%s (%s) - Connection closed at byte %ld. "
 msgstr "%s (%s) - Spojení uzavøeno na bajtu %ld. "
 
 # , c-format
-#: src/http.c:1222
+#: src/http.c:1266
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld/%ld])\n"
@@ -619,62 +605,62 @@ msgstr ""
 "\n"
 
 # , c-format
-#: src/http.c:1235
+#: src/http.c:1286
 #, c-format
 msgid "%s (%s) - Connection closed at byte %ld/%ld. "
 msgstr "%s (%s) - Spojení uzavøeno na bajtu %ld/%ld. "
 
 # , c-format
-#: src/http.c:1246
+#: src/http.c:1297
 #, c-format
 msgid "%s (%s) - Read error at byte %ld (%s)."
 msgstr "%s (%s) - Chyba pøi ètení dat na bajtu %ld (%s)."
 
 # , c-format
-#: src/http.c:1254
+#: src/http.c:1305
 #, c-format
 msgid "%s (%s) - Read error at byte %ld/%ld (%s). "
 msgstr "%s (%s) - Chyba pøi ètení dat na bajtu %ld/%ld (%s). "
 
 # , c-format
-#: src/init.c:319 src/netrc.c:260
+#: src/init.c:320 src/netrc.c:260
 #, c-format
 msgid "%s: Cannot read %s (%s).\n"
 msgstr "%s: Nemohu pøeèíst %s (%s).\n"
 
 # , c-format
-#: src/init.c:340 src/init.c:346
+#: src/init.c:341 src/init.c:347
 #, c-format
 msgid "%s: Error in %s at line %d.\n"
 msgstr "%s: Chyba v %s na øádku %d.\n"
 
 # , c-format
-#: src/init.c:377
+#: src/init.c:378
 #, c-format
 msgid "%s: Warning: Both system and user wgetrc point to `%s'.\n"
 msgstr ""
 "%s: Varování: Globální i u¾ivatelské wgetrc jsou shodnì ulo¾eny v `%s'.\n"
 
 # , c-format
-#: src/init.c:465
+#: src/init.c:466
 #, c-format
 msgid "%s: BUG: unknown command `%s', value `%s'.\n"
 msgstr "%s: Chyba: Neznámý pøíkaz `%s', hodnota `%s'.\n"
 
 # , c-format
-#: src/init.c:492
+#: src/init.c:493
 #, c-format
 msgid "%s: %s: Please specify on or off.\n"
 msgstr "%s: %s: Zadejte prosím `on' nebo `off'.\n"
 
 # , c-format
-#: src/init.c:510 src/init.c:767 src/init.c:789 src/init.c:862
+#: src/init.c:511 src/init.c:768 src/init.c:790 src/init.c:863
 #, c-format
 msgid "%s: %s: Invalid specification `%s'.\n"
 msgstr "%s: %s: Neplatná specifikace `%s'\n"
 
 # , c-format
-#: src/init.c:623 src/init.c:645 src/init.c:667 src/init.c:693
+#: src/init.c:624 src/init.c:646 src/init.c:668 src/init.c:694
 #, c-format
 msgid "%s: Invalid specification `%s'\n"
 msgstr "%s: Neplatná specifikace `%s'\n"
@@ -816,6 +802,8 @@ msgid ""
 "       --http-passwd=PASS    set http password to PASS.\n"
 "  -C,  --cache=on/off        (dis)allow server-cached data (normally "
 "allowed).\n"
+"  -E,  --html-extension      save all text/html documents with .html "
+"extension.\n"
 "       --ignore-length       ignore `Content-Length' header field.\n"
 "       --header=STRING       insert STRING among the headers.\n"
 "       --proxy-user=USER     set USER as proxy username.\n"
@@ -839,7 +827,7 @@ msgstr ""
 "                             v hlavièce identifikaèní øetìzec AGENT\n"
 
 # , fuzzy
-#: src/main.c:172
+#: src/main.c:173
 #, fuzzy
 msgid ""
 "FTP options:\n"
@@ -856,7 +844,7 @@ msgstr ""
 "       --passive-ftp     pou¾ij pasivní mód pøenosu dat\n"
 "\n"
 
-#: src/main.c:177
+#: src/main.c:178
 #, fuzzy
 msgid ""
 "Recursive retrieval:\n"
@@ -883,7 +871,7 @@ msgstr ""
 "\n"
 
 # , fuzzy
-#: src/main.c:187
+#: src/main.c:188
 #, fuzzy
 msgid ""
 "Recursive accept/reject:\n"
@@ -923,7 +911,7 @@ msgstr ""
 "\n"
 
 # , fuzzy
-#: src/main.c:202
+#: src/main.c:203
 msgid "Mail bug reports and suggestions to <bug-wget@gnu.org>.\n"
 msgstr ""
 "Zprávy o chybách a návrhy na vylep¹ení programu zasílejte na adresu\n"
@@ -931,12 +919,12 @@ msgstr ""
 "Komentáøe k èeskému pøekladu zasílejte na adresu <cs@li.org>. \n"
 
 # , fuzzy
-#: src/main.c:371
+#: src/main.c:378
 #, c-format
 msgid "%s: debug support not compiled in.\n"
 msgstr "%s: program nebyl zkompilován s podporou pro ladìní.\n"
 
-#: src/main.c:425
+#: src/main.c:430
 msgid ""
 "Copyright (C) 1995, 1996, 1997, 1998 Free Software Foundation, Inc.\n"
 "This program is distributed in the hope that it will be useful,\n"
@@ -950,7 +938,7 @@ msgstr ""
 "anebo VHODNOSTI PRO URÈITÝ ÚÈEL. Dal¹í podrobnosti hledejte \n"
 "v Obecné veøejné licenci GNU.\n"
 
-#: src/main.c:431
+#: src/main.c:436
 #, fuzzy
 msgid ""
 "\n"
@@ -960,13 +948,13 @@ msgstr ""
 "Autorem tohto programu je Hrvoje Nik¹iæ <hniksic@srce.hr>\n"
 
 # , c-format
-#: src/main.c:505
+#: src/main.c:510
 #, c-format
 msgid "%s: %s: invalid command\n"
 msgstr "%s: %s: neplatný pøíkaz\n"
 
 # , c-format
-#: src/main.c:558
+#: src/main.c:563
 #, c-format
 msgid "%s: illegal option -- `-n%c'\n"
 msgstr "%s: nepøípustný pøepínaè -- `-n%c'\n"
@@ -974,33 +962,33 @@ msgstr "%s: nep
 # , c-format
 #. #### Something nicer should be printed here -- similar to the
 #. pre-1.5 `--help' page.
-#: src/main.c:561 src/main.c:603 src/main.c:661
+#: src/main.c:566 src/main.c:608 src/main.c:666
 #, c-format
 msgid "Try `%s --help' for more options.\n"
 msgstr "Pøíkaz `%s --help' vypí¹e význam platných pøepínaèù.\n"
 
-#: src/main.c:641
+#: src/main.c:646
 msgid "Can't be verbose and quiet at the same time.\n"
 msgstr "Nedoká¾u být upovídaný a zitcha najednou.\n"
 
-#: src/main.c:647
+#: src/main.c:652
 msgid "Can't timestamp and not clobber old files at the same time.\n"
 msgstr "Nedoká¾u pou¾ívat èasová razítka a nemazat pøitom staré soubory.\n"
 
 #. No URL specified.
-#: src/main.c:656
+#: src/main.c:661
 #, c-format
 msgid "%s: missing URL\n"
 msgstr "%s: postrádám URL\n"
 
 # , c-format
-#: src/main.c:744
+#: src/main.c:749
 #, c-format
 msgid "No URLs found in %s.\n"
 msgstr "V souboru `%s' nebyla nalezena ¾ádná URL.\n"
 
 # , c-format
-#: src/main.c:753
+#: src/main.c:758
 #, c-format
 msgid ""
 "\n"
@@ -1012,14 +1000,14 @@ msgstr ""
 "Celkem naèteno %s bajtù v %d souborech\n"
 
 # , c-format
-#: src/main.c:758
+#: src/main.c:763
 #, c-format
 msgid "Download quota (%s bytes) EXCEEDED!\n"
 msgstr "Pøekroèen limit objemu ulo¾ených dat (%s bajtù)!\n"
 
 #. Please note that the double `%' in `%%s' is intentional, because
 #. redirect_output passes tmp through printf.
-#: src/main.c:785
+#: src/main.c:790
 msgid "%s received, redirecting output to `%%s'.\n"
 msgstr "Zachycen signál %s , výstup pøesmìrován do `%%s'.\n"
 
@@ -1156,19 +1144,19 @@ msgid "Error (%s): Base %s relative, without referer URL.\n"
 msgstr "Chyba (%s): Bázový odkaz %s nesmí být relativní.\n"
 
 # , c-format
-#: src/url.c:1384
+#: src/url.c:1385
 #, c-format
 msgid "Converting %s... "
 msgstr "Konvertuji %s... "
 
 # , c-format
-#: src/url.c:1389 src/url.c:1457
+#: src/url.c:1390 src/url.c:1477
 #, c-format
 msgid "Cannot convert links in %s: %s\n"
 msgstr "Nedoká¾u pøevést odkazy v %s: %s\n"
 
 # , c-format
-#: src/url.c:1433
+#: src/url.c:1453
 #, fuzzy, c-format
 msgid "Cannot back up %s as %s: %s\n"
 msgstr "Nedoká¾u pøevést odkazy v %s: %s\n"
diff --git a/po/de.gmo b/po/de.gmo
index 10f1322..32e1741 100644
Binary files a/po/de.gmo and b/po/de.gmo differ
diff --git a/po/de.po b/po/de.po
index 4bf4f24..385f409 100644
--- a/po/de.po
+++ b/po/de.po
@@ -23,7 +23,7 @@
 msgid ""
 msgstr ""
 "Project-Id-Version: wget 1.5.2-b4\n"
-"POT-Creation-Date: 2000-10-09 15:38-0700\n"
+"POT-Creation-Date: 2000-10-19 22:52-0700\n"
 "PO-Revision-Date: 1998-06-15 19:25+02:00\n"
 "Last-Translator: Karl Eichwalder <ke@suse.de>\n"
 "Language-Team: German <de@li.org>\n"
@@ -33,18 +33,18 @@ msgstr ""
 
 #. Login to the server:
 #. First: Establish the control connection.
-#: src/ftp.c:147 src/http.c:347
+#: src/ftp.c:147 src/http.c:348
 #, c-format
 msgid "Connecting to %s:%hu... "
 msgstr "Verbindungsaufbau zu %s:%hu... "
 
-#: src/ftp.c:169 src/ftp.c:411 src/http.c:364
+#: src/ftp.c:169 src/ftp.c:411 src/http.c:365
 #, c-format
 msgid "Connection to %s:%hu refused.\n"
 msgstr "Verbindung nach %s:%hu zurückgewiesen.\n"
 
 #. Second: Login with proper USER/PASS sequence.
-#: src/ftp.c:190 src/http.c:375
+#: src/ftp.c:190 src/http.c:376
 msgid "connected!\n"
 msgstr "verbunden!\n"
 
@@ -102,7 +102,7 @@ msgstr ""
 "Kein solches Verzeichnis »%s«.\n"
 "\n"
 
-#: src/ftp.c:331 src/ftp.c:599 src/ftp.c:647 src/url.c:1501
+#: src/ftp.c:331 src/ftp.c:599 src/ftp.c:647 src/url.c:1523
 msgid "done.\n"
 msgstr "fertig.\n"
 
@@ -201,13 +201,13 @@ msgstr "Daten-
 msgid "File `%s' already there, not retrieving.\n"
 msgstr "Datei »%s« ist schon vorhanden, kein Hol-Versuch.\n"
 
-#: src/ftp.c:915 src/http.c:992
+#: src/ftp.c:915 src/http.c:1016
 #, c-format
 msgid "(try:%2d)"
 msgstr "(versuche:%2d)"
 
 # oder "gesichert"?
-#: src/ftp.c:979 src/http.c:1199
+#: src/ftp.c:979 src/http.c:1236
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld]\n"
@@ -231,14 +231,14 @@ msgstr "Entfernt 
 msgid "Recursion depth %d exceeded max. depth %d.\n"
 msgstr "Die Rekursionstiefe %d übersteigt die max. Tiefe %d.\n"
 
-#: src/ftp.c:1125 src/http.c:1136
+#: src/ftp.c:1125 src/http.c:1163
 #, c-format
 msgid ""
 "Server file no newer than local file `%s' -- not retrieving.\n"
 "\n"
 msgstr ""
 
-#: src/ftp.c:1131 src/http.c:1142
+#: src/ftp.c:1131 src/http.c:1171
 #, fuzzy, c-format
 msgid "The sizes do not match (local %ld) -- retrieving.\n"
 msgstr "Größen stimmen nicht überein (lokal %ld), Hol-Versuch.\n"
@@ -432,56 +432,56 @@ msgstr "Nicht sicher"
 msgid " (%s bytes)"
 msgstr " (%s Bytes)"
 
-#: src/http.c:507
+#: src/http.c:508
 msgid "Failed writing HTTP request.\n"
 msgstr "HTTP-Anforderung zu schreiben schlug fehl.\n"
 
-#: src/http.c:511
+#: src/http.c:512
 #, c-format
 msgid "%s request sent, awaiting response... "
 msgstr "%s Anforderung gesendet, warte auf Antwort... "
 
-#: src/http.c:550
+#: src/http.c:551
 msgid "End of file while parsing headers.\n"
 msgstr "Dateiende beim auswerten der Kopfzeilen.\n"
 
-#: src/http.c:561
+#: src/http.c:562
 #, c-format
 msgid "Read error (%s) in headers.\n"
 msgstr "Lesefehler (%s) bei den Kopfzeilen.\n"
 
-#: src/http.c:601
+#: src/http.c:602
 msgid "No data received"
 msgstr "Keine Daten empfangen"
 
-#: src/http.c:603
+#: src/http.c:604
 msgid "Malformed status line"
 msgstr "Nicht korrekte Statuszeile"
 
-#: src/http.c:608
+#: src/http.c:609
 msgid "(no description)"
 msgstr "(keine Beschreibung)"
 
 #. If we have tried it already, then there is not point
 #. retrying it.
-#: src/http.c:692
+#: src/http.c:693
 msgid "Authorization failed.\n"
 msgstr "Authorisierung fehlgeschlagen.\n"
 
-#: src/http.c:699
+#: src/http.c:700
 msgid "Unknown authentication scheme.\n"
 msgstr "Unbekannten Authentifizierungsablauf.\n"
 
-#: src/http.c:762
+#: src/http.c:783
 #, c-format
 msgid "Location: %s%s\n"
 msgstr "Platz: %s%s\n"
 
-#: src/http.c:763 src/http.c:788
+#: src/http.c:784 src/http.c:809
 msgid "unspecified"
 msgstr "nicht spezifiziert"
 
-#: src/http.c:764
+#: src/http.c:785
 msgid " [following]"
 msgstr "[folge]"
 
@@ -489,73 +489,59 @@ msgstr "[folge]"
 #. No need to print this output if the body won't be
 #. downloaded at all, or if the original server response is
 #. printed.
-#: src/http.c:778
+#: src/http.c:799
 msgid "Length: "
 msgstr "Länge: "
 
-#: src/http.c:783
+#: src/http.c:804
 #, c-format
 msgid " (%s to go)"
 msgstr " (noch %s)"
 
-#: src/http.c:788
+#: src/http.c:809
 msgid "ignored"
 msgstr "übergangen"
 
-#: src/http.c:880
+#: src/http.c:903
 msgid "Warning: wildcards not supported in HTTP.\n"
 msgstr "Warnung: Joker-Zeichen werden bei HTTP nicht unterstützt.\n"
 
 #. If opt.noclobber is turned on and file already exists, do not
 #. retrieve the file
-#: src/http.c:895
+#: src/http.c:924
 #, c-format
 msgid "File `%s' already there, will not retrieve.\n"
 msgstr "Datei »%s« schon vorhanden, kein Hol-Versuch.\n"
 
-#: src/http.c:1048
+#: src/http.c:1083
 #, c-format
 msgid "Cannot write to `%s' (%s).\n"
 msgstr "Kann nicht nach »%s« schreiben (%s).\n"
 
 # Was meint hier location?
-#: src/http.c:1058
+#: src/http.c:1094
 #, c-format
 msgid "ERROR: Redirection (%d) without location.\n"
 msgstr "FEHLER: Redirektion (%d) ohne Ziel(?).\n"
 
-#: src/http.c:1081
+#: src/http.c:1119
 #, c-format
 msgid "%s ERROR %d: %s.\n"
 msgstr "%s FEHLER %d: %s.\n"
 
-#: src/http.c:1093
+#: src/http.c:1132
 msgid "Last-modified header missing -- time-stamps turned off.\n"
 msgstr "»Last-modified«-Kopfzeile fehlt -- Zeitstempel abgeschaltet.\n"
 
-#: src/http.c:1101
+#: src/http.c:1140
 msgid "Last-modified header invalid -- time-stamp ignored.\n"
 msgstr "»Last-modified«-Kopfzeile ungültig -- Zeitstempeln übergangen.\n"
 
-#. We can't collapse this down into just one logprintf()
-#. call with a variable set to u->local or the .orig
-#. filename because we have to malloc() space for the
-#. latter, and because there are multiple returns above (a
-#. coding style no-no by many measures, for reasons such as
-#. this) we'd have to remember to free() the string at each
-#. one to avoid a memory leak.
-#: src/http.c:1132
-#, c-format
-msgid ""
-"Server file no newer than local file `%s.orig' -- not retrieving.\n"
-"\n"
-msgstr ""
-
-#: src/http.c:1146
+#: src/http.c:1175
 msgid "Remote file is newer, retrieving.\n"
 msgstr "Entfernte Datei ist neuer, Hol-Versuch.\n"
 
-#: src/http.c:1180
+#: src/http.c:1210
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld/%ld]\n"
@@ -564,12 +550,12 @@ msgstr ""
 "%s (%s) - »%s« gesichert [%ld/%ld]\n"
 "\n"
 
-#: src/http.c:1214
+#: src/http.c:1258
 #, c-format
 msgid "%s (%s) - Connection closed at byte %ld. "
 msgstr "%s (%s) - Verbindung bei Byte %ld geschlossen. "
 
-#: src/http.c:1222
+#: src/http.c:1266
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld/%ld])\n"
@@ -578,52 +564,52 @@ msgstr ""
 "%s (%s) - »%s« gesichert [%ld/%ld])\n"
 "\n"
 
-#: src/http.c:1235
+#: src/http.c:1286
 #, c-format
 msgid "%s (%s) - Connection closed at byte %ld/%ld. "
 msgstr "%s (%s) - Verbindung bei Byte %ld/%ld geschlossen. "
 
-#: src/http.c:1246
+#: src/http.c:1297
 #, c-format
 msgid "%s (%s) - Read error at byte %ld (%s)."
 msgstr "%s (%s) - Lesefehler bei Byte %ld (%s)."
 
-#: src/http.c:1254
+#: src/http.c:1305
 #, c-format
 msgid "%s (%s) - Read error at byte %ld/%ld (%s). "
 msgstr "%s (%s) - Lesefehler bei Byte %ld/%ld (%s). "
 
-#: src/init.c:319 src/netrc.c:260
+#: src/init.c:320 src/netrc.c:260
 #, c-format
 msgid "%s: Cannot read %s (%s).\n"
 msgstr "%s: Kann »%s« nicht lesen (%s).\n"
 
-#: src/init.c:340 src/init.c:346
+#: src/init.c:341 src/init.c:347
 #, c-format
 msgid "%s: Error in %s at line %d.\n"
 msgstr "%s: Fehler in »%s« bei Zeile %d.\n"
 
-#: src/init.c:377
+#: src/init.c:378
 #, c-format
 msgid "%s: Warning: Both system and user wgetrc point to `%s'.\n"
 msgstr "%s: Warnung: wgetrc des Systems und des Benutzers zeigen nach »%s«.\n"
 
-#: src/init.c:465
+#: src/init.c:466
 #, c-format
 msgid "%s: BUG: unknown command `%s', value `%s'.\n"
 msgstr "%s: Unbekannter Befehl »%s«, Wert »%s«.\n"
 
-#: src/init.c:492
+#: src/init.c:493
 #, c-format
 msgid "%s: %s: Please specify on or off.\n"
 msgstr "%s: %s: Bitte »on« oder »off« angeben.\n"
 
-#: src/init.c:510 src/init.c:767 src/init.c:789 src/init.c:862
+#: src/init.c:511 src/init.c:768 src/init.c:790 src/init.c:863
 #, c-format
 msgid "%s: %s: Invalid specification `%s'.\n"
 msgstr "%s: %s: Ungültige Angabe »%s«\n"
 
-#: src/init.c:623 src/init.c:645 src/init.c:667 src/init.c:693
+#: src/init.c:624 src/init.c:646 src/init.c:668 src/init.c:694
 #, c-format
 msgid "%s: Invalid specification `%s'\n"
 msgstr "%s: Ungültige Angabe »%s«\n"
@@ -763,6 +749,8 @@ msgid ""
 "       --http-passwd=PASS    set http password to PASS.\n"
 "  -C,  --cache=on/off        (dis)allow server-cached data (normally "
 "allowed).\n"
+"  -E,  --html-extension      save all text/html documents with .html "
+"extension.\n"
 "       --ignore-length       ignore `Content-Length' header field.\n"
 "       --header=STRING       insert STRING among the headers.\n"
 "       --proxy-user=USER     set USER as proxy username.\n"
@@ -787,7 +775,7 @@ msgstr ""
 "identifizieren\n"
 "\n"
 
-#: src/main.c:172
+#: src/main.c:173
 #, fuzzy
 msgid ""
 "FTP options:\n"
@@ -804,7 +792,7 @@ msgstr ""
 "       --passive-ftp     den \"passiven\" Übertragungsmodus verwenden\n"
 "\n"
 
-#: src/main.c:177
+#: src/main.c:178
 #, fuzzy
 msgid ""
 "Recursive retrieval:\n"
@@ -833,7 +821,7 @@ msgstr ""
 "  -nr, --dont-remove-listing   ».listing«-Dateien nicht entfernen\n"
 "\n"
 
-#: src/main.c:187
+#: src/main.c:188
 #, fuzzy
 msgid ""
 "Recursive accept/reject:\n"
@@ -879,7 +867,7 @@ msgstr ""
 "                                       hinaufsteigen\n"
 "\n"
 
-#: src/main.c:202
+#: src/main.c:203
 msgid "Mail bug reports and suggestions to <bug-wget@gnu.org>.\n"
 msgstr ""
 "Fehlerberichte und Verbesserungsvorschläge bitte an <bug-wget@gnu.org>\n"
@@ -887,12 +875,12 @@ msgstr ""
 "\n"
 "Für die deutsche Übersetzung ist die Mailingliste <de@li.org> zuständig.\n"
 
-#: src/main.c:371
+#: src/main.c:378
 #, c-format
 msgid "%s: debug support not compiled in.\n"
 msgstr "%s: Debug-Unterstützung nicht hineinkompiliert.\n"
 
-#: src/main.c:425
+#: src/main.c:430
 msgid ""
 "Copyright (C) 1995, 1996, 1997, 1998 Free Software Foundation, Inc.\n"
 "This program is distributed in the hope that it will be useful,\n"
@@ -907,7 +895,7 @@ msgstr ""
 "Lizenz- und Kopierbedingung; die Einzelheiten sind in der Datei COPYING\n"
 "(GNU General Public License) beschrieben.\n"
 
-#: src/main.c:431
+#: src/main.c:436
 #, fuzzy
 msgid ""
 "\n"
@@ -916,45 +904,45 @@ msgstr ""
 "\n"
 "Geschrieben von Hrvoje Niksic <hniksic@srce.hr>.\n"
 
-#: src/main.c:505
+#: src/main.c:510
 #, c-format
 msgid "%s: %s: invalid command\n"
 msgstr "%s: %s: ungültiger Befehl\n"
 
-#: src/main.c:558
+#: src/main.c:563
 #, c-format
 msgid "%s: illegal option -- `-n%c'\n"
 msgstr "%s: ungültige Option -- »-n%c«\n"
 
 #. #### Something nicer should be printed here -- similar to the
 #. pre-1.5 `--help' page.
-#: src/main.c:561 src/main.c:603 src/main.c:661
+#: src/main.c:566 src/main.c:608 src/main.c:666
 #, c-format
 msgid "Try `%s --help' for more options.\n"
 msgstr "»%s --help« gibt weitere Informationen.\n"
 
-#: src/main.c:641
+#: src/main.c:646
 msgid "Can't be verbose and quiet at the same time.\n"
 msgstr "\"Mitteilsam\" und \"still\" ist gleichzeitig unmöglich.\n"
 
-#: src/main.c:647
+#: src/main.c:652
 msgid "Can't timestamp and not clobber old files at the same time.\n"
 msgstr ""
 "Zeitstempeln und nicht Überschreiben alter Dateien ist gleichzeitig "
 "unmöglich.\n"
 
 #. No URL specified.
-#: src/main.c:656
+#: src/main.c:661
 #, c-format
 msgid "%s: missing URL\n"
 msgstr "%s: URL fehlt\n"
 
-#: src/main.c:744
+#: src/main.c:749
 #, c-format
 msgid "No URLs found in %s.\n"
 msgstr "Keine URLs in %s gefunden.\n"
 
-#: src/main.c:753
+#: src/main.c:758
 #, c-format
 msgid ""
 "\n"
@@ -965,14 +953,14 @@ msgstr ""
 "BEENDET --%s--\n"
 "Geholt: %s Bytes in %d Dateien\n"
 
-#: src/main.c:758
+#: src/main.c:763
 #, c-format
 msgid "Download quota (%s bytes) EXCEEDED!\n"
 msgstr "Hol-Kontingent (%s Bytes) ERSCHÖPFT!\n"
 
 #. Please note that the double `%' in `%%s' is intentional, because
 #. redirect_output passes tmp through printf.
-#: src/main.c:785
+#: src/main.c:790
 msgid "%s received, redirecting output to `%%s'.\n"
 msgstr "%s erhalten, weise Ausgabe nach »%%s« zurück.\n"
 
@@ -1095,17 +1083,17 @@ msgstr "Fehler (%s): Verweis 
 msgid "Error (%s): Base %s relative, without referer URL.\n"
 msgstr "Fehler (%s): »Base« %s relativ, ohne Bezugs-URL.\n"
 
-#: src/url.c:1384
+#: src/url.c:1385
 #, c-format
 msgid "Converting %s... "
 msgstr "Wandle um %s... "
 
-#: src/url.c:1389 src/url.c:1457
+#: src/url.c:1390 src/url.c:1477
 #, c-format
 msgid "Cannot convert links in %s: %s\n"
 msgstr "Kann Verweise nicht umwandeln zu %s: %s\n"
 
-#: src/url.c:1433
+#: src/url.c:1453
 #, fuzzy, c-format
 msgid "Cannot back up %s as %s: %s\n"
 msgstr "Kann Verweise nicht umwandeln zu %s: %s\n"
diff --git a/po/hr.gmo b/po/hr.gmo
index 7adb0d9..92d2aba 100644
Binary files a/po/hr.gmo and b/po/hr.gmo differ
diff --git a/po/hr.po b/po/hr.po
index d7ccb1f..16d2aef 100644
--- a/po/hr.po
+++ b/po/hr.po
@@ -5,7 +5,7 @@
 msgid ""
 msgstr ""
 "Project-Id-Version: wget 1.5.2-b2\n"
-"POT-Creation-Date: 2000-10-09 15:38-0700\n"
+"POT-Creation-Date: 2000-10-19 22:52-0700\n"
 "PO-Revision-Date: 1998-02-29 21:05+01:00\n"
 "Last-Translator: Hrvoje Niksic <hniksic@srce.hr>\n"
 "Language-Team: Croatian <hr-translation@bagan.srce.hr>\n"
@@ -15,18 +15,18 @@ msgstr ""
 
 #. Login to the server:
 #. First: Establish the control connection.
-#: src/ftp.c:147 src/http.c:347
+#: src/ftp.c:147 src/http.c:348
 #, c-format
 msgid "Connecting to %s:%hu... "
 msgstr "Spajam se na %s:%hu... "
 
-#: src/ftp.c:169 src/ftp.c:411 src/http.c:364
+#: src/ftp.c:169 src/ftp.c:411 src/http.c:365
 #, c-format
 msgid "Connection to %s:%hu refused.\n"
 msgstr "%s:%hu odbija vezu.\n"
 
 #. Second: Login with proper USER/PASS sequence.
-#: src/ftp.c:190 src/http.c:375
+#: src/ftp.c:190 src/http.c:376
 msgid "connected!\n"
 msgstr "spojen!\n"
 
@@ -81,7 +81,7 @@ msgid ""
 "\n"
 msgstr "Nema direktorija `%s'.\n"
 
-#: src/ftp.c:331 src/ftp.c:599 src/ftp.c:647 src/url.c:1501
+#: src/ftp.c:331 src/ftp.c:599 src/ftp.c:647 src/url.c:1523
 msgid "done.\n"
 msgstr "gotovo.\n"
 
@@ -179,12 +179,12 @@ msgstr "Prijenos podataka prekinut.\n"
 msgid "File `%s' already there, not retrieving.\n"
 msgstr "Datoteka `%s' veæ postoji, ne skidam.\n"
 
-#: src/ftp.c:915 src/http.c:992
+#: src/ftp.c:915 src/http.c:1016
 #, c-format
 msgid "(try:%2d)"
 msgstr "(pok:%2d)"
 
-#: src/ftp.c:979 src/http.c:1199
+#: src/ftp.c:979 src/http.c:1236
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld]\n"
@@ -208,7 +208,7 @@ msgstr "Izbrisao `%s'.\n"
 msgid "Recursion depth %d exceeded max. depth %d.\n"
 msgstr "Dubina rekurzije %d prelazi najveæu dozvoljenu %d.\n"
 
-#: src/ftp.c:1125 src/http.c:1136
+#: src/ftp.c:1125 src/http.c:1163
 #, c-format
 msgid ""
 "Server file no newer than local file `%s' -- not retrieving.\n"
@@ -216,7 +216,7 @@ msgid ""
 msgstr ""
 "Datoteka na poslu¾itelju nije novija od lokalne datoteke `%s' -- ne skidam.\n"
 
-#: src/ftp.c:1131 src/http.c:1142
+#: src/ftp.c:1131 src/http.c:1171
 #, fuzzy, c-format
 msgid "The sizes do not match (local %ld) -- retrieving.\n"
 msgstr "Velièine se ne sla¾u (lokalno %ld), skidam.\n"
@@ -408,130 +408,114 @@ msgstr "Ne znam     "
 msgid " (%s bytes)"
 msgstr " (%s bajtova)"
 
-#: src/http.c:507
+#: src/http.c:508
 msgid "Failed writing HTTP request.\n"
 msgstr "Nisam uspio poslati HTTP zahtjev.\n"
 
-#: src/http.c:511
+#: src/http.c:512
 #, c-format
 msgid "%s request sent, awaiting response... "
 msgstr "%s zahtjev poslan, èekam odgovor... "
 
-#: src/http.c:550
+#: src/http.c:551
 msgid "End of file while parsing headers.\n"
 msgstr "Kraj datoteke za vrijeme obrade zaglavlja.\n"
 
-#: src/http.c:561
+#: src/http.c:562
 #, c-format
 msgid "Read error (%s) in headers.\n"
 msgstr "Gre¹ka pri èitanju zaglavlja (%s).\n"
 
-#: src/http.c:601
+#: src/http.c:602
 msgid "No data received"
 msgstr "Podaci nisu primljeni"
 
-#: src/http.c:603
+#: src/http.c:604
 msgid "Malformed status line"
 msgstr "Deformirana statusna linija"
 
-#: src/http.c:608
+#: src/http.c:609
 msgid "(no description)"
 msgstr "(bez opisa)"
 
 #. If we have tried it already, then there is not point
 #. retrying it.
-#: src/http.c:692
+#: src/http.c:693
 msgid "Authorization failed.\n"
 msgstr "Ovjera nije uspjela.\n"
 
-#: src/http.c:699
+#: src/http.c:700
 msgid "Unknown authentication scheme.\n"
 msgstr "Nepoznata metoda ovjere.\n"
 
-#: src/http.c:762
+#: src/http.c:783
 #, c-format
 msgid "Location: %s%s\n"
 msgstr "Polo¾aj: %s%s\n"
 
-#: src/http.c:763 src/http.c:788
+#: src/http.c:784 src/http.c:809
 msgid "unspecified"
 msgstr "neodreðen"
 
-#: src/http.c:764
+#: src/http.c:785
 msgid " [following]"
 msgstr " [pratim]"
 
 #. No need to print this output if the body won't be
 #. downloaded at all, or if the original server response is
 #. printed.
-#: src/http.c:778
+#: src/http.c:799
 msgid "Length: "
 msgstr "Duljina: "
 
-#: src/http.c:783
+#: src/http.c:804
 #, c-format
 msgid " (%s to go)"
 msgstr " (jo¹ %s)"
 
-#: src/http.c:788
+#: src/http.c:809
 msgid "ignored"
 msgstr "zanemarena"
 
-#: src/http.c:880
+#: src/http.c:903
 msgid "Warning: wildcards not supported in HTTP.\n"
 msgstr "Upozorenje: wildcardi nisu podr¾ani za HTTP.\n"
 
 #. If opt.noclobber is turned on and file already exists, do not
 #. retrieve the file
-#: src/http.c:895
+#: src/http.c:924
 #, c-format
 msgid "File `%s' already there, will not retrieve.\n"
 msgstr "Datoteka `%s' veæ postoji, ne skidam.\n"
 
-#: src/http.c:1048
+#: src/http.c:1083
 #, c-format
 msgid "Cannot write to `%s' (%s).\n"
 msgstr "Ne mogu pisati u `%s' (%s).\n"
 
-#: src/http.c:1058
+#: src/http.c:1094
 #, c-format
 msgid "ERROR: Redirection (%d) without location.\n"
 msgstr "GRE©KA: Redirekcija (%d) bez novog polo¾aja (location).\n"
 
-#: src/http.c:1081
+#: src/http.c:1119
 #, c-format
 msgid "%s ERROR %d: %s.\n"
 msgstr "%s GRE©KA %d: %s.\n"
 
-#: src/http.c:1093
+#: src/http.c:1132
 msgid "Last-modified header missing -- time-stamps turned off.\n"
 msgstr "Nedostaje Last-Modified zaglavlje -- ignoriram vremensku oznaku.\n"
 
-#: src/http.c:1101
+#: src/http.c:1140
 msgid "Last-modified header invalid -- time-stamp ignored.\n"
 msgstr "Nevaljan Last-Modified header -- ignoriram vremensku oznaku.\n"
 
-#. We can't collapse this down into just one logprintf()
-#. call with a variable set to u->local or the .orig
-#. filename because we have to malloc() space for the
-#. latter, and because there are multiple returns above (a
-#. coding style no-no by many measures, for reasons such as
-#. this) we'd have to remember to free() the string at each
-#. one to avoid a memory leak.
-#: src/http.c:1132
-#, c-format
-msgid ""
-"Server file no newer than local file `%s.orig' -- not retrieving.\n"
-"\n"
-msgstr ""
-"Datoteka na poslu¾itelju nije novija od lokalne datoteke `%s.orig' -- ne "
-"skidam.\n"
-
-#: src/http.c:1146
+#: src/http.c:1175
 msgid "Remote file is newer, retrieving.\n"
 msgstr "Datoteka na poslu¾itelju je novija, skidam.\n"
 
-#: src/http.c:1180
+#: src/http.c:1210
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld/%ld]\n"
@@ -540,12 +524,12 @@ msgstr ""
 "%s (%s) - `%s' snimljen [%ld/%ld]\n"
 "\n"
 
-#: src/http.c:1214
+#: src/http.c:1258
 #, c-format
 msgid "%s (%s) - Connection closed at byte %ld. "
 msgstr "%s (%s) - Veza zatvorena na bajtu %ld. "
 
-#: src/http.c:1222
+#: src/http.c:1266
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld/%ld])\n"
@@ -554,52 +538,52 @@ msgstr ""
 "%s (%s) - `%s' snimljen [%ld/%ld])\n"
 "\n"
 
-#: src/http.c:1235
+#: src/http.c:1286
 #, c-format
 msgid "%s (%s) - Connection closed at byte %ld/%ld. "
 msgstr "%s (%s) - Veza zatvorena na bajtu %ld/%ld. "
 
-#: src/http.c:1246
+#: src/http.c:1297
 #, c-format
 msgid "%s (%s) - Read error at byte %ld (%s)."
 msgstr "%s (%s) - Gre¹ka pri èitanju na bajtu %ld (%s)."
 
-#: src/http.c:1254
+#: src/http.c:1305
 #, c-format
 msgid "%s (%s) - Read error at byte %ld/%ld (%s). "
 msgstr "%s (%s) - Gre¹ka pri èitanju na bajtu %ld/%ld (%s). "
 
-#: src/init.c:319 src/netrc.c:260
+#: src/init.c:320 src/netrc.c:260
 #, c-format
 msgid "%s: Cannot read %s (%s).\n"
 msgstr "%s: Ne mogu proèitati %s (%s).\n"
 
-#: src/init.c:340 src/init.c:346
+#: src/init.c:341 src/init.c:347
 #, c-format
 msgid "%s: Error in %s at line %d.\n"
 msgstr "%s: Gre¹ka u %s na liniji %d.\n"
 
-#: src/init.c:377
+#: src/init.c:378
 #, c-format
 msgid "%s: Warning: Both system and user wgetrc point to `%s'.\n"
 msgstr "%s: Upozorenje: sistemski i korisnikov wgetrc su `%s'.\n"
 
-#: src/init.c:465
+#: src/init.c:466
 #, c-format
 msgid "%s: BUG: unknown command `%s', value `%s'.\n"
 msgstr "%s: BUG: Nepoznata naredba `%s', vrijednost `%s'.\n"
 
-#: src/init.c:492
+#: src/init.c:493
 #, c-format
 msgid "%s: %s: Please specify on or off.\n"
 msgstr "%s: %s: Molim postavite na on ili off.\n"
 
-#: src/init.c:510 src/init.c:767 src/init.c:789 src/init.c:862
+#: src/init.c:511 src/init.c:768 src/init.c:790 src/init.c:863
 #, c-format
 msgid "%s: %s: Invalid specification `%s'.\n"
 msgstr "%s: %s: Pogre¹na specifikacija `%s'\n"
 
-#: src/init.c:623 src/init.c:645 src/init.c:667 src/init.c:693
+#: src/init.c:624 src/init.c:646 src/init.c:668 src/init.c:694
 #, c-format
 msgid "%s: Invalid specification `%s'\n"
 msgstr "wget: %s: Pogre¹na specifikacija `%s'\n"
@@ -733,6 +717,8 @@ msgid ""
 "       --http-passwd=PASS    set http password to PASS.\n"
 "  -C,  --cache=on/off        (dis)allow server-cached data (normally "
 "allowed).\n"
+"  -E,  --html-extension      save all text/html documents with .html "
+"extension.\n"
 "       --ignore-length       ignore `Content-Length' header field.\n"
 "       --header=STRING       insert STRING among the headers.\n"
 "       --proxy-user=USER     set USER as proxy username.\n"
@@ -757,7 +743,7 @@ msgstr ""
 "                                  Wget/VERZIJA.\n"
 "\n"
 
-#: src/main.c:172
+#: src/main.c:173
 #, fuzzy
 msgid ""
 "FTP options:\n"
@@ -773,7 +759,7 @@ msgstr ""
 "       --passive-ftp     koristi \"pasivni\" mod prijenosa.\n"
 "\n"
 
-#: src/main.c:177
+#: src/main.c:178
 #, fuzzy
 msgid ""
 "Recursive retrieval:\n"
@@ -800,7 +786,7 @@ msgstr ""
 "  -nr, --dont-remove-listing   ne uklanjaj `.listing' datoteke.\n"
 "\n"
 
-#: src/main.c:187
+#: src/main.c:188
 #, fuzzy
 msgid ""
 "Recursive accept/reject:\n"
@@ -841,16 +827,16 @@ msgstr ""
 "  -np, --no-parent                   ne idi u direktorij vi¹e.\n"
 "\n"
 
-#: src/main.c:202
+#: src/main.c:203
 msgid "Mail bug reports and suggestions to <bug-wget@gnu.org>.\n"
 msgstr "©aljite izvje¹taje o bugovima i prijedloge na <bug-wget@gnu.org>.\n"
 
-#: src/main.c:371
+#: src/main.c:378
 #, c-format
 msgid "%s: debug support not compiled in.\n"
 msgstr "%s: podr¹ka za debugiranje nije ugraðena.\n"
 
-#: src/main.c:425
+#: src/main.c:430
 msgid ""
 "Copyright (C) 1995, 1996, 1997, 1998 Free Software Foundation, Inc.\n"
 "This program is distributed in the hope that it will be useful,\n"
@@ -864,7 +850,7 @@ msgstr ""
 "PROIZVODNOSTI ili UPOTREBLJIVOSTI ZA ODREÐENU SVRHU.  Pogledajte GNU\n"
 "General Public License za vi¹e detalja.\n"
 
-#: src/main.c:431
+#: src/main.c:436
 #, fuzzy
 msgid ""
 "\n"
@@ -873,43 +859,43 @@ msgstr ""
 "\n"
 "Napisao Hrvoje Nik¹iæ <hniksic@srce.hr>.\n"
 
-#: src/main.c:505
+#: src/main.c:510
 #, c-format
 msgid "%s: %s: invalid command\n"
 msgstr "%s: %s: nedozvoljena naredba\n"
 
-#: src/main.c:558
+#: src/main.c:563
 #, c-format
 msgid "%s: illegal option -- `-n%c'\n"
 msgstr "%s: nedozvoljena opcija -- `-n%c'\n"
 
 #. #### Something nicer should be printed here -- similar to the
 #. pre-1.5 `--help' page.
-#: src/main.c:561 src/main.c:603 src/main.c:661
+#: src/main.c:566 src/main.c:608 src/main.c:666
 #, c-format
 msgid "Try `%s --help' for more options.\n"
 msgstr "Poku¹ajte `%s --help' za vi¹e opcija.\n"
 
-#: src/main.c:641
+#: src/main.c:646
 msgid "Can't be verbose and quiet at the same time.\n"
 msgstr "Ne mogu istovremeno biti verbozan i tih.\n"
 
-#: src/main.c:647
+#: src/main.c:652
 msgid "Can't timestamp and not clobber old files at the same time.\n"
 msgstr "Ne mogu istovremeno paziti na vrijeme i ne gaziti stare datoteke.\n"
 
 #. No URL specified.
-#: src/main.c:656
+#: src/main.c:661
 #, c-format
 msgid "%s: missing URL\n"
 msgstr "%s: nedostaje URL\n"
 
-#: src/main.c:744
+#: src/main.c:749
 #, c-format
 msgid "No URLs found in %s.\n"
 msgstr "Nijedan URL nije pronaðen u %s.\n"
 
-#: src/main.c:753
+#: src/main.c:758
 #, c-format
 msgid ""
 "\n"
@@ -920,14 +906,14 @@ msgstr ""
 "ZAVR©IO --%s--\n"
 "Skinuo: %s bajta u %d datoteka\n"
 
-#: src/main.c:758
+#: src/main.c:763
 #, c-format
 msgid "Download quota (%s bytes) EXCEEDED!\n"
 msgstr "Kvota (%s bajtova) je PREKORAÈENA!\n"
 
 #. Please note that the double `%' in `%%s' is intentional, because
 #. redirect_output passes tmp through printf.
-#: src/main.c:785
+#: src/main.c:790
 msgid "%s received, redirecting output to `%%s'.\n"
 msgstr "%s primljen, usmjeravam izlaz na `%%s'.\n"
 
@@ -1048,17 +1034,17 @@ msgstr "Gre
 msgid "Error (%s): Base %s relative, without referer URL.\n"
 msgstr "Gre¹ka (%s): Baza %s je relativna, bez referirajuæeg URL-a.\n"
 
-#: src/url.c:1384
+#: src/url.c:1385
 #, c-format
 msgid "Converting %s... "
 msgstr "Konvertiram %s... "
 
-#: src/url.c:1389 src/url.c:1457
+#: src/url.c:1390 src/url.c:1477
 #, c-format
 msgid "Cannot convert links in %s: %s\n"
 msgstr "Ne mogu konvertirati linkove u %s: %s\n"
 
-#: src/url.c:1433
+#: src/url.c:1453
 #, fuzzy, c-format
 msgid "Cannot back up %s as %s: %s\n"
 msgstr "Ne mogu konvertirati linkove u %s: %s\n"
@@ -1086,6 +1072,13 @@ msgid "Failed to unlink symlink `%s': %s\n"
 msgstr "Ne mogu izbrisati link `%s': %s\n"
 
 #~ msgid ""
+#~ "Server file no newer than local file `%s.orig' -- not retrieving.\n"
+#~ "\n"
+#~ msgstr ""
+#~ "Datoteka na poslu¾itelju nije novija od lokalne datoteke `%s.orig' -- ne "
+#~ "skidam.\n"
+
+#~ msgid ""
 #~ "Local file `%s' is more recent, not retrieving.\n"
 #~ "\n"
 #~ msgstr ""
diff --git a/po/it.gmo b/po/it.gmo
index ff73e1e..c99d5f1 100644
Binary files a/po/it.gmo and b/po/it.gmo differ
diff --git a/po/it.po b/po/it.po
index f6366b8..8351d11 100644
--- a/po/it.po
+++ b/po/it.po
@@ -5,7 +5,7 @@
 msgid ""
 msgstr ""
 "Project-Id-Version: wget 1.5.2-b1\n"
-"POT-Creation-Date: 2000-10-09 15:38-0700\n"
+"POT-Creation-Date: 2000-10-19 22:52-0700\n"
 "PO-Revision-Date: 1998-06-13 15:22+02:00\n"
 "Last-Translator: Giovanni Bortolozzo <borto@dei.unipd.it>\n"
 "Language-Team: Italian <it@li.org>\n"
@@ -15,18 +15,18 @@ msgstr ""
 
 #. Login to the server:
 #. First: Establish the control connection.
-#: src/ftp.c:147 src/http.c:347
+#: src/ftp.c:147 src/http.c:348
 #, c-format
 msgid "Connecting to %s:%hu... "
 msgstr "Mi sto connettendo a %s:%hu..."
 
-#: src/ftp.c:169 src/ftp.c:411 src/http.c:364
+#: src/ftp.c:169 src/ftp.c:411 src/http.c:365
 #, c-format
 msgid "Connection to %s:%hu refused.\n"
 msgstr "Connessione a %s:%hu rifiutata.\n"
 
 #. Second: Login with proper USER/PASS sequence.
-#: src/ftp.c:190 src/http.c:375
+#: src/ftp.c:190 src/http.c:376
 msgid "connected!\n"
 msgstr "connesso!\n"
 
@@ -84,7 +84,7 @@ msgstr ""
 "La directory `%s' non esiste.\n"
 "\n"
 
-#: src/ftp.c:331 src/ftp.c:599 src/ftp.c:647 src/url.c:1501
+#: src/ftp.c:331 src/ftp.c:599 src/ftp.c:647 src/url.c:1523
 msgid "done.\n"
 msgstr "fatto.\n"
 
@@ -182,12 +182,12 @@ msgstr "Trasferimento dati abortito.\n"
 msgid "File `%s' already there, not retrieving.\n"
 msgstr "Il file `%s' è già presente, non lo scarico.\n"
 
-#: src/ftp.c:915 src/http.c:992
+#: src/ftp.c:915 src/http.c:1016
 #, c-format
 msgid "(try:%2d)"
 msgstr "(provo:%2d)"
 
-#: src/ftp.c:979 src/http.c:1199
+#: src/ftp.c:979 src/http.c:1236
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld]\n"
@@ -211,14 +211,14 @@ msgstr "`%s' rimosso.\n"
 msgid "Recursion depth %d exceeded max. depth %d.\n"
 msgstr "La profondità di %d nella ricorsione eccede il massimo ( %d ).\n"
 
-#: src/ftp.c:1125 src/http.c:1136
+#: src/ftp.c:1125 src/http.c:1163
 #, c-format
 msgid ""
 "Server file no newer than local file `%s' -- not retrieving.\n"
 "\n"
 msgstr ""
 
-#: src/ftp.c:1131 src/http.c:1142
+#: src/ftp.c:1131 src/http.c:1171
 #, fuzzy, c-format
 msgid "The sizes do not match (local %ld) -- retrieving.\n"
 msgstr "Le dimensioni non coincidono (locale %ld), lo scarico.\n"
@@ -414,128 +414,114 @@ msgstr "Incerto   "
 msgid " (%s bytes)"
 msgstr " (%s byte)"
 
-#: src/http.c:507
+#: src/http.c:508
 msgid "Failed writing HTTP request.\n"
 msgstr "Non riesco a scrivere la richiesta HTTP.\n"
 
-#: src/http.c:511
+#: src/http.c:512
 #, c-format
 msgid "%s request sent, awaiting response... "
 msgstr "%s richiesta inviata, aspetto la risposta... "
 
-#: src/http.c:550
+#: src/http.c:551
 msgid "End of file while parsing headers.\n"
 msgstr "Raggiunta la fine del file durante l'analisi degli header.\n"
 
-#: src/http.c:561
+#: src/http.c:562
 #, c-format
 msgid "Read error (%s) in headers.\n"
 msgstr "Errore di lettura degli header (%s).\n"
 
-#: src/http.c:601
+#: src/http.c:602
 msgid "No data received"
 msgstr "Nessun dato ricevuto"
 
-#: src/http.c:603
+#: src/http.c:604
 msgid "Malformed status line"
 msgstr "Riga di stato malformata"
 
-#: src/http.c:608
+#: src/http.c:609
 msgid "(no description)"
 msgstr "(nessuna descrizione)"
 
 #. If we have tried it already, then there is not point
 #. retrying it.
-#: src/http.c:692
+#: src/http.c:693
 msgid "Authorization failed.\n"
 msgstr "Autorizzazione fallita.\n"
 
-#: src/http.c:699
+#: src/http.c:700
 msgid "Unknown authentication scheme.\n"
 msgstr "Schema di autotentificazione sconosciuto.\n"
 
-#: src/http.c:762
+#: src/http.c:783
 #, c-format
 msgid "Location: %s%s\n"
 msgstr "Location: %s%s\n"
 
-#: src/http.c:763 src/http.c:788
+#: src/http.c:784 src/http.c:809
 msgid "unspecified"
 msgstr "non specificato"
 
-#: src/http.c:764
+#: src/http.c:785
 msgid " [following]"
 msgstr " [segue]"
 
 #. No need to print this output if the body won't be
 #. downloaded at all, or if the original server response is
 #. printed.
-#: src/http.c:778
+#: src/http.c:799
 msgid "Length: "
 msgstr "Lunghezza: "
 
-#: src/http.c:783
+#: src/http.c:804
 #, c-format
 msgid " (%s to go)"
 msgstr " (%s per finire)"
 
-#: src/http.c:788
+#: src/http.c:809
 msgid "ignored"
 msgstr "ignorato"
 
-#: src/http.c:880
+#: src/http.c:903
 msgid "Warning: wildcards not supported in HTTP.\n"
 msgstr "Attenzione: le wildcard non sono supportate in HTTP.\n"
 
 #. If opt.noclobber is turned on and file already exists, do not
 #. retrieve the file
-#: src/http.c:895
+#: src/http.c:924
 #, c-format
 msgid "File `%s' already there, will not retrieve.\n"
 msgstr "Il file `%s' è già presente, non lo scarico.\n"
 
-#: src/http.c:1048
+#: src/http.c:1083
 #, c-format
 msgid "Cannot write to `%s' (%s).\n"
 msgstr "Non riesco a scrivere in `%s' (%s).\n"
 
-#: src/http.c:1058
+#: src/http.c:1094
 #, c-format
 msgid "ERROR: Redirection (%d) without location.\n"
 msgstr "ERRORE: Redirezione (%d) senza posizione.\n"
 
-#: src/http.c:1081
+#: src/http.c:1119
 #, c-format
 msgid "%s ERROR %d: %s.\n"
 msgstr "%s ERRORE %d: %s.\n"
 
-#: src/http.c:1093
+#: src/http.c:1132
 msgid "Last-modified header missing -- time-stamps turned off.\n"
 msgstr "Manca l'header last-modified -- date disattivate.\n"
 
-#: src/http.c:1101
+#: src/http.c:1140
 msgid "Last-modified header invalid -- time-stamp ignored.\n"
 msgstr "Header last-modified non valido -- data ignorata.\n"
 
-#. We can't collapse this down into just one logprintf()
-#. call with a variable set to u->local or the .orig
-#. filename because we have to malloc() space for the
-#. latter, and because there are multiple returns above (a
-#. coding style no-no by many measures, for reasons such as
-#. this) we'd have to remember to free() the string at each
-#. one to avoid a memory leak.
-#: src/http.c:1132
-#, c-format
-msgid ""
-"Server file no newer than local file `%s.orig' -- not retrieving.\n"
-"\n"
-msgstr ""
-
-#: src/http.c:1146
+#: src/http.c:1175
 msgid "Remote file is newer, retrieving.\n"
 msgstr "Il file remoto è più recente, lo scarico.\n"
 
-#: src/http.c:1180
+#: src/http.c:1210
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld/%ld]\n"
@@ -544,12 +530,12 @@ msgstr ""
 "%s (%s) - `%s' salvato [%ld/%ld]\n"
 "\n"
 
-#: src/http.c:1214
+#: src/http.c:1258
 #, c-format
 msgid "%s (%s) - Connection closed at byte %ld. "
 msgstr "%s (%s) - Connessione chiusa al byte %ld. "
 
-#: src/http.c:1222
+#: src/http.c:1266
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld/%ld])\n"
@@ -558,54 +544,54 @@ msgstr ""
 "%s (%s) - `%s' salvati [%ld/%ld])\n"
 "\n"
 
-#: src/http.c:1235
+#: src/http.c:1286
 #, c-format
 msgid "%s (%s) - Connection closed at byte %ld/%ld. "
 msgstr "%s (%s) - Connessione chiusa al byte  %ld/%ld. "
 
-#: src/http.c:1246
+#: src/http.c:1297
 #, c-format
 msgid "%s (%s) - Read error at byte %ld (%s)."
 msgstr "%s (%s) - Errore di lettura al byte %ld (%s). "
 
-#: src/http.c:1254
+#: src/http.c:1305
 #, c-format
 msgid "%s (%s) - Read error at byte %ld/%ld (%s). "
 msgstr "%s (%s) - Errore di lettura al %ld/%ld (%s). "
 
-#: src/init.c:319 src/netrc.c:260
+#: src/init.c:320 src/netrc.c:260
 #, c-format
 msgid "%s: Cannot read %s (%s).\n"
 msgstr "%s: Impossibile leggere %s (%s).\n"
 
-#: src/init.c:340 src/init.c:346
+#: src/init.c:341 src/init.c:347
 #, c-format
 msgid "%s: Error in %s at line %d.\n"
 msgstr "%s: Errore in %s alla linea %d.\n"
 
-#: src/init.c:377
+#: src/init.c:378
 #, c-format
 msgid "%s: Warning: Both system and user wgetrc point to `%s'.\n"
 msgstr ""
 "%s: Attenzione: Sia il wgetrc di sistema che quello personale puntano\n"
 "                  a `%s'.\n"
 
-#: src/init.c:465
+#: src/init.c:466
 #, c-format
 msgid "%s: BUG: unknown command `%s', value `%s'.\n"
 msgstr "%s: BUG: comando `%s' sconosciuto, valore `%s'.\n"
 
-#: src/init.c:492
+#: src/init.c:493
 #, c-format
 msgid "%s: %s: Please specify on or off.\n"
 msgstr "%s: %s: Specificare on oppure off.\n"
 
-#: src/init.c:510 src/init.c:767 src/init.c:789 src/init.c:862
+#: src/init.c:511 src/init.c:768 src/init.c:790 src/init.c:863
 #, c-format
 msgid "%s: %s: Invalid specification `%s'.\n"
 msgstr "%s: %s: Specificazione non valida `%s'\n"
 
-#: src/init.c:623 src/init.c:645 src/init.c:667 src/init.c:693
+#: src/init.c:624 src/init.c:646 src/init.c:668 src/init.c:694
 #, c-format
 msgid "%s: Invalid specification `%s'\n"
 msgstr "wget: %s: Specificazione non valida `%s'\n"
@@ -745,6 +731,8 @@ msgid ""
 "       --http-passwd=PASS    set http password to PASS.\n"
 "  -C,  --cache=on/off        (dis)allow server-cached data (normally "
 "allowed).\n"
+"  -E,  --html-extension      save all text/html documents with .html "
+"extension.\n"
 "       --ignore-length       ignore `Content-Length' header field.\n"
 "       --header=STRING       insert STRING among the headers.\n"
 "       --proxy-user=USER     set USER as proxy username.\n"
@@ -768,7 +756,7 @@ msgstr ""
 "                             Wget/VERSIONE.\n"
 "\n"
 
-#: src/main.c:172
+#: src/main.c:173
 #, fuzzy
 msgid ""
 "FTP options:\n"
@@ -784,7 +772,7 @@ msgstr ""
 "       --passive-ftp     usa il modo di trasferimento \"passivo\".\n"
 "\n"
 
-#: src/main.c:177
+#: src/main.c:178
 #, fuzzy
 msgid ""
 "Recursive retrieval:\n"
@@ -812,7 +800,7 @@ msgstr ""
 "  -nr, --dont-remove-listing   non rimuove i file `.listing'.\n"
 "\n"
 
-#: src/main.c:187
+#: src/main.c:188
 #, fuzzy
 msgid ""
 "Recursive accept/reject:\n"
@@ -854,17 +842,17 @@ msgstr ""
 "  -np, --no-parent                   non risale alla directory genitrice.\n"
 "\n"
 
-#: src/main.c:202
+#: src/main.c:203
 msgid "Mail bug reports and suggestions to <bug-wget@gnu.org>.\n"
 msgstr "Inviare segnalazioni di bug e suggerimenti a <bug-wget@gnu.org>.\n"
 
-#: src/main.c:371
+#: src/main.c:378
 #, c-format
 msgid "%s: debug support not compiled in.\n"
 msgstr ""
 "wget: %s: supporto per il debug non attivato in fase di compilazione.\n"
 
-#: src/main.c:425
+#: src/main.c:430
 msgid ""
 "Copyright (C) 1995, 1996, 1997, 1998 Free Software Foundation, Inc.\n"
 "This program is distributed in the hope that it will be useful,\n"
@@ -878,7 +866,7 @@ msgstr ""
 "COMMERCIABILITA` o di ADEGUATEZZA AD UN PARTICOLARE SCOPO. Si consulti\n"
 "la GNU General Public License per maggiori dettagli.\n"
 
-#: src/main.c:431
+#: src/main.c:436
 #, fuzzy
 msgid ""
 "\n"
@@ -887,45 +875,45 @@ msgstr ""
 "\n"
 "Scritto da Hrvoje Niksic <hniksic@srce.hr>.\n"
 
-#: src/main.c:505
+#: src/main.c:510
 #, c-format
 msgid "%s: %s: invalid command\n"
 msgstr "%s: %s: comando non valido\n"
 
-#: src/main.c:558
+#: src/main.c:563
 #, c-format
 msgid "%s: illegal option -- `-n%c'\n"
 msgstr "%s: opzione illegale -- `-n%c'\n"
 
 #. #### Something nicer should be printed here -- similar to the
 #. pre-1.5 `--help' page.
-#: src/main.c:561 src/main.c:603 src/main.c:661
+#: src/main.c:566 src/main.c:608 src/main.c:666
 #, c-format
 msgid "Try `%s --help' for more options.\n"
 msgstr "Usare `%s --help' per ulteriori opzioni.\n"
 
-#: src/main.c:641
+#: src/main.c:646
 msgid "Can't be verbose and quiet at the same time.\n"
 msgstr "Non posso essere prolisso e silenzioso allo stesso tempo.\n"
 
-#: src/main.c:647
+#: src/main.c:652
 msgid "Can't timestamp and not clobber old files at the same time.\n"
 msgstr ""
 "Non posso impostare le date e contemporaneamente non modificare\n"
 "i vecchi file.\n"
 
 #. No URL specified.
-#: src/main.c:656
+#: src/main.c:661
 #, c-format
 msgid "%s: missing URL\n"
 msgstr "%s: manca l'URL\n"
 
-#: src/main.c:744
+#: src/main.c:749
 #, c-format
 msgid "No URLs found in %s.\n"
 msgstr "Non ci sono URL in %s.\n"
 
-#: src/main.c:753
+#: src/main.c:758
 #, c-format
 msgid ""
 "\n"
@@ -936,14 +924,14 @@ msgstr ""
 "FINITO --%s--\n"
 "Scaricati: %s byte in %d file\n"
 
-#: src/main.c:758
+#: src/main.c:763
 #, c-format
 msgid "Download quota (%s bytes) EXCEEDED!\n"
 msgstr "Quota per lo scarico (%s byte) SUPERATA!\n"
 
 #. Please note that the double `%' in `%%s' is intentional, because
 #. redirect_output passes tmp through printf.
-#: src/main.c:785
+#: src/main.c:790
 msgid "%s received, redirecting output to `%%s'.\n"
 msgstr "%s ricevuti, redirigo l'output su `%%s'.\n"
 
@@ -1064,17 +1052,17 @@ msgstr "Errore (%s): Link %s fornito senza una base.\n"
 msgid "Error (%s): Base %s relative, without referer URL.\n"
 msgstr "Errore (%s): Base %s relativa, senza URL di riferimento\n"
 
-#: src/url.c:1384
+#: src/url.c:1385
 #, c-format
 msgid "Converting %s... "
 msgstr "Converto %s... "
 
-#: src/url.c:1389 src/url.c:1457
+#: src/url.c:1390 src/url.c:1477
 #, c-format
 msgid "Cannot convert links in %s: %s\n"
 msgstr "Non riesco a convertire i link in %s: %s\n"
 
-#: src/url.c:1433
+#: src/url.c:1453
 #, fuzzy, c-format
 msgid "Cannot back up %s as %s: %s\n"
 msgstr "Non riesco a convertire i link in %s: %s\n"
diff --git a/po/no.gmo b/po/no.gmo
index 94ab87e..cf8a9b2 100644
Binary files a/po/no.gmo and b/po/no.gmo differ
diff --git a/po/no.po b/po/no.po
index d764b20..20b526a 100644
--- a/po/no.po
+++ b/po/no.po
@@ -5,7 +5,7 @@
 msgid ""
 msgstr ""
 "Project-Id-Version: wget 1.5.2-b1\n"
-"POT-Creation-Date: 2000-10-09 15:38-0700\n"
+"POT-Creation-Date: 2000-10-19 22:52-0700\n"
 "PO-Revision-Date: 1998-05-22 09:00+0100\n"
 "Last-Translator: Robert Schmidt <rsc@vingmed.no>\n"
 "Language-Team: Norwegian <no@li.org>\n"
@@ -15,18 +15,18 @@ msgstr ""
 
 #. Login to the server:
 #. First: Establish the control connection.
-#: src/ftp.c:147 src/http.c:347
+#: src/ftp.c:147 src/http.c:348
 #, c-format
 msgid "Connecting to %s:%hu... "
 msgstr "Kontakter %s:%hu... "
 
-#: src/ftp.c:169 src/ftp.c:411 src/http.c:364
+#: src/ftp.c:169 src/ftp.c:411 src/http.c:365
 #, c-format
 msgid "Connection to %s:%hu refused.\n"
 msgstr "Kontakt med %s:%hu nektet.\n"
 
 #. Second: Login with proper USER/PASS sequence.
-#: src/ftp.c:190 src/http.c:375
+#: src/ftp.c:190 src/http.c:376
 msgid "connected!\n"
 msgstr "kontakt!\n"
 
@@ -83,7 +83,7 @@ msgstr ""
 "Ingen katalog ved navn «%s».\n"
 "\n"
 
-#: src/ftp.c:331 src/ftp.c:599 src/ftp.c:647 src/url.c:1501
+#: src/ftp.c:331 src/ftp.c:599 src/ftp.c:647 src/url.c:1523
 msgid "done.\n"
 msgstr "OK.\n"
 
@@ -181,12 +181,12 @@ msgstr "Dataoverf
 msgid "File `%s' already there, not retrieving.\n"
 msgstr "File «%s» eksisterer allerede, ignoreres.\n"
 
-#: src/ftp.c:915 src/http.c:992
+#: src/ftp.c:915 src/http.c:1016
 #, c-format
 msgid "(try:%2d)"
 msgstr "(forsøk:%2d)"
 
-#: src/ftp.c:979 src/http.c:1199
+#: src/ftp.c:979 src/http.c:1236
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld]\n"
@@ -210,14 +210,14 @@ msgstr "Slettet 
 msgid "Recursion depth %d exceeded max. depth %d.\n"
 msgstr "Rekursjonsdybde %d overskred maksimal dybde %d.\n"
 
-#: src/ftp.c:1125 src/http.c:1136
+#: src/ftp.c:1125 src/http.c:1163
 #, c-format
 msgid ""
 "Server file no newer than local file `%s' -- not retrieving.\n"
 "\n"
 msgstr ""
 
-#: src/ftp.c:1131 src/http.c:1142
+#: src/ftp.c:1131 src/http.c:1171
 #, fuzzy, c-format
 msgid "The sizes do not match (local %ld) -- retrieving.\n"
 msgstr "Filstørrelsene er forskjellige (local %ld), hentes.\n"
@@ -410,128 +410,114 @@ msgstr "Usikker     "
 msgid " (%s bytes)"
 msgstr " (%s bytes)"
 
-#: src/http.c:507
+#: src/http.c:508
 msgid "Failed writing HTTP request.\n"
 msgstr "Feil ved sending av HTTP-forespørsel.\n"
 
-#: src/http.c:511
+#: src/http.c:512
 #, c-format
 msgid "%s request sent, awaiting response... "
 msgstr "%s forespørsel sendt, mottar topptekster... "
 
-#: src/http.c:550
+#: src/http.c:551
 msgid "End of file while parsing headers.\n"
 msgstr "Filslutt funnet ved lesing av topptekster.\n"
 
-#: src/http.c:561
+#: src/http.c:562
 #, c-format
 msgid "Read error (%s) in headers.\n"
 msgstr "Lesefeil (%s) i topptekster.\n"
 
-#: src/http.c:601
+#: src/http.c:602
 msgid "No data received"
 msgstr "Ingen data mottatt"
 
-#: src/http.c:603
+#: src/http.c:604
 msgid "Malformed status line"
 msgstr "Feil i statuslinje"
 
-#: src/http.c:608
+#: src/http.c:609
 msgid "(no description)"
 msgstr "(ingen beskrivelse)"
 
 #. If we have tried it already, then there is not point
 #. retrying it.
-#: src/http.c:692
+#: src/http.c:693
 msgid "Authorization failed.\n"
 msgstr "Autorisasjon mislyktes\n"
 
-#: src/http.c:699
+#: src/http.c:700
 msgid "Unknown authentication scheme.\n"
 msgstr "Ukjent autorisasjons-protokoll.\n"
 
-#: src/http.c:762
+#: src/http.c:783
 #, c-format
 msgid "Location: %s%s\n"
 msgstr "Sted: %s%s\n"
 
-#: src/http.c:763 src/http.c:788
+#: src/http.c:784 src/http.c:809
 msgid "unspecified"
 msgstr "uspesifisert"
 
-#: src/http.c:764
+#: src/http.c:785
 msgid " [following]"
 msgstr " [omdirigert]"
 
 #. No need to print this output if the body won't be
 #. downloaded at all, or if the original server response is
 #. printed.
-#: src/http.c:778
+#: src/http.c:799
 msgid "Length: "
 msgstr "Lengde: "
 
-#: src/http.c:783
+#: src/http.c:804
 #, c-format
 msgid " (%s to go)"
 msgstr " (%s igjen)"
 
-#: src/http.c:788
+#: src/http.c:809
 msgid "ignored"
 msgstr "ignoreres"
 
-#: src/http.c:880
+#: src/http.c:903
 msgid "Warning: wildcards not supported in HTTP.\n"
 msgstr "Advarsel: jokertegn ikke støttet i HTTP.\n"
 
 #. If opt.noclobber is turned on and file already exists, do not
 #. retrieve the file
-#: src/http.c:895
+#: src/http.c:924
 #, c-format
 msgid "File `%s' already there, will not retrieve.\n"
 msgstr "Filen «%s» hentes ikke, fordi den allerede eksisterer.\n"
 
-#: src/http.c:1048
+#: src/http.c:1083
 #, c-format
 msgid "Cannot write to `%s' (%s).\n"
 msgstr "Kan ikke skrive til «%s» (%s).\n"
 
-#: src/http.c:1058
+#: src/http.c:1094
 #, c-format
 msgid "ERROR: Redirection (%d) without location.\n"
 msgstr "FEIL: Omdirigering (%d) uten nytt sted.\n"
 
-#: src/http.c:1081
+#: src/http.c:1119
 #, c-format
 msgid "%s ERROR %d: %s.\n"
 msgstr "%s FEIL %d: %s.\n"
 
-#: src/http.c:1093
+#: src/http.c:1132
 msgid "Last-modified header missing -- time-stamps turned off.\n"
 msgstr "Last-modified topptekst mangler -- tidsstempling slås av.\n"
 
-#: src/http.c:1101
+#: src/http.c:1140
 msgid "Last-modified header invalid -- time-stamp ignored.\n"
 msgstr "Last-modified topptekst ugyldig -- tidsstempel ignoreres.\n"
 
-#. We can't collapse this down into just one logprintf()
-#. call with a variable set to u->local or the .orig
-#. filename because we have to malloc() space for the
-#. latter, and because there are multiple returns above (a
-#. coding style no-no by many measures, for reasons such as
-#. this) we'd have to remember to free() the string at each
-#. one to avoid a memory leak.
-#: src/http.c:1132
-#, c-format
-msgid ""
-"Server file no newer than local file `%s.orig' -- not retrieving.\n"
-"\n"
-msgstr ""
-
-#: src/http.c:1146
+#: src/http.c:1175
 msgid "Remote file is newer, retrieving.\n"
 msgstr "Fil på tjener er nyere - hentes.\n"
 
-#: src/http.c:1180
+#: src/http.c:1210
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld/%ld]\n"
@@ -540,12 +526,12 @@ msgstr ""
 "%s (%s) - «%s» lagret [%ld/%ld]\n"
 "\n"
 
-#: src/http.c:1214
+#: src/http.c:1258
 #, c-format
 msgid "%s (%s) - Connection closed at byte %ld. "
 msgstr "%s (%s) - Forbindelse brutt ved byte %ld. "
 
-#: src/http.c:1222
+#: src/http.c:1266
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld/%ld])\n"
@@ -554,52 +540,52 @@ msgstr ""
 "%s (%s) - «%s» lagret [%ld/%ld]\n"
 "\n"
 
-#: src/http.c:1235
+#: src/http.c:1286
 #, c-format
 msgid "%s (%s) - Connection closed at byte %ld/%ld. "
 msgstr "%s (%s) - Forbindelse brutt ved byte %ld/%ld. "
 
-#: src/http.c:1246
+#: src/http.c:1297
 #, c-format
 msgid "%s (%s) - Read error at byte %ld (%s)."
 msgstr "%s (%s) - Lesefeil ved byte %ld (%s)."
 
-#: src/http.c:1254
+#: src/http.c:1305
 #, c-format
 msgid "%s (%s) - Read error at byte %ld/%ld (%s). "
 msgstr "%s (%s) - Lesefeil ved byte %ld/%ld (%s)."
 
-#: src/init.c:319 src/netrc.c:260
+#: src/init.c:320 src/netrc.c:260
 #, c-format
 msgid "%s: Cannot read %s (%s).\n"
 msgstr "%s: Kan ikke lese %s (%s).\n"
 
-#: src/init.c:340 src/init.c:346
+#: src/init.c:341 src/init.c:347
 #, c-format
 msgid "%s: Error in %s at line %d.\n"
 msgstr "%s: Feil i %s på linje %d.\n"
 
-#: src/init.c:377
+#: src/init.c:378
 #, c-format
 msgid "%s: Warning: Both system and user wgetrc point to `%s'.\n"
 msgstr "%s: Advarsel: Både systemets og brukerens wgetrc peker til «%s».\n"
 
-#: src/init.c:465
+#: src/init.c:466
 #, c-format
 msgid "%s: BUG: unknown command `%s', value `%s'.\n"
 msgstr "%s: Ukjent kommando «%s», verdi «%s».\n"
 
-#: src/init.c:492
+#: src/init.c:493
 #, c-format
 msgid "%s: %s: Please specify on or off.\n"
 msgstr "%s: %s: Vennligst spesifiser «on» eller «off».\n"
 
-#: src/init.c:510 src/init.c:767 src/init.c:789 src/init.c:862
+#: src/init.c:511 src/init.c:768 src/init.c:790 src/init.c:863
 #, c-format
 msgid "%s: %s: Invalid specification `%s'.\n"
 msgstr "%s: %s: Ugyldig spesifikasjon «%s»\n"
 
-#: src/init.c:623 src/init.c:645 src/init.c:667 src/init.c:693
+#: src/init.c:624 src/init.c:646 src/init.c:668 src/init.c:694
 #, c-format
 msgid "%s: Invalid specification `%s'\n"
 msgstr "%s: Ugyldig spesifikasjon «%s»\n"
@@ -736,6 +722,8 @@ msgid ""
 "       --http-passwd=PASS    set http password to PASS.\n"
 "  -C,  --cache=on/off        (dis)allow server-cached data (normally "
 "allowed).\n"
+"  -E,  --html-extension      save all text/html documents with .html "
+"extension.\n"
 "       --ignore-length       ignore `Content-Length' header field.\n"
 "       --header=STRING       insert STRING among the headers.\n"
 "       --proxy-user=USER     set USER as proxy username.\n"
@@ -758,7 +746,7 @@ msgstr ""
 "                               «Wget/VERSJON».\n"
 "\n"
 
-#: src/main.c:172
+#: src/main.c:173
 #, fuzzy
 msgid ""
 "FTP options:\n"
@@ -774,7 +762,7 @@ msgstr ""
 "       --passive-ftp     bruk passiv overføringsmodus.\n"
 "\n"
 
-#: src/main.c:177
+#: src/main.c:178
 #, fuzzy
 msgid ""
 "Recursive retrieval:\n"
@@ -802,7 +790,7 @@ msgstr ""
 "  -nr, --dont-remove-listing   ikke slett «.listing»-filer.\n"
 "\n"
 
-#: src/main.c:187
+#: src/main.c:188
 #, fuzzy
 msgid ""
 "Recursive accept/reject:\n"
@@ -842,16 +830,16 @@ msgstr ""
 "katalog.\n"
 "\n"
 
-#: src/main.c:202
+#: src/main.c:203
 msgid "Mail bug reports and suggestions to <bug-wget@gnu.org>.\n"
 msgstr "Rapportér feil og send forslag til <bug-wget@gnu.org>.\n"
 
-#: src/main.c:371
+#: src/main.c:378
 #, c-format
 msgid "%s: debug support not compiled in.\n"
 msgstr "%s: støtte for avlusing ikke inkludert ved kompilering.\n"
 
-#: src/main.c:425
+#: src/main.c:430
 msgid ""
 "Copyright (C) 1995, 1996, 1997, 1998 Free Software Foundation, Inc.\n"
 "This program is distributed in the hope that it will be useful,\n"
@@ -865,7 +853,7 @@ msgstr ""
 "EGNETHET TIL NOEN SPESIELL OPPGAVE.\n"
 "Se «GNU General Public License» for detaljer.\n"
 
-#: src/main.c:431
+#: src/main.c:436
 #, fuzzy
 msgid ""
 "\n"
@@ -874,44 +862,44 @@ msgstr ""
 "\n"
 "Skrevet av Hrvoje Niksic <hniksic@srce.hr>.\n"
 
-#: src/main.c:505
+#: src/main.c:510
 #, c-format
 msgid "%s: %s: invalid command\n"
 msgstr "%s: %s: ugyldig kommando\n"
 
-#: src/main.c:558
+#: src/main.c:563
 #, c-format
 msgid "%s: illegal option -- `-n%c'\n"
 msgstr "%s: ugyldig flagg -- «-n%c»\n"
 
 #. #### Something nicer should be printed here -- similar to the
 #. pre-1.5 `--help' page.
-#: src/main.c:561 src/main.c:603 src/main.c:661
+#: src/main.c:566 src/main.c:608 src/main.c:666
 #, c-format
 msgid "Try `%s --help' for more options.\n"
 msgstr "Prøv «%s --help» for flere flagg.\n"
 
-#: src/main.c:641
+#: src/main.c:646
 msgid "Can't be verbose and quiet at the same time.\n"
 msgstr "Kan ikke være utførlig og stille på samme tid.\n"
 
-#: src/main.c:647
+#: src/main.c:652
 msgid "Can't timestamp and not clobber old files at the same time.\n"
 msgstr ""
 "Kan ikke tidsstemple og la være å berøre eksisterende filer på samme tid.\n"
 
 #. No URL specified.
-#: src/main.c:656
+#: src/main.c:661
 #, c-format
 msgid "%s: missing URL\n"
 msgstr "%s: URL mangler.\n"
 
-#: src/main.c:744
+#: src/main.c:749
 #, c-format
 msgid "No URLs found in %s.\n"
 msgstr "Fant ingen URLer i %s.\n"
 
-#: src/main.c:753
+#: src/main.c:758
 #, c-format
 msgid ""
 "\n"
@@ -922,14 +910,14 @@ msgstr ""
 "FERDIG --%s--\n"
 "Lastet ned %s bytes i %d filer\n"
 
-#: src/main.c:758
+#: src/main.c:763
 #, c-format
 msgid "Download quota (%s bytes) EXCEEDED!\n"
 msgstr "Nedlastingskvote (%s bytes) overskredet!\n"
 
 #. Please note that the double `%' in `%%s' is intentional, because
 #. redirect_output passes tmp through printf.
-#: src/main.c:785
+#: src/main.c:790
 msgid "%s received, redirecting output to `%%s'.\n"
 msgstr "%s mottatt, omdirigerer utskrifter til «%%s».\n"
 
@@ -1050,17 +1038,17 @@ msgstr "Feil (%s): Link %s gitt uten utgangspunkt.\n"
 msgid "Error (%s): Base %s relative, without referer URL.\n"
 msgstr "Feil (%s): Utgangspunktet %s er relativt, ukjent URL som referent.\n"
 
-#: src/url.c:1384
+#: src/url.c:1385
 #, c-format
 msgid "Converting %s... "
 msgstr "Konverterer %s... "
 
-#: src/url.c:1389 src/url.c:1457
+#: src/url.c:1390 src/url.c:1477
 #, c-format
 msgid "Cannot convert links in %s: %s\n"
 msgstr "Kan ikke konvertere linker i %s: %s\n"
 
-#: src/url.c:1433
+#: src/url.c:1453
 #, fuzzy, c-format
 msgid "Cannot back up %s as %s: %s\n"
 msgstr "Kan ikke konvertere linker i %s: %s\n"
diff --git a/po/pt_BR.gmo b/po/pt_BR.gmo
index 22f85b5..660b015 100644
Binary files a/po/pt_BR.gmo and b/po/pt_BR.gmo differ
diff --git a/po/pt_BR.po b/po/pt_BR.po
index 59a90f6..18b64ed 100644
--- a/po/pt_BR.po
+++ b/po/pt_BR.po
@@ -5,7 +5,7 @@
 msgid ""
 msgstr ""
 "Project-Id-Version: wget 1.5-b9\n"
-"POT-Creation-Date: 2000-10-09 15:38-0700\n"
+"POT-Creation-Date: 2000-10-19 22:52-0700\n"
 "PO-Revision-Date: 1998-04-06 22:09-0300\n"
 "Last-Translator: Wanderlei Antonio Cavasin <cavassin@conectiva.com.br>\n"
 "Language-Team: Portuguese <pt@li.org>\n"
@@ -16,19 +16,19 @@ msgstr ""
 # , c-format
 #. Login to the server:
 #. First: Establish the control connection.
-#: src/ftp.c:147 src/http.c:347
+#: src/ftp.c:147 src/http.c:348
 #, c-format
 msgid "Connecting to %s:%hu... "
 msgstr "Conectando-se a %s:%hu... "
 
 # , c-format
-#: src/ftp.c:169 src/ftp.c:411 src/http.c:364
+#: src/ftp.c:169 src/ftp.c:411 src/http.c:365
 #, c-format
 msgid "Connection to %s:%hu refused.\n"
 msgstr "Conexão para %s:%hu recusada.\n"
 
 #. Second: Login with proper USER/PASS sequence.
-#: src/ftp.c:190 src/http.c:375
+#: src/ftp.c:190 src/http.c:376
 msgid "connected!\n"
 msgstr "conectado!\n"
 
@@ -88,7 +88,7 @@ msgstr ""
 "Diretório `%s' não encontrado.\n"
 "\n"
 
-#: src/ftp.c:331 src/ftp.c:599 src/ftp.c:647 src/url.c:1501
+#: src/ftp.c:331 src/ftp.c:599 src/ftp.c:647 src/url.c:1523
 msgid "done.\n"
 msgstr "feito.\n"
 
@@ -196,13 +196,13 @@ msgid "File `%s' already there, not retrieving.\n"
 msgstr "Arquivo `%s' já existente, não será baixado.\n"
 
 # , c-format
-#: src/ftp.c:915 src/http.c:992
+#: src/ftp.c:915 src/http.c:1016
 #, c-format
 msgid "(try:%2d)"
 msgstr "(tentativa:%2d)"
 
 # , c-format
-#: src/ftp.c:979 src/http.c:1199
+#: src/ftp.c:979 src/http.c:1236
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld]\n"
@@ -229,7 +229,7 @@ msgstr "Removido `%s'.\n"
 msgid "Recursion depth %d exceeded max. depth %d.\n"
 msgstr "Nível de recursão %d excede nível máximo %d.\n"
 
-#: src/ftp.c:1125 src/http.c:1136
+#: src/ftp.c:1125 src/http.c:1163
 #, c-format
 msgid ""
 "Server file no newer than local file `%s' -- not retrieving.\n"
@@ -237,7 +237,7 @@ msgid ""
 msgstr ""
 
 # , c-format
-#: src/ftp.c:1131 src/http.c:1142
+#: src/ftp.c:1131 src/http.c:1171
 #, fuzzy, c-format
 msgid "The sizes do not match (local %ld) -- retrieving.\n"
 msgstr "Os tamanhos não são iguais (local %ld), baixando.\n"
@@ -453,137 +453,123 @@ msgstr "Sem certeza "
 msgid " (%s bytes)"
 msgstr " (%s bytes)"
 
-#: src/http.c:507
+#: src/http.c:508
 msgid "Failed writing HTTP request.\n"
 msgstr "Falha na requisição HTTP.\n"
 
 # , c-format
-#: src/http.c:511
+#: src/http.c:512
 #, fuzzy, c-format
 msgid "%s request sent, awaiting response... "
 msgstr "%s requisição enviada, buscando headers... "
 
-#: src/http.c:550
+#: src/http.c:551
 msgid "End of file while parsing headers.\n"
 msgstr "Fim de arquivo durante a leitura dos headers.\n"
 
 # , c-format
-#: src/http.c:561
+#: src/http.c:562
 #, c-format
 msgid "Read error (%s) in headers.\n"
 msgstr "Erro de leitura (%s) nos headers.\n"
 
-#: src/http.c:601
+#: src/http.c:602
 msgid "No data received"
 msgstr ""
 
-#: src/http.c:603
+#: src/http.c:604
 msgid "Malformed status line"
 msgstr ""
 
-#: src/http.c:608
+#: src/http.c:609
 msgid "(no description)"
 msgstr "(sem descrição)"
 
 #. If we have tried it already, then there is not point
 #. retrying it.
-#: src/http.c:692
+#: src/http.c:693
 msgid "Authorization failed.\n"
 msgstr ""
 
-#: src/http.c:699
+#: src/http.c:700
 msgid "Unknown authentication scheme.\n"
 msgstr ""
 
 # , c-format
-#: src/http.c:762
+#: src/http.c:783
 #, c-format
 msgid "Location: %s%s\n"
 msgstr "Localização: %s%s\n"
 
-#: src/http.c:763 src/http.c:788
+#: src/http.c:784 src/http.c:809
 msgid "unspecified"
 msgstr "nao especificado"
 
-#: src/http.c:764
+#: src/http.c:785
 msgid " [following]"
 msgstr " [seguinte]"
 
 #. No need to print this output if the body won't be
 #. downloaded at all, or if the original server response is
 #. printed.
-#: src/http.c:778
+#: src/http.c:799
 msgid "Length: "
 msgstr "Tamanho: "
 
 # , c-format
-#: src/http.c:783
+#: src/http.c:804
 #, c-format
 msgid " (%s to go)"
 msgstr " (%s para o fim)"
 
-#: src/http.c:788
+#: src/http.c:809
 msgid "ignored"
 msgstr "ignorado"
 
-#: src/http.c:880
+#: src/http.c:903
 msgid "Warning: wildcards not supported in HTTP.\n"
 msgstr "Aviso: wildcards não suportados para HTTP.\n"
 
 # , c-format
 #. If opt.noclobber is turned on and file already exists, do not
 #. retrieve the file
-#: src/http.c:895
+#: src/http.c:924
 #, c-format
 msgid "File `%s' already there, will not retrieve.\n"
 msgstr "Arquivo `%s' já presente, não será baixado.\n"
 
 # , c-format
-#: src/http.c:1048
+#: src/http.c:1083
 #, c-format
 msgid "Cannot write to `%s' (%s).\n"
 msgstr "Não foi possível escrever em `%s' (%s).\n"
 
 # , c-format
-#: src/http.c:1058
+#: src/http.c:1094
 #, c-format
 msgid "ERROR: Redirection (%d) without location.\n"
 msgstr "ERRO: Redireção (%d) sem Location.\n"
 
 # , c-format
-#: src/http.c:1081
+#: src/http.c:1119
 #, c-format
 msgid "%s ERROR %d: %s.\n"
 msgstr "%s ERRO %d: %s.\n"
 
-#: src/http.c:1093
+#: src/http.c:1132
 msgid "Last-modified header missing -- time-stamps turned off.\n"
 msgstr "Header Last-modified não recebido -- time-stamps desligados.\n"
 
-#: src/http.c:1101
+#: src/http.c:1140
 msgid "Last-modified header invalid -- time-stamp ignored.\n"
 msgstr "Header Last-modified inválido -- time-stamp ignorado.\n"
 
-#. We can't collapse this down into just one logprintf()
-#. call with a variable set to u->local or the .orig
-#. filename because we have to malloc() space for the
-#. latter, and because there are multiple returns above (a
-#. coding style no-no by many measures, for reasons such as
-#. this) we'd have to remember to free() the string at each
-#. one to avoid a memory leak.
-#: src/http.c:1132
-#, c-format
-msgid ""
-"Server file no newer than local file `%s.orig' -- not retrieving.\n"
-"\n"
-msgstr ""
-
-#: src/http.c:1146
+#: src/http.c:1175
 msgid "Remote file is newer, retrieving.\n"
 msgstr "Arquivo remoto é mais novo, buscando.\n"
 
 # , c-format
-#: src/http.c:1180
+#: src/http.c:1210
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld/%ld]\n"
@@ -593,13 +579,13 @@ msgstr ""
 "\n"
 
 # , c-format
-#: src/http.c:1214
+#: src/http.c:1258
 #, c-format
 msgid "%s (%s) - Connection closed at byte %ld. "
 msgstr "%s (%s) - Conexão fechada no byte %ld. "
 
 # , c-format
-#: src/http.c:1222
+#: src/http.c:1266
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld/%ld])\n"
@@ -609,62 +595,62 @@ msgstr ""
 "\n"
 
 # , c-format
-#: src/http.c:1235
+#: src/http.c:1286
 #, c-format
 msgid "%s (%s) - Connection closed at byte %ld/%ld. "
 msgstr "%s (%s) - Conexão fechada no byte %ld/%ld. "
 
 # , c-format
-#: src/http.c:1246
+#: src/http.c:1297
 #, c-format
 msgid "%s (%s) - Read error at byte %ld (%s)."
 msgstr "%s (%s) - Erro de leitura no byte %ld (%s)."
 
 # , c-format
-#: src/http.c:1254
+#: src/http.c:1305
 #, c-format
 msgid "%s (%s) - Read error at byte %ld/%ld (%s). "
 msgstr "%s (%s) - Erro de leitura no byte %ld/%ld (%s)."
 
 # , c-format
-#: src/init.c:319 src/netrc.c:260
+#: src/init.c:320 src/netrc.c:260
 #, c-format
 msgid "%s: Cannot read %s (%s).\n"
 msgstr "%s: Não foi possível ler %s (%s).\n"
 
 # , c-format
-#: src/init.c:340 src/init.c:346
+#: src/init.c:341 src/init.c:347
 #, c-format
 msgid "%s: Error in %s at line %d.\n"
 msgstr "%s: Erro em %s na linha %d.\n"
 
 # , c-format
-#: src/init.c:377
+#: src/init.c:378
 #, c-format
 msgid "%s: Warning: Both system and user wgetrc point to `%s'.\n"
 msgstr ""
 "%s: Aviso: os arquivos wgetrc do sistema e do usuário apontam para `%s'.\n"
 
 # , c-format
-#: src/init.c:465
+#: src/init.c:466
 #, fuzzy, c-format
 msgid "%s: BUG: unknown command `%s', value `%s'.\n"
 msgstr "%s: Comando desconhecido `%s', valor `%s'.\n"
 
 # , c-format
-#: src/init.c:492
+#: src/init.c:493
 #, c-format
 msgid "%s: %s: Please specify on or off.\n"
 msgstr "%s: %s: Por favor especifique on ou off.\n"
 
 # , c-format
-#: src/init.c:510 src/init.c:767 src/init.c:789 src/init.c:862
+#: src/init.c:511 src/init.c:768 src/init.c:790 src/init.c:863
 #, c-format
 msgid "%s: %s: Invalid specification `%s'.\n"
 msgstr "%s: %s: Especificação inválida `%s'\n"
 
 # , c-format
-#: src/init.c:623 src/init.c:645 src/init.c:667 src/init.c:693
+#: src/init.c:624 src/init.c:646 src/init.c:668 src/init.c:694
 #, c-format
 msgid "%s: Invalid specification `%s'\n"
 msgstr "%s: Especificação inválida `%s'\n"
@@ -805,6 +791,8 @@ msgid ""
 "       --http-passwd=PASS    set http password to PASS.\n"
 "  -C,  --cache=on/off        (dis)allow server-cached data (normally "
 "allowed).\n"
+"  -E,  --html-extension      save all text/html documents with .html "
+"extension.\n"
 "       --ignore-length       ignore `Content-Length' header field.\n"
 "       --header=STRING       insert STRING among the headers.\n"
 "       --proxy-user=USER     set USER as proxy username.\n"
@@ -827,7 +815,7 @@ msgstr ""
 "\n"
 
 # , fuzzy
-#: src/main.c:172
+#: src/main.c:173
 #, fuzzy
 msgid ""
 "FTP options:\n"
@@ -845,7 +833,7 @@ msgstr ""
 "       --passive-ftp     usa modo de transferência \"passivo\".\n"
 "\n"
 
-#: src/main.c:177
+#: src/main.c:178
 #, fuzzy
 msgid ""
 "Recursive retrieval:\n"
@@ -872,7 +860,7 @@ msgstr ""
 "\n"
 
 # , fuzzy
-#: src/main.c:187
+#: src/main.c:188
 #, fuzzy
 msgid ""
 "Recursive accept/reject:\n"
@@ -912,17 +900,17 @@ msgstr ""
 "\n"
 
 # , fuzzy
-#: src/main.c:202
+#: src/main.c:203
 msgid "Mail bug reports and suggestions to <bug-wget@gnu.org>.\n"
 msgstr "Relatos de bugs e sugestões para <bug-wget@prep.ai.mit.edu>.\n"
 
 # , fuzzy
-#: src/main.c:371
+#: src/main.c:378
 #, c-format
 msgid "%s: debug support not compiled in.\n"
 msgstr "%s: compilado sem debug.\n"
 
-#: src/main.c:425
+#: src/main.c:430
 msgid ""
 "Copyright (C) 1995, 1996, 1997, 1998 Free Software Foundation, Inc.\n"
 "This program is distributed in the hope that it will be useful,\n"
@@ -936,7 +924,7 @@ msgstr ""
 "COMERCIABILIDADE ou de UTILIDADE PARA UM PROPÓSITO PARTICULAR.\n"
 "Veja a Licença Pública Geral GNU (GNU GPL) para mais detalhes.\n"
 
-#: src/main.c:431
+#: src/main.c:436
 #, fuzzy
 msgid ""
 "\n"
@@ -946,13 +934,13 @@ msgstr ""
 "Escrito por Hrvoje Niksic <hniksic@srce.hr>.\n"
 
 # , c-format
-#: src/main.c:505
+#: src/main.c:510
 #, c-format
 msgid "%s: %s: invalid command\n"
 msgstr "%s: %s: comando inválido\n"
 
 # , c-format
-#: src/main.c:558
+#: src/main.c:563
 #, c-format
 msgid "%s: illegal option -- `-n%c'\n"
 msgstr "%s: opção ilegal -- `-n%c'\n"
@@ -960,35 +948,35 @@ msgstr "%s: op
 # , c-format
 #. #### Something nicer should be printed here -- similar to the
 #. pre-1.5 `--help' page.
-#: src/main.c:561 src/main.c:603 src/main.c:661
+#: src/main.c:566 src/main.c:608 src/main.c:666
 #, c-format
 msgid "Try `%s --help' for more options.\n"
 msgstr "Tente `%s --help' para mais opções.\n"
 
-#: src/main.c:641
+#: src/main.c:646
 msgid "Can't be verbose and quiet at the same time.\n"
 msgstr "Não pode ser verboso e quieto ao mesmo tempo.\n"
 
-#: src/main.c:647
+#: src/main.c:652
 msgid "Can't timestamp and not clobber old files at the same time.\n"
 msgstr ""
 "Não é possível usar as opções \"timestamp\" e \"no clobber\" ao mesmo "
 "tempo.\n"
 
 #. No URL specified.
-#: src/main.c:656
+#: src/main.c:661
 #, c-format
 msgid "%s: missing URL\n"
 msgstr "%s: URL faltando\n"
 
 # , c-format
-#: src/main.c:744
+#: src/main.c:749
 #, c-format
 msgid "No URLs found in %s.\n"
 msgstr "Nenhuma URL encontrada em %s.\n"
 
 # , c-format
-#: src/main.c:753
+#: src/main.c:758
 #, c-format
 msgid ""
 "\n"
@@ -1000,14 +988,14 @@ msgstr ""
 "Baixados: %s bytes em %d arquivos\n"
 
 # , c-format
-#: src/main.c:758
+#: src/main.c:763
 #, c-format
 msgid "Download quota (%s bytes) EXCEEDED!\n"
 msgstr "EXCEDIDA a quota (%s bytes) de recepção!\n"
 
 #. Please note that the double `%' in `%%s' is intentional, because
 #. redirect_output passes tmp through printf.
-#: src/main.c:785
+#: src/main.c:790
 msgid "%s received, redirecting output to `%%s'.\n"
 msgstr "%s recebido, redirecionando saída para `%%s'.\n"
 
@@ -1143,19 +1131,19 @@ msgid "Error (%s): Base %s relative, without referer URL.\n"
 msgstr "Erro (%s): Base %s relativa, sem URL referenciadora.\n"
 
 # , c-format
-#: src/url.c:1384
+#: src/url.c:1385
 #, c-format
 msgid "Converting %s... "
 msgstr "Convertendo %s... "
 
 # , c-format
-#: src/url.c:1389 src/url.c:1457
+#: src/url.c:1390 src/url.c:1477
 #, c-format
 msgid "Cannot convert links in %s: %s\n"
 msgstr "Não foi possível converter links em %s: %s\n"
 
 # , c-format
-#: src/url.c:1433
+#: src/url.c:1453
 #, fuzzy, c-format
 msgid "Cannot back up %s as %s: %s\n"
 msgstr "Não foi possível converter links em %s: %s\n"
diff --git a/po/wget.pot b/po/wget.pot
index 7bcea84..64061c7 100644
--- a/po/wget.pot
+++ b/po/wget.pot
@@ -6,7 +6,7 @@
 msgid ""
 msgstr ""
 "Project-Id-Version: PACKAGE VERSION\n"
-"POT-Creation-Date: 2000-10-09 15:38-0700\n"
+"POT-Creation-Date: 2000-10-19 22:52-0700\n"
 "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
 "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
 "Language-Team: LANGUAGE <LL@li.org>\n"
@@ -16,18 +16,18 @@ msgstr ""
 
 #. Login to the server:
 #. First: Establish the control connection.
-#: src/ftp.c:147 src/http.c:347
+#: src/ftp.c:147 src/http.c:348
 #, c-format
 msgid "Connecting to %s:%hu... "
 msgstr ""
 
-#: src/ftp.c:169 src/ftp.c:411 src/http.c:364
+#: src/ftp.c:169 src/ftp.c:411 src/http.c:365
 #, c-format
 msgid "Connection to %s:%hu refused.\n"
 msgstr ""
 
 #. Second: Login with proper USER/PASS sequence.
-#: src/ftp.c:190 src/http.c:375
+#: src/ftp.c:190 src/http.c:376
 msgid "connected!\n"
 msgstr ""
 
@@ -82,7 +82,7 @@ msgid ""
 "\n"
 msgstr ""
 
-#: src/ftp.c:331 src/ftp.c:599 src/ftp.c:647 src/url.c:1501
+#: src/ftp.c:331 src/ftp.c:599 src/ftp.c:647 src/url.c:1523
 msgid "done.\n"
 msgstr ""
 
@@ -174,12 +174,12 @@ msgstr ""
 msgid "File `%s' already there, not retrieving.\n"
 msgstr ""
 
-#: src/ftp.c:915 src/http.c:992
+#: src/ftp.c:915 src/http.c:1016
 #, c-format
 msgid "(try:%2d)"
 msgstr ""
 
-#: src/ftp.c:979 src/http.c:1199
+#: src/ftp.c:979 src/http.c:1236
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld]\n"
@@ -201,14 +201,14 @@ msgstr ""
 msgid "Recursion depth %d exceeded max. depth %d.\n"
 msgstr ""
 
-#: src/ftp.c:1125 src/http.c:1136
+#: src/ftp.c:1125 src/http.c:1163
 #, c-format
 msgid ""
 "Server file no newer than local file `%s' -- not retrieving.\n"
 "\n"
 msgstr ""
 
-#: src/ftp.c:1131 src/http.c:1142
+#: src/ftp.c:1131 src/http.c:1171
 #, c-format
 msgid "The sizes do not match (local %ld) -- retrieving.\n"
 msgstr ""
@@ -398,192 +398,178 @@ msgstr ""
 msgid " (%s bytes)"
 msgstr ""
 
-#: src/http.c:507
+#: src/http.c:508
 msgid "Failed writing HTTP request.\n"
 msgstr ""
 
-#: src/http.c:511
+#: src/http.c:512
 #, c-format
 msgid "%s request sent, awaiting response... "
 msgstr ""
 
-#: src/http.c:550
+#: src/http.c:551
 msgid "End of file while parsing headers.\n"
 msgstr ""
 
-#: src/http.c:561
+#: src/http.c:562
 #, c-format
 msgid "Read error (%s) in headers.\n"
 msgstr ""
 
-#: src/http.c:601
+#: src/http.c:602
 msgid "No data received"
 msgstr ""
 
-#: src/http.c:603
+#: src/http.c:604
 msgid "Malformed status line"
 msgstr ""
 
-#: src/http.c:608
+#: src/http.c:609
 msgid "(no description)"
 msgstr ""
 
 #. If we have tried it already, then there is not point
 #. retrying it.
-#: src/http.c:692
+#: src/http.c:693
 msgid "Authorization failed.\n"
 msgstr ""
 
-#: src/http.c:699
+#: src/http.c:700
 msgid "Unknown authentication scheme.\n"
 msgstr ""
 
-#: src/http.c:762
+#: src/http.c:783
 #, c-format
 msgid "Location: %s%s\n"
 msgstr ""
 
-#: src/http.c:763 src/http.c:788
+#: src/http.c:784 src/http.c:809
 msgid "unspecified"
 msgstr ""
 
-#: src/http.c:764
+#: src/http.c:785
 msgid " [following]"
 msgstr ""
 
 #. No need to print this output if the body won't be
 #. downloaded at all, or if the original server response is
 #. printed.
-#: src/http.c:778
+#: src/http.c:799
 msgid "Length: "
 msgstr ""
 
-#: src/http.c:783
+#: src/http.c:804
 #, c-format
 msgid " (%s to go)"
 msgstr ""
 
-#: src/http.c:788
+#: src/http.c:809
 msgid "ignored"
 msgstr ""
 
-#: src/http.c:880
+#: src/http.c:903
 msgid "Warning: wildcards not supported in HTTP.\n"
 msgstr ""
 
 #. If opt.noclobber is turned on and file already exists, do not
 #. retrieve the file
-#: src/http.c:895
+#: src/http.c:924
 #, c-format
 msgid "File `%s' already there, will not retrieve.\n"
 msgstr ""
 
-#: src/http.c:1048
+#: src/http.c:1083
 #, c-format
 msgid "Cannot write to `%s' (%s).\n"
 msgstr ""
 
-#: src/http.c:1058
+#: src/http.c:1094
 #, c-format
 msgid "ERROR: Redirection (%d) without location.\n"
 msgstr ""
 
-#: src/http.c:1081
+#: src/http.c:1119
 #, c-format
 msgid "%s ERROR %d: %s.\n"
 msgstr ""
 
-#: src/http.c:1093
+#: src/http.c:1132
 msgid "Last-modified header missing -- time-stamps turned off.\n"
 msgstr ""
 
-#: src/http.c:1101
+#: src/http.c:1140
 msgid "Last-modified header invalid -- time-stamp ignored.\n"
 msgstr ""
 
-#. We can't collapse this down into just one logprintf()
-#. call with a variable set to u->local or the .orig
-#. filename because we have to malloc() space for the
-#. latter, and because there are multiple returns above (a
-#. coding style no-no by many measures, for reasons such as
-#. this) we'd have to remember to free() the string at each
-#. one to avoid a memory leak.
-#: src/http.c:1132
-#, c-format
-msgid ""
-"Server file no newer than local file `%s.orig' -- not retrieving.\n"
-"\n"
-msgstr ""
-
-#: src/http.c:1146
+#: src/http.c:1175
 msgid "Remote file is newer, retrieving.\n"
 msgstr ""
 
-#: src/http.c:1180
+#: src/http.c:1210
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld/%ld]\n"
 "\n"
 msgstr ""
 
-#: src/http.c:1214
+#: src/http.c:1258
 #, c-format
 msgid "%s (%s) - Connection closed at byte %ld. "
 msgstr ""
 
-#: src/http.c:1222
+#: src/http.c:1266
 #, c-format
 msgid ""
 "%s (%s) - `%s' saved [%ld/%ld])\n"
 "\n"
 msgstr ""
 
-#: src/http.c:1235
+#: src/http.c:1286
 #, c-format
 msgid "%s (%s) - Connection closed at byte %ld/%ld. "
 msgstr ""
 
-#: src/http.c:1246
+#: src/http.c:1297
 #, c-format
 msgid "%s (%s) - Read error at byte %ld (%s)."
 msgstr ""
 
-#: src/http.c:1254
+#: src/http.c:1305
 #, c-format
 msgid "%s (%s) - Read error at byte %ld/%ld (%s). "
 msgstr ""
 
-#: src/init.c:319 src/netrc.c:260
+#: src/init.c:320 src/netrc.c:260
 #, c-format
 msgid "%s: Cannot read %s (%s).\n"
 msgstr ""
 
-#: src/init.c:340 src/init.c:346
+#: src/init.c:341 src/init.c:347
 #, c-format
 msgid "%s: Error in %s at line %d.\n"
 msgstr ""
 
-#: src/init.c:377
+#: src/init.c:378
 #, c-format
 msgid "%s: Warning: Both system and user wgetrc point to `%s'.\n"
 msgstr ""
 
-#: src/init.c:465
+#: src/init.c:466
 #, c-format
 msgid "%s: BUG: unknown command `%s', value `%s'.\n"
 msgstr ""
 
-#: src/init.c:492
+#: src/init.c:493
 #, c-format
 msgid "%s: %s: Please specify on or off.\n"
 msgstr ""
 
-#: src/init.c:510 src/init.c:767 src/init.c:789 src/init.c:862
+#: src/init.c:511 src/init.c:768 src/init.c:790 src/init.c:863
 #, c-format
 msgid "%s: %s: Invalid specification `%s'.\n"
 msgstr ""
 
-#: src/init.c:623 src/init.c:645 src/init.c:667 src/init.c:693
+#: src/init.c:624 src/init.c:646 src/init.c:668 src/init.c:694
 #, c-format
 msgid "%s: Invalid specification `%s'\n"
 msgstr ""
@@ -673,6 +659,8 @@ msgid ""
 "       --http-passwd=PASS    set http password to PASS.\n"
 "  -C,  --cache=on/off        (dis)allow server-cached data (normally "
 "allowed).\n"
+"  -E,  --html-extension      save all text/html documents with .html "
+"extension.\n"
 "       --ignore-length       ignore `Content-Length' header field.\n"
 "       --header=STRING       insert STRING among the headers.\n"
 "       --proxy-user=USER     set USER as proxy username.\n"
@@ -683,7 +671,7 @@ msgid ""
 "\n"
 msgstr ""
 
-#: src/main.c:172
+#: src/main.c:173
 msgid ""
 "FTP options:\n"
 "       --retr-symlinks   when recursing, retrieve linked-to files (not "
@@ -693,7 +681,7 @@ msgid ""
 "\n"
 msgstr ""
 
-#: src/main.c:177
+#: src/main.c:178
 msgid ""
 "Recursive retrieval:\n"
 "  -r,  --recursive             recursive web-suck -- use with care!.\n"
@@ -710,7 +698,7 @@ msgid ""
 "\n"
 msgstr ""
 
-#: src/main.c:187
+#: src/main.c:188
 msgid ""
 "Recursive accept/reject:\n"
 "  -A,  --accept=LIST                comma-separated list of accepted "
@@ -735,16 +723,16 @@ msgid ""
 "\n"
 msgstr ""
 
-#: src/main.c:202
+#: src/main.c:203
 msgid "Mail bug reports and suggestions to <bug-wget@gnu.org>.\n"
 msgstr ""
 
-#: src/main.c:371
+#: src/main.c:378
 #, c-format
 msgid "%s: debug support not compiled in.\n"
 msgstr ""
 
-#: src/main.c:425
+#: src/main.c:430
 msgid ""
 "Copyright (C) 1995, 1996, 1997, 1998 Free Software Foundation, Inc.\n"
 "This program is distributed in the hope that it will be useful,\n"
@@ -753,49 +741,49 @@ msgid ""
 "GNU General Public License for more details.\n"
 msgstr ""
 
-#: src/main.c:431
+#: src/main.c:436
 msgid ""
 "\n"
 "Originally written by Hrvoje Niksic <hniksic@iskon.hr>.\n"
 msgstr ""
 
-#: src/main.c:505
+#: src/main.c:510
 #, c-format
 msgid "%s: %s: invalid command\n"
 msgstr ""
 
-#: src/main.c:558
+#: src/main.c:563
 #, c-format
 msgid "%s: illegal option -- `-n%c'\n"
 msgstr ""
 
 #. #### Something nicer should be printed here -- similar to the
 #. pre-1.5 `--help' page.
-#: src/main.c:561 src/main.c:603 src/main.c:661
+#: src/main.c:566 src/main.c:608 src/main.c:666
 #, c-format
 msgid "Try `%s --help' for more options.\n"
 msgstr ""
 
-#: src/main.c:641
+#: src/main.c:646
 msgid "Can't be verbose and quiet at the same time.\n"
 msgstr ""
 
-#: src/main.c:647
+#: src/main.c:652
 msgid "Can't timestamp and not clobber old files at the same time.\n"
 msgstr ""
 
 #. No URL specified.
-#: src/main.c:656
+#: src/main.c:661
 #, c-format
 msgid "%s: missing URL\n"
 msgstr ""
 
-#: src/main.c:744
+#: src/main.c:749
 #, c-format
 msgid "No URLs found in %s.\n"
 msgstr ""
 
-#: src/main.c:753
+#: src/main.c:758
 #, c-format
 msgid ""
 "\n"
@@ -803,14 +791,14 @@ msgid ""
 "Downloaded: %s bytes in %d files\n"
 msgstr ""
 
-#: src/main.c:758
+#: src/main.c:763
 #, c-format
 msgid "Download quota (%s bytes) EXCEEDED!\n"
 msgstr ""
 
 #. Please note that the double `%' in `%%s' is intentional, because
 #. redirect_output passes tmp through printf.
-#: src/main.c:785
+#: src/main.c:790
 msgid "%s received, redirecting output to `%%s'.\n"
 msgstr ""
 
@@ -920,17 +908,17 @@ msgstr ""
 msgid "Error (%s): Base %s relative, without referer URL.\n"
 msgstr ""
 
-#: src/url.c:1384
+#: src/url.c:1385
 #, c-format
 msgid "Converting %s... "
 msgstr ""
 
-#: src/url.c:1389 src/url.c:1457
+#: src/url.c:1390 src/url.c:1477
 #, c-format
 msgid "Cannot convert links in %s: %s\n"
 msgstr ""
 
-#: src/url.c:1433
+#: src/url.c:1453
 #, c-format
 msgid "Cannot back up %s as %s: %s\n"
 msgstr ""
diff --git a/src/ChangeLog b/src/ChangeLog
index b412980..54ccece 100644
--- a/src/ChangeLog
+++ b/src/ChangeLog
@@ -1,3 +1,29 @@
+2000-10-19  Dan Harkless  <dan-wget@dilvish.speed.net>
+
+	* ftp.c (ftp_loop_internal): downloaded_file() enumerators changed.
+		
+	* http.c (gethttp): Improved a comment and added code to tack on
+	".html" to text/html files without that extension when -E specified.
+	(http_loop): Use new downloaded_file() enumerators and deal with
+	the case of gethttp() called xrealloc() on u->local.
+
+	* init.c (commands): Added new "htmlextension" command.
+
+	* main.c (print_help): Added my new -E / --html-extension option.
+	(main): Undocumented --email-address option previously used -E synonym.
+	Stole it away for the much more deserving --html-extension's use.
+
+	* options.h (struct options): Added html_extension field.
+
+	* url.c (convert_links): URL X that we saved as X.html locally due
+	to -E needs to be backed up as X.orig, not X.html.orig.  Added comments.
+	(downloaded_file): Now remembers if we added .html extension to a file.
+
+	* url.h (downloaded_file_t): Added extra enumerators to support above.
+	(downloaded_file): Now takes and returns a downloaded_file_t.
+
+	* wget.h (unnamed "dt" enum): Added ADDED_HTML_EXTENSION enumerator.
+	
 2000-10-09  Dan Harkless  <dan-wget@dilvish.speed.net>
 
 	* html.c (htmlfindurl): Added unneeded initialization to quiet warning.
diff --git a/src/ftp.c b/src/ftp.c
index da37ee7..1f65c25 100644
--- a/src/ftp.c
+++ b/src/ftp.c
@@ -969,7 +969,7 @@ ftp_loop_internal (struct urlinfo *u, struct fileinfo *f, ccon *con)
 
       /* If we get out of the switch above without continue'ing, we've
 	 successfully downloaded a file.  Remember this fact. */
-      downloaded_file(ADD_FILE, locf);
+      downloaded_file(FILE_DOWNLOADED_NORMALLY, locf);
 
       if (con->st & ON_YOUR_OWN)
 	{
diff --git a/src/http.c b/src/http.c
index a180d9a..59cfc04 100644
--- a/src/http.c
+++ b/src/http.c
@@ -318,8 +318,9 @@ gethttp (struct urlinfo *u, struct http_stat *hs, int *dt)
   int auth_tried_already;
   struct rbuf rbuf;
 
-  /* Let the others worry about local filename...  */
   if (!(*dt & HEAD_ONLY))
+    /* If we're doing a GET on the URL, as opposed to just a HEAD, we need to
+       know the local filename so we can save to it. */
     assert (u->local != NULL);
 
   authenticate_h = 0;
@@ -329,7 +330,7 @@ gethttp (struct urlinfo *u, struct http_stat *hs, int *dt)
   /* We need to come back here when the initial attempt to retrieve
      without authorization header fails.  */
 
-  /* Initialize certain elements of struct hstat.  */
+  /* Initialize certain elements of struct http_stat.  */
   hs->len = 0L;
   hs->contlen = -1;
   hs->res = -1;
@@ -722,6 +723,26 @@ Accept: %s\r\n\
     /* We don't assume text/html by default.  */
     *dt &= ~TEXTHTML;
 
+  if (opt.html_extension && (*dt & TEXTHTML))
+    /* -E / --html-extension / html_extension = on was specified, and this is a
+       text/html file.  If some case-insensitive variation on ".htm[l]" isn't
+       already the file's suffix, tack on ".html". */
+    {
+      char*  last_period_in_local_filename = strrchr(u->local, '.');
+
+      if (last_period_in_local_filename == NULL ||
+	  !(strcasecmp(last_period_in_local_filename, ".htm") == EQ ||
+	    strcasecmp(last_period_in_local_filename, ".html") == EQ))
+	{
+	  size_t  local_filename_len = strlen(u->local);
+	  
+	  u->local = xrealloc(u->local, local_filename_len + sizeof(".html"));
+	  strcpy(u->local + local_filename_len, ".html");
+
+	  *dt |= ADDED_HTML_EXTENSION;
+	}
+    }
+
   if (contrange == -1)
     hs->restval = 0;
   else if (contrange != hs->restval ||
@@ -862,12 +883,14 @@ http_loop (struct urlinfo *u, char **newloc, int *dt)
   static int first_retrieval = 1;
 
   int count;
-  int local_dot_orig_file_exists = FALSE;
   int use_ts, got_head = 0;	/* time-stamping info */
+  char *filename_plus_orig_suffix;
+  char *local_filename = NULL;
   char *tms, *suf, *locf, *tmrate;
   uerr_t err;
   time_t tml = -1, tmr = -1;	/* local and remote time-stamps */
   long local_size = 0;		/* the size of the local file */
+  size_t filename_len;
   struct http_stat hstat;	/* HTTP status */
   struct stat st;
 
@@ -888,6 +911,12 @@ http_loop (struct urlinfo *u, char **newloc, int *dt)
   else
     locf = opt.output_document;
 
+  /* Yuck.  Multiple returns suck.  We need to remember to free() the space we
+     xmalloc() here before EACH return.  This is one reason it's better to set
+     flags that influence flow control and then return once at the end. */
+  filename_len = strlen(u->local);
+  filename_plus_orig_suffix = xmalloc(filename_len + sizeof(".orig"));
+
   if (opt.noclobber && file_exists_p (u->local))
     {
       /* If opt.noclobber is turned on and file already exists, do not
@@ -904,6 +933,7 @@ File `%s' already there, will not retrieve.\n"), u->local);
 	  && (!strcmp (suf, "html") || !strcmp (suf, "htm")))
 	*dt |= TEXTHTML;
       free (suf);
+      free(filename_plus_orig_suffix);  /* must precede every return! */
       /* Another harmless lie: */
       return RETROK;
     }
@@ -911,7 +941,7 @@ File `%s' already there, will not retrieve.\n"), u->local);
   use_ts = 0;
   if (opt.timestamping)
     {
-      boolean  local_file_exists = FALSE;
+      boolean  local_dot_orig_file_exists = FALSE;
 
       if (opt.backup_converted)
 	/* If -K is specified, we'll act on the assumption that it was specified
@@ -921,10 +951,6 @@ File `%s' already there, will not retrieve.\n"), u->local);
 	   _wasn't_ specified last time, or the server contains files called
 	   *.orig, -N will be back to not operating correctly with -k. */
 	{
-	  size_t filename_len = strlen(u->local);
-	  char*  filename_plus_orig_suffix = malloc(filename_len +
-						    sizeof(".orig"));
-
 	  /* Would a single s[n]printf() call be faster? */
 	  strcpy(filename_plus_orig_suffix, u->local);
 	  strcpy(filename_plus_orig_suffix + filename_len, ".orig");
@@ -932,19 +958,17 @@ File `%s' already there, will not retrieve.\n"), u->local);
 	  /* Try to stat() the .orig file. */
 	  if (stat(filename_plus_orig_suffix, &st) == 0)
 	    {
-	      local_file_exists = TRUE;
 	      local_dot_orig_file_exists = TRUE;
+	      local_filename = filename_plus_orig_suffix;
 	    }
-
-	  free(filename_plus_orig_suffix);
 	}      
 
       if (!local_dot_orig_file_exists)
 	/* Couldn't stat() <file>.orig, so try to stat() <file>. */
 	if (stat (u->local, &st) == 0)
-	  local_file_exists = TRUE;
+	  local_filename = u->local;
 
-      if (local_file_exists)
+      if (local_filename != NULL)
 	/* There was a local file, so we'll check later to see if the version
 	   the server has is the same version we already have, allowing us to
 	   skip a download. */
@@ -1020,6 +1044,16 @@ File `%s' already there, will not retrieve.\n"), u->local);
 
       /* Try fetching the document, or at least its head.  :-) */
       err = gethttp (u, &hstat, dt);
+
+      /* It's unfortunate that wget determines the local filename before finding
+	 out the Content-Type of the file.  Barring a major restructuring of the
+	 code, we need to re-set locf here, since gethttp() may have xrealloc()d
+	 u->local to tack on ".html". */
+      if (!opt.output_document)
+	locf = u->local;
+      else
+	locf = opt.output_document;
+
       /* Time?  */
       tms = time_str (NULL);
       /* Get the new location (with or without the redirection).  */
@@ -1040,6 +1074,7 @@ File `%s' already there, will not retrieve.\n"), u->local);
 	case HOSTERR: case CONREFUSED: case PROXERR: case AUTHFAILED:
 	  /* Fatal errors just return from the function.  */
 	  FREEHSTAT (hstat);
+	  free(filename_plus_orig_suffix);  /* must precede every return! */
 	  return err;
 	  break;
 	case FWRITEERR: case FOPENERR:
@@ -1048,6 +1083,7 @@ File `%s' already there, will not retrieve.\n"), u->local);
 	  logprintf (LOG_NOTQUIET, _("Cannot write to `%s' (%s).\n"),
 		     u->local, strerror (errno));
 	  FREEHSTAT (hstat);
+	  free(filename_plus_orig_suffix);  /* must precede every return! */
 	  return err;
 	  break;
 	case NEWLOCATION:
@@ -1057,9 +1093,11 @@ File `%s' already there, will not retrieve.\n"), u->local);
 	      logprintf (LOG_NOTQUIET,
 			 _("ERROR: Redirection (%d) without location.\n"),
 			 hstat.statcode);
+	      free(filename_plus_orig_suffix);  /* must precede every return! */
 	      return WRONGCODE;
 	    }
 	  FREEHSTAT (hstat);
+	  free(filename_plus_orig_suffix);  /* must precede every return! */
 	  return NEWLOCATION;
 	  break;
 	case RETRFINISHED:
@@ -1082,6 +1120,7 @@ File `%s' already there, will not retrieve.\n"), u->local);
 		     tms, hstat.statcode, hstat.error);
 	  logputs (LOG_VERBOSE, "\n");
 	  FREEHSTAT (hstat);
+	  free(filename_plus_orig_suffix);  /* must precede every return! */
 	  return WRONGCODE;
 	}
 
@@ -1121,21 +1160,11 @@ Last-modified header invalid -- time-stamp ignored.\n"));
 	      if (tml >= tmr &&
 		  (hstat.contlen == -1 || local_size == hstat.contlen))
 		{
-		  if (local_dot_orig_file_exists)
-		    /* We can't collapse this down into just one logprintf()
-		       call with a variable set to u->local or the .orig
-		       filename because we have to malloc() space for the
-		       latter, and because there are multiple returns above (a
-		       coding style no-no by many measures, for reasons such as
-		       this) we'd have to remember to free() the string at each
-		       one to avoid a memory leak. */
-		    logprintf (LOG_VERBOSE, _("\
-Server file no newer than local file `%s.orig' -- not retrieving.\n\n"),
-			       u->local);
-		  else
-		    logprintf (LOG_VERBOSE, _("\
-Server file no newer than local file `%s' -- not retrieving.\n\n"), u->local);
+		  logprintf (LOG_VERBOSE, _("\
+Server file no newer than local file `%s' -- not retrieving.\n\n"),
+			     local_filename);
 		  FREEHSTAT (hstat);
+		  free(filename_plus_orig_suffix);/*must precede every return!*/
 		  return RETROK;
 		}
 	      else if (tml >= tmr)
@@ -1163,6 +1192,7 @@ The sizes do not match (local %ld) -- retrieving.\n"), local_size);
       if (opt.spider)
 	{
 	  logprintf (LOG_NOTQUIET, "%d %s\n\n", hstat.statcode, hstat.error);
+	  free(filename_plus_orig_suffix);  /* must precede every return! */
 	  return RETROK;
 	}
 
@@ -1185,7 +1215,14 @@ The sizes do not match (local %ld) -- retrieving.\n"), local_size);
 	    }
 	  ++opt.numurls;
 	  opt.downloaded += hstat.len;
-	  downloaded_file(ADD_FILE, locf);
+
+	  /* Remember that we downloaded the file for later ".orig" code. */
+	  if (*dt & ADDED_HTML_EXTENSION)
+	    downloaded_file(FILE_DOWNLOADED_AND_HTML_EXTENSION_ADDED, locf);
+	  else
+	    downloaded_file(FILE_DOWNLOADED_NORMALLY, locf);
+
+	  free(filename_plus_orig_suffix);  /* must precede every return! */
 	  return RETROK;
 	}
       else if (hstat.res == 0) /* No read error */
@@ -1204,7 +1241,14 @@ The sizes do not match (local %ld) -- retrieving.\n"), local_size);
 		}
 	      ++opt.numurls;
 	      opt.downloaded += hstat.len;
-	      downloaded_file(ADD_FILE, locf);
+
+	      /* Remember that we downloaded the file for later ".orig" code. */
+	      if (*dt & ADDED_HTML_EXTENSION)
+		downloaded_file(FILE_DOWNLOADED_AND_HTML_EXTENSION_ADDED, locf);
+	      else
+		downloaded_file(FILE_DOWNLOADED_NORMALLY, locf);
+	      
+	      free(filename_plus_orig_suffix);  /* must precede every return! */
 	      return RETROK;
 	    }
 	  else if (hstat.len < hstat.contlen) /* meaning we lost the
@@ -1226,7 +1270,14 @@ The sizes do not match (local %ld) -- retrieving.\n"), local_size);
 			 tms, u->url, hstat.len, hstat.contlen, locf, count);
 	      ++opt.numurls;
 	      opt.downloaded += hstat.len;
-	      downloaded_file(ADD_FILE, locf);
+
+	      /* Remember that we downloaded the file for later ".orig" code. */
+	      if (*dt & ADDED_HTML_EXTENSION)
+		downloaded_file(FILE_DOWNLOADED_AND_HTML_EXTENSION_ADDED, locf);
+	      else
+		downloaded_file(FILE_DOWNLOADED_NORMALLY, locf);
+	      
+	      free(filename_plus_orig_suffix);  /* must precede every return! */
 	      return RETROK;
 	    }
 	  else			/* the same, but not accepted */
@@ -1262,6 +1313,7 @@ The sizes do not match (local %ld) -- retrieving.\n"), local_size);
       break;
     }
   while (!opt.ntry || (count < opt.ntry));
+  free(filename_plus_orig_suffix);  /* must precede every return! */
   return TRYLIMEXC;
 }
 
diff --git a/src/init.c b/src/init.c
index 97bbeb5..874e05a 100644
--- a/src/init.c
+++ b/src/init.c
@@ -111,6 +111,7 @@ static struct {
   { "ftpproxy",		&opt.ftp_proxy,		cmd_string },
   { "glob",		&opt.ftp_glob,		cmd_boolean },
   { "header",		NULL,			cmd_spec_header },
+  { "htmlextension",	&opt.html_extension,	cmd_boolean },
   { "htmlify",		NULL,			cmd_spec_htmlify },
   { "httppasswd",	&opt.http_passwd,	cmd_string },
   { "httpproxy",	&opt.http_proxy,	cmd_string },
diff --git a/src/main.c b/src/main.c
index 7937ff6..f8d9715 100644
--- a/src/main.c
+++ b/src/main.c
@@ -162,6 +162,7 @@ HTTP options:\n\
        --http-user=USER      set http user to USER.\n\
        --http-passwd=PASS    set http password to PASS.\n\
   -C,  --cache=on/off        (dis)allow server-cached data (normally allowed).\n\
+  -E,  --html-extension      save all text/html documents with .html extension.\n\
        --ignore-length       ignore `Content-Length\' header field.\n\
        --header=STRING       insert STRING among the headers.\n\
        --proxy-user=USER     set USER as proxy username.\n\
@@ -218,12 +219,13 @@ main (int argc, char *const *argv)
     { "backup-converted", no_argument, NULL, 'K' },
     { "debug", no_argument, NULL, 'd' },
     { "dont-remove-listing", no_argument, NULL, 21 },
-    { "email-address", no_argument, NULL, 'E' }, /* undocumented (debug) */
+    { "email-address", no_argument, NULL, 26 }, /* undocumented (debug) */
     { "follow-ftp", no_argument, NULL, 14 },
     { "force-directories", no_argument, NULL, 'x' },
     { "force-hier", no_argument, NULL, 'x' }, /* obsolete */
     { "force-html", no_argument, NULL, 'F'},
     { "help", no_argument, NULL, 'h' },
+    { "html-extension", no_argument, NULL, 'E' },
     { "ignore-length", no_argument, NULL, 10 },
     { "mirror", no_argument, NULL, 'm' },
     { "no-clobber", no_argument, NULL, 13 },
@@ -358,6 +360,11 @@ hpVqvdkKsxmNWrHSLcFbEY:G:g:T:U:O:l:n:i:o:a:t:D:A:R:P:B:e:Q:X:I:w:",
 	case 22:
 	  setval ("simplehostcheck", "on");
 	  break;
+	case 26:
+	  /* For debugging purposes.  */
+	  printf ("%s\n", ftp_getaddress ());
+	  exit (0);
+	  break;
 	case 'b':
 	  setval ("background", "on");
 	  break;
@@ -373,9 +380,7 @@ hpVqvdkKsxmNWrHSLcFbEY:G:g:T:U:O:l:n:i:o:a:t:D:A:R:P:B:e:Q:X:I:w:",
 #endif /* not DEBUG */
 	  break;
 	case 'E':
-	  /* For debugging purposes.  */
-	  printf ("%s\n", ftp_getaddress ());
-	  exit (0);
+	  setval ("htmlextension", "on");
 	  break;
 	case 'F':
 	  setval ("forcehtml", "on");
diff --git a/src/options.h b/src/options.h
index 83b1536..fcd8937 100644
--- a/src/options.h
+++ b/src/options.h
@@ -142,6 +142,8 @@ struct options
   int delete_after;		/* Whether the files will be deleted
 				   after download. */
 
+  int html_extension;		/* Use ".html" extension on all text/html? */
+
   int page_requisites;		/* Whether we need to download all files
 				   necessary to display a page properly. */
 };
diff --git a/src/url.c b/src/url.c
index e236806..b6220e3 100644
--- a/src/url.c
+++ b/src/url.c
@@ -1377,9 +1377,10 @@ no_proxy_match (const char *host, const char **no_proxy)
 void
 convert_links (const char *file, urlpos *l)
 {
-  FILE *fp;
-  char *buf, *p, *p2;
-  long size;
+  FILE               *fp;
+  char               *buf, *p, *p2;
+  downloaded_file_t  downloaded_file_return;
+  long               size;
 
   logprintf (LOG_VERBOSE, _("Converting %s... "), file);
   /* Read from the file....  */
@@ -1393,7 +1394,10 @@ convert_links (const char *file, urlpos *l)
   /* ...to a buffer.  */
   load_file (fp, &buf, &size);
   fclose (fp);
-  if (opt.backup_converted && downloaded_file(CHECK_FOR_FILE, file))
+
+  downloaded_file_return = downloaded_file(CHECK_FOR_FILE, file);
+
+  if (opt.backup_converted && downloaded_file_return)
     /* Rather than just writing over the original .html file with the converted
        version, save the former to *.orig.  Note we only do this for files we've
        _successfully_ downloaded, so we don't clobber .orig files sitting around
@@ -1401,15 +1405,31 @@ convert_links (const char *file, urlpos *l)
     {
       /* Construct the backup filename as the original name plus ".orig". */
       size_t         filename_len = strlen(file);
-      char*          filename_plus_orig_suffix = malloc(filename_len +
-							sizeof(".orig"));
+      char*          filename_plus_orig_suffix;
       boolean        already_wrote_backup_file = FALSE;
       slist*         converted_file_ptr;
       static slist*  converted_files = NULL;
 
-      /* Would a single s[n]printf() call be faster? */
-      strcpy(filename_plus_orig_suffix, file);
-      strcpy(filename_plus_orig_suffix + filename_len, ".orig");
+      if (downloaded_file_return == FILE_DOWNLOADED_AND_HTML_EXTENSION_ADDED)
+	{
+	  /* Just write "orig" over "html".  We need to do it this way because
+	     when we're checking to see if we've downloaded the file before (to
+	     see if we can skip downloading it), we don't know if it's a
+	     text/html file.  Therefore we don't know yet at that stage that -E
+	     is going to cause us to tack on ".html", so we need to compare
+	     vs. the original URL plus ".orig", not the original URL plus
+	     ".html.orig". */
+	  filename_plus_orig_suffix = xmalloc(filename_len + 1);
+	  strcpy(filename_plus_orig_suffix, file);
+	  strcpy((filename_plus_orig_suffix + filename_len) - 4, "orig");
+	}
+      else /* downloaded_file_return == FILE_DOWNLOADED_NORMALLY */
+	{
+	  /* Append ".orig" to the name. */
+	  filename_plus_orig_suffix = xmalloc(filename_len + sizeof(".orig"));
+	  strcpy(filename_plus_orig_suffix, file);
+	  strcpy(filename_plus_orig_suffix + filename_len, ".orig");
+	}
 
       /* We can get called twice on the same URL thanks to the
 	 convert_all_links() call in main().  If we write the .orig file each
@@ -1442,7 +1462,7 @@ convert_links (const char *file, urlpos *l)
 	     thought I could just add a field to the urlpos structure saying
 	     that we'd written a .orig file for this URL, but that didn't work,
 	     so I had to make this separate list. */
-	  converted_file_ptr = malloc(sizeof(slist));
+	  converted_file_ptr = xmalloc(sizeof(*converted_file_ptr));
 	  converted_file_ptr->string = xstrdup(file);  /* die on out-of-mem. */
 	  converted_file_ptr->next = converted_files;
 	  converted_files = converted_file_ptr;
@@ -1459,8 +1479,8 @@ convert_links (const char *file, urlpos *l)
       free (buf);
       return;
     }
-  /* [If someone understands why multiple URLs can correspond to one local file,
-     can they please add a comment here...?] */
+  /* Presumably we have to loop through multiple URLs here (even though we're
+     only talking about a single local file) because of the -O option. */
   for (p = buf; l; l = l->next)
     {
       if (l->pos >= size)
@@ -1482,6 +1502,7 @@ convert_links (const char *file, urlpos *l)
       for (p2 = buf + l->pos; p < p2; p++)
 	putc (*p, fp);
       if (l->flags & UABS2REL)
+	/* Convert absolute URL to relative. */
 	{
 	  char *newname = construct_relative (file, l->local_name);
 	  fprintf (fp, "%s", newname);
@@ -1491,6 +1512,7 @@ convert_links (const char *file, urlpos *l)
 	}
       p += l->size;
     }
+  /* Output the rest of the file. */
   if (p - buf < size)
     {
       for (p2 = buf + size; p < p2; p++)
@@ -1570,23 +1592,34 @@ add_url (urlpos *l, const char *url, const char *file)
 }
 
 
-/* Remembers which files have been downloaded.  Should be called with
-   add_or_check == ADD_FILE for each file we actually download successfully
-   (i.e. not for ones we have failures on or that we skip due to -N).  If you
-   just want to check if a file has been previously added without adding it,
-   call with add_or_check == CHECK_FOR_FILE.  Please be sure to call this
-   function with local filenames, not remote URLs -- by some means that isn't
-   commented well enough for me understand, multiple remote URLs can apparently
-   correspond to a single local file. */
-boolean
-downloaded_file (downloaded_file_t  add_or_check, const char*  file)
+/* Remembers which files have been downloaded.  In the standard case, should be
+   called with mode == FILE_DOWNLOADED_NORMALLY for each file we actually
+   download successfully (i.e. not for ones we have failures on or that we skip
+   due to -N).
+
+   When we've downloaded a file and tacked on a ".html" extension due to -E,
+   call this function with FILE_DOWNLOADED_AND_HTML_EXTENSION_ADDED rather than
+   FILE_DOWNLOADED_NORMALLY.
+
+   If you just want to check if a file has been previously added without adding
+   it, call with mode == CHECK_FOR_FILE.  Please be sure to call this function
+   with local filenames, not remote URLs. */
+downloaded_file_t
+downloaded_file (downloaded_file_t  mode, const char*  file)
 {
-  boolean        found_file = FALSE;
-  static slist*  downloaded_files = NULL;
-  slist*         rover = downloaded_files;
+  typedef struct _downloaded_file_list
+  {
+    char*                          file;
+    downloaded_file_t              download_type;
+    struct _downloaded_file_list*  next;
+  } downloaded_file_list;
+  
+  boolean                       found_file = FALSE;
+  static downloaded_file_list*  downloaded_files = NULL;
+  downloaded_file_list*         rover = downloaded_files;
 
   while (rover != NULL)
-    if (strcmp(rover->string, file) == 0)
+    if (strcmp(rover->file, file) == 0)
       {
 	found_file = TRUE;
 	break;
@@ -1595,17 +1628,18 @@ downloaded_file (downloaded_file_t  add_or_check, const char*  file)
       rover = rover->next;
 
   if (found_file)
-    return TRUE;  /* file had already been downloaded */
+    return rover->download_type;  /* file had already been downloaded */
   else
     {
-      if (add_or_check == ADD_FILE)
+      if (mode != CHECK_FOR_FILE)
 	{
-	  rover = malloc(sizeof(slist));
-	  rover->string = xstrdup(file);  /* die on out-of-mem. */
+	  rover = xmalloc(sizeof(*rover));
+	  rover->file = xstrdup(file); /* use xstrdup() so die on out-of-mem. */
+	  rover->download_type = mode;
 	  rover->next = downloaded_files;
 	  downloaded_files = rover;
 	}
 
-      return FALSE;  /* file had not already been downloaded */
+      return FILE_NOT_ALREADY_DOWNLOADED;
     }
 }
diff --git a/src/url.h b/src/url.h
index b8b52e8..02ea9ca 100644
--- a/src/url.h
+++ b/src/url.h
@@ -63,10 +63,17 @@ typedef struct _urlpos
   struct _urlpos *next;        /* Next struct in list */
 } urlpos;
 
-/* Controls how downloaded_file() behaves. */
+/* downloaded_file() takes a parameter of this type and returns this type. */
 typedef enum
 {
-  ADD_FILE,
+  /* Return enumerators: */
+  FILE_NOT_ALREADY_DOWNLOADED = 0,
+
+  /* Return / parameter enumerators: */
+  FILE_DOWNLOADED_NORMALLY,
+  FILE_DOWNLOADED_AND_HTML_EXTENSION_ADDED,
+
+  /* Parameter enumerators: */
   CHECK_FOR_FILE
 } downloaded_file_t;
 
@@ -102,6 +109,6 @@ int no_proxy_match PARAMS ((const char *, const char **));
 void convert_links PARAMS ((const char *, urlpos *));
 urlpos *add_url PARAMS ((urlpos *, const char *, const char *));
 
-boolean downloaded_file PARAMS ((downloaded_file_t, const char *));
+downloaded_file_t downloaded_file PARAMS ((downloaded_file_t, const char *));
 
 #endif /* URL_H */
diff --git a/src/wget.h b/src/wget.h
index ffcee1c..5dd71d2 100644
--- a/src/wget.h
+++ b/src/wget.h
@@ -202,14 +202,15 @@ extern const char *exec_name;
 #endif
 
 
-/* Document-type flags */
+/* Document type ("dt") flags */
 enum
 {
-  TEXTHTML      = 0x0001,	/* document is of type text/html */
-  RETROKF       = 0x0002,	/* retrieval was OK */
-  HEAD_ONLY     = 0x0004,	/* only send the HEAD request */
-  SEND_NOCACHE  = 0x0008,	/* send Pragma: no-cache directive */
-  ACCEPTRANGES  = 0x0010	/* Accept-ranges header was found */
+  TEXTHTML             = 0x0001,	/* document is of type text/html */
+  RETROKF              = 0x0002,	/* retrieval was OK */
+  HEAD_ONLY            = 0x0004,	/* only send the HEAD request */
+  SEND_NOCACHE         = 0x0008,	/* send Pragma: no-cache directive */
+  ACCEPTRANGES         = 0x0010,	/* Accept-ranges header was found */
+  ADDED_HTML_EXTENSION = 0x0020,        /* added ".html" extension due to -E */
 };
 
 /* Universal error type -- used almost everywhere.
-- 
cgit v1.0-41-gc330

