----++++src/logfile.c
@@ -31,8 +31,6 @@
 #include &quot;common.h&quot;
 #include &quot;plugin.h&quot;
 
-#define DEFAULT_LOGFILE LOCALSTATEDIR &quot;/log/collectd.log&quot;
-
 #if COLLECT_DEBUG
 static int log_level = LOG_DEBUG;
 #else
@@ -118,8 +116,7 @@ static void logfile_print(const char *msg, int severity,
   pthread_mutex_lock(&amp;file_lock);
 
   if (log_file == NULL) {
-    fh = fopen(DEFAULT_LOGFILE, &quot;a&quot;);
-    do_close = 1;
+    fh = stderr;
   } else if (strcasecmp(log_file, &quot;stderr&quot;) == 0)
     fh = stderr;
   else if (strcasecmp(log_file, &quot;stdout&quot;) == 0)
@@ -131,8 +128,7 @@ static void logfile_print(const char *msg, int severity,
 
   if (fh == NULL) {
     char errbuf[1024];
-    fprintf(stderr, &quot;logfile plugin: fopen (%s) failed: %s\n&quot;,
-            (log_file == NULL) ? DEFAULT_LOGFILE : log_file,
+    fprintf(stderr, &quot;logfile plugin: fopen (%s) failed: %s\n&quot;, log_file,
             sstrerror(errno, errbuf, sizeof(errbuf)));
   } else {
     if (print_timestamp)
----++++GitHub