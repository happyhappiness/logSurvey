----++++src/log_logstash.c
@@ -41,8 +41,6 @@
 #define HAVE_YAJL_V2 1
 #endif
 
-#define DEFAULT_LOGFILE LOCALSTATEDIR &quot;/log/&quot; PACKAGE_NAME &quot;.json.log&quot;
-
 #if COLLECT_DEBUG
 static int log_level = LOG_DEBUG;
 #else
@@ -151,8 +149,7 @@ static void log_logstash_print(yajl_gen g, int severity,
   pthread_mutex_lock(&amp;file_lock);
 
   if (log_file == NULL) {
-    fh = fopen(DEFAULT_LOGFILE, &quot;a&quot;);
-    do_close = 1;
+    fh = stderr;
   } else if (strcasecmp(log_file, &quot;stdout&quot;) == 0) {
     fh = stdout;
     do_close = 0;
@@ -166,8 +163,7 @@ static void log_logstash_print(yajl_gen g, int severity,
 
   if (fh == NULL) {
     char errbuf[1024];
-    fprintf(stderr, &quot;log_logstash plugin: fopen (%s) failed: %s\n&quot;,
-            (log_file == NULL) ? DEFAULT_LOGFILE : log_file,
+    fprintf(stderr, &quot;log_logstash plugin: fopen (%s) failed: %s\n&quot;, log_file,
             sstrerror(errno, errbuf, sizeof(errbuf)));
   } else {
     fprintf(fh, &quot;%s\n&quot;, buf);
----++++GitHub