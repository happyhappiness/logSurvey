----++++src/tests/stub_client_side.cc
@@ -7,73 +7,54 @@
  */
 
 #include &quot;squid.h&quot;
-#include "client_side.h"
+#include "client_side_request.h"
 #include &quot;http/StreamContext.h&quot;
 
 #define STUB_API &quot;client_side.cc&quot;
 #include &quot;tests/STUB.h&quot;
 
-//Http::StreamContext::Http::StreamContext(const ConnectionPointer&amp;, ClientHttpRequest*) STUB
-//Http::StreamContext::~Http::StreamContext() STUB
-bool Http::StreamContext::startOfOutput() const STUB_RETVAL(false)
-void Http::StreamContext::writeComplete(size_t) STUB
-void Http::StreamContext::pullData() STUB
-int64_t Http::StreamContext::getNextRangeOffset() const STUB_RETVAL(0)
-bool Http::StreamContext::canPackMoreRanges() const STUB_RETVAL(false)
-clientStream_status_t Http::StreamContext::socketState() STUB_RETVAL(STREAM_NONE)
-void Http::StreamContext::sendBody(StoreIOBuffer) STUB
-void Http::StreamContext::sendStartOfMessage(HttpReply * rep, StoreIOBuffer bodyData) STUB
-size_t Http::StreamContext::lengthToSend(Range&lt;int64_t&gt; const &amp;available) const STUB_RETVAL(0)
-void Http::StreamContext::noteSentBodyBytes(size_t) STUB
-void Http::StreamContext::buildRangeHeader(HttpReply * rep) STUB
-clientStreamNode * Http::StreamContext::getTail() const STUB_RETVAL(NULL)
-clientStreamNode * Http::StreamContext::getClientReplyContext() const STUB_RETVAL(NULL)
-void Http::StreamContext::finished() STUB
-void Http::StreamContext::deferRecipientForLater(clientStreamNode * node, HttpReply * rep, StoreIOBuffer receivedData) STUB
-bool Http::StreamContext::multipartRangeRequest() const STUB_RETVAL(false)
-void Http::StreamContext::registerWithConn() STUB
-void Http::StreamContext::noteIoError(const int xerrno) STUB
-
+#include &quot;client_side.h&quot;
 bool ConnStateData::clientParseRequests() STUB_RETVAL(false)
 void ConnStateData::readNextRequest() STUB
 bool ConnStateData::isOpen() const STUB_RETVAL(false)
 void ConnStateData::kick() STUB
-void ConnStateData::sendControlMsg(HttpControlMsg msg) STUB
+void ConnStateData::sendControlMsg(HttpControlMsg) STUB
 int64_t ConnStateData::mayNeedToReadMoreBody() const STUB_RETVAL(0)
 #if USE_AUTH
-void ConnStateData::setAuth(const Auth::UserRequest::Pointer &amp;aur, const char *cause) STUB
+void ConnStateData::setAuth(const Auth::UserRequest::Pointer &amp;, const char *) STUB
 #endif
 bool ConnStateData::transparent() const STUB_RETVAL(false)
-void ConnStateData::stopReceiving(const char *error) STUB
-void ConnStateData::stopSending(const char *error) STUB
+void ConnStateData::stopReceiving(const char *) STUB
+void ConnStateData::stopSending(const char *) STUB
 void ConnStateData::expectNoForwarding() STUB
 void ConnStateData::noteMoreBodySpaceAvailable(BodyPipe::Pointer) STUB
 void ConnStateData::noteBodyConsumerAborted(BodyPipe::Pointer) STUB
 bool ConnStateData::handleReadData() STUB_RETVAL(false)
 bool ConnStateData::handleRequestBodyData() STUB_RETVAL(false)
-void ConnStateData::pinConnection(const Comm::ConnectionPointer &amp;pinServerConn, HttpRequest *request, CachePeer *peer, bool auth, bool monitor) STUB
-void ConnStateData::unpinConnection(const bool andClose) STUB
-const Comm::ConnectionPointer ConnStateData::validatePinnedConnection(HttpRequest *request, const CachePeer *peer) STUB_RETVAL(NULL)
-void ConnStateData::clientPinnedConnectionClosed(const CommCloseCbParams &amp;io) STUB
-void ConnStateData::connStateClosed(const CommCloseCbParams &amp;io) STUB
-void ConnStateData::requestTimeout(const CommTimeoutCbParams &amp;params) STUB
+void ConnStateData::pinConnection(const Comm::ConnectionPointer &amp;, HttpRequest *, CachePeer *, bool, bool) STUB
+void ConnStateData::unpinConnection(const bool) STUB
+const Comm::ConnectionPointer ConnStateData::validatePinnedConnection(HttpRequest *, const CachePeer *) STUB_RETVAL(NULL)
+void ConnStateData::clientPinnedConnectionClosed(const CommCloseCbParams &amp;) STUB
+void ConnStateData::connStateClosed(const CommCloseCbParams &amp;) STUB
+void ConnStateData::requestTimeout(const CommTimeoutCbParams &amp;) STUB
 void ConnStateData::swanSong() STUB
-void ConnStateData::quitAfterError(HttpRequest *request) STUB
+void ConnStateData::quitAfterError(HttpRequest *) STUB
 #if USE_OPENSSL
-void ConnStateData::httpsPeeked(Comm::ConnectionPointer serverConnection) STUB
+void ConnStateData::httpsPeeked(Comm::ConnectionPointer) STUB
 void ConnStateData::getSslContextStart() STUB
 void ConnStateData::getSslContextDone(Security::ContextPtr, bool) STUB
-void ConnStateData::sslCrtdHandleReplyWrapper(void *data, const Helper::Reply &amp;reply) STUB
-void ConnStateData::sslCrtdHandleReply(const Helper::Reply &amp;reply) STUB
-void ConnStateData::switchToHttps(HttpRequest *request, Ssl::BumpMode bumpServerMode) STUB
-void ConnStateData::buildSslCertGenerationParams(Ssl::CertificateProperties &amp;certProperties) STUB
-bool ConnStateData::serveDelayedError(Http::StreamContext *context) STUB_RETVAL(false)
+void ConnStateData::sslCrtdHandleReplyWrapper(void *, const Helper::Reply &amp;) STUB
+void ConnStateData::sslCrtdHandleReply(const Helper::Reply &amp;) STUB
+void ConnStateData::switchToHttps(HttpRequest *, Ssl::BumpMode) STUB
+void ConnStateData::buildSslCertGenerationParams(Ssl::CertificateProperties &amp;) STUB
+bool ConnStateData::serveDelayedError(Http::StreamContext *) STUB_RETVAL(false)
 #endif
 
-void setLogUri(ClientHttpRequest * http, char const *uri, bool cleanUrl) STUB
-const char *findTrailingHTTPVersion(const char *uriAndHTTPVersion, const char *end) STUB_RETVAL(NULL)
-int varyEvaluateMatch(StoreEntry * entry, HttpRequest * req) STUB_RETVAL(0)
+void setLogUri(ClientHttpRequest *, char const *, bool) STUB
+const char *findTrailingHTTPVersion(const char *, const char *) STUB_RETVAL(NULL)
+int varyEvaluateMatch(StoreEntry *, HttpRequest *) STUB_RETVAL(0)
 void clientOpenListenSockets(void) STUB
 void clientHttpConnectionsClose(void) STUB
 void httpRequestFree(void *) STUB
-
+void clientPackRangeHdr(const HttpReply *, const HttpHdrRangeSpec *, String, MemBuf *) STUB
+void clientPackTermBound(String, MemBuf *) STUB
----++++GitHub