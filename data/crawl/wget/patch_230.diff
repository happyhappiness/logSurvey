diff --git a/src/ChangeLog b/src/ChangeLog
index 9af9267..ae04028 100644
--- a/src/ChangeLog
+++ b/src/ChangeLog
@@ -1,6 +1,7 @@
 2008-06-13  Micah Cowan  <micah@cowan.name>
 
-	* build_info.c: ENABLE_NTLM, not HAVE_NTLM.
+	* build_info.c: ENABLE_NTLM, not HAVE_NTLM; distinguish OpenSSL
+	from "ssl".
 
 2008-06-13  Madhusudan Hosaagrahara <com.gmail.hrmadhu>
 
diff --git a/src/build_info.c b/src/build_info.c
index 1ac682a..e330b65 100644
--- a/src/build_info.c
+++ b/src/build_info.c
@@ -90,9 +90,9 @@ const char* (compiled_features[]) =
 #endif
 
 #ifdef HAVE_LIBSSL
-  "+ssl",
+  "+openssl",
 #else
-  "-ssl",
+  "-openssl",
 #endif
 
 #ifdef HAVE_GETTEXT
-- 
cgit v1.0-41-gc330


From c94d559bc3a2f193fb6ac3a0d78cf9f7ce40fdae Mon Sep 17 00:00:00 2001
From: Micah Cowan <micah@cowan.name>
Date: Mon, 16 Jun 2008 21:49:15 -0700
Subject: Don't abort when len > contlen, when we set it that way.

---
 src/ChangeLog |  6 ++++++
 src/http.c    | 10 +++++++++-
 2 files changed, 15 insertions(+), 1 deletion(-)

diff --git a/src/ChangeLog b/src/ChangeLog
index ae04028..deee023 100644
--- a/src/ChangeLog
+++ b/src/ChangeLog
@@ -1,3 +1,9 @@
+2008-06-16  Micah Cowan  <micah@cowan.name>
+
+	* http.c (http_loop): When hstat.len is higher than the
+	successfully completed content's length, but it's because we
+	_set_ it that way, don't abort.
+
 2008-06-13  Micah Cowan  <micah@cowan.name>
 
 	* build_info.c: ENABLE_NTLM, not HAVE_NTLM; distinguish OpenSSL
diff --git a/src/http.c b/src/http.c
index 919d759..78e5737 100644
--- a/src/http.c
+++ b/src/http.c
@@ -2800,10 +2800,18 @@ Remote file exists.\n\n"));
               printwhat (count, opt.ntry);
               continue;
             }
-          else
+          else if (hstat.len != hstat.restval)
             /* Getting here would mean reading more data than
                requested with content-length, which we never do.  */
             abort ();
+          else
+            {
+              /* Getting here probably means that the content-length was
+               * _less_ than the original, local size. We should probably
+               * truncate or re-read, or something. FIXME */
+              ret = RETROK;
+              goto exit;
+            }
         }
       else /* from now on hstat.res can only be -1 */
         {
-- 
cgit v1.0-41-gc330


From 8aef7c1f04aa836a164c3dff15665c2cfccd60eb Mon Sep 17 00:00:00 2001
From: Micah Cowan <micah@cowan.name>
Date: Sun, 22 Jun 2008 11:39:13 -0700
Subject: version.c string token concatenation.

---
 src/ChangeLog   |  7 +++++++
 src/Makefile.am | 12 +++++++-----
 2 files changed, 14 insertions(+), 5 deletions(-)

diff --git a/src/ChangeLog b/src/ChangeLog
index deee023..c9da1c8 100644
--- a/src/ChangeLog
+++ b/src/ChangeLog
@@ -1,3 +1,10 @@
+2008-06-22  Micah Cowan  <micah@cowan.name>
+
+	* Makefile.am (version.c): Fixed version string invocation so it
+	once again can't result in unterminated strings, made all the
+	string vars pointers-to-const, and moved line lengths
+	below 80 (in Makefile.am, not in version.c).
+
 2008-06-16  Micah Cowan  <micah@cowan.name>
 
 	* http.c (http_loop): When hstat.len is higher than the
diff --git a/src/Makefile.am b/src/Makefile.am
index c8485cf..56ba610 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -55,12 +55,14 @@ version.c:  $(wget_SOURCES) $(LDADD) $(srcdir)/Makefile.am
 	echo '/* version.c */' > $@
 	echo '/* Autogenerated by Makefile - DO NOT EDIT */' >> $@
 	echo '' >> $@
-	echo -n 'char* version_string = "@VERSION@ ' >> $@
-	-hg log -r . --template=' ({node|short})"\n' 2>/dev/null >> $@
+	echo -n 'const char *version_string = "@VERSION@"' >> $@
+	-hg log -r . --template='" ({node|short})"\n' 2>/dev/null >> $@
 	echo ';' >> $@
-	echo 'char* compilation_string = "'$(COMPILE)'";' | $(ESCAPEQUOTE) >> $@
-	echo 'char* link_string = "'$(CCLD) $(AM_CFLAGS) $(CFLAGS) \
-	$(AM_LDFLAGS) $(LDFLAGS) $(LIBS) $(wget_LDADD)'";' | $(ESCAPEQUOTE) >> $@
+	echo 'const char *compilation_string = "'$(COMPILE)'";' \
+	    | $(ESCAPEQUOTE) >> $@
+	echo 'const char *link_string = "'$(CCLD) $(AM_CFLAGS) $(CFLAGS) \
+	$(AM_LDFLAGS) $(LDFLAGS) $(LIBS) $(wget_LDADD)'";' \
+	    | $(ESCAPEQUOTE) >> $@
 
 check_LIBRARIES = libunittest.a
 libunittest_a_SOURCES = $(wget_SOURCES) test.c test.h
-- 
cgit v1.0-41-gc330


From c98aeb0cc3f98a5cb7f3b4986a175d355e6c239c Mon Sep 17 00:00:00 2001
From: Micah Cowan <micah@cowan.name>
Date: Sun, 22 Jun 2008 12:58:03 -0700
Subject: Make Test-proxied-https-auth.px pass, and ensure it returns the
 proper exit status when it does not.

---
 tests/ChangeLog                  |  9 +++++++++
 tests/Test-proxied-https-auth.px | 17 ++++++++++++-----
 tests/certs/server-cert.pem      | 22 ++++++++++++++++++++++
 tests/certs/server-key.pem       | 18 ++++++++++++++++++
 4 files changed, 61 insertions(+), 5 deletions(-)
 create mode 100644 tests/certs/server-cert.pem
 create mode 100644 tests/certs/server-key.pem

diff --git a/tests/ChangeLog b/tests/ChangeLog
index 3efa37b..4b79696 100644
--- a/tests/ChangeLog
+++ b/tests/ChangeLog
@@ -1,3 +1,12 @@
+2008-06-22  Micah Cowan  <micah@cowan.name>
+
+	* Test-proxied-https-auth.px: Shift exit code so it falls in the
+	lower bits, and actually fails when it should. Use dynamic port,
+	instead of static port.
+
+	* certs/server-cert.pem, certs/server-key.pem: Apparently failed
+	to add these from 1.11.x repo. Fixed.
+
 2008-06-12  Micah Cowan  <micah@cowan.name>
 
 	* FTPServer.pm, FTPTest.pm, HTTPServer.pm, HTTPTest.pm,
diff --git a/tests/Test-proxied-https-auth.px b/tests/Test-proxied-https-auth.px
index b732d55..182c9db 100755
--- a/tests/Test-proxied-https-auth.px
+++ b/tests/Test-proxied-https-auth.px
@@ -5,7 +5,10 @@ use strict;
 use WgetTest;  # For $WGETPATH.
 use HTTP::Daemon;
 use HTTP::Request;
-use IO::Socket::SSL 'debug4';
+use IO::Socket::SSL;
+
+my $SOCKET = HTTP::Daemon->new (LocalAddr => 'localhost',
+    ReuseAddr => 1) or die "Cannot create server!!!";
 
 sub get_request {
     my $conn = shift;
@@ -26,9 +29,7 @@ sub get_request {
 sub do_server {
     my $alrm = alarm 10;
 
-    my $s = HTTP::Daemon->new (LocalAddr => 'localhost',
-        LocalPort => '8080',
-        ReuseAddr => 1) or die "Cannot create server!!!";
+    my $s = $SOCKET;
     my $conn;
     my $rqst;
     my $rspn;
@@ -68,6 +69,10 @@ sub do_server {
                 'Content-Type' => 'text/plain',
                 'Connection' => 'close',
                 ], "foobarbaz\n");
+            $rspn->protocol('HTTP/1.0');
+            print "=====\n";
+            print $rspn->as_string;
+            print "\n=====\n";
             print $conn $rspn->as_string;
         }
         $conn->close;
@@ -94,9 +99,11 @@ my $cmdline = $WgetTest::WGETPATH . " --user=fiddle-dee-dee"
     . " --password=Dodgson -e https_proxy=localhost:{{port}}"
     . " --no-check-certificate"
     . " https://no.such.domain/needs-auth.txt";
+$cmdline =~ s/{{port}}/$SOCKET->sockport()/e;
 
 my $code = system($cmdline);
+system ('rm -f needs-auth.txt');
 
 warn "Got code: $code\n" if $code;
 kill ('TERM', $pid);
-exit $code;
+exit ($code >> 8);
diff --git a/tests/certs/server-cert.pem b/tests/certs/server-cert.pem
new file mode 100644
index 0000000..af653c9
--- /dev/null
+++ b/tests/certs/server-cert.pem
@@ -0,0 +1,22 @@
+-----BEGIN CERTIFICATE-----
+MIIDnDCCAwWgAwIBAgIJAIsoR6UicPPEMA0GCSqGSIb3DQEBBQUAMIGRMQswCQYD
+VQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTETMBEGA1UEBxMKU2FudGEgQ2xh
+YTEhMB8GA1UEChMYSW50ZXJuZXQgV2lkZ2l0cyBQdHkgTHRkMRQwEgYDVQQDEwtN
+aWNhaCBDb3dhbjEfMB0GCSqGSIb3DQEJARYQbWljYWhAY293YW4ubmFtZTAeFw0w
+ODA0MjIwNTQxNDBaFw0wODA1MjIwNTQxNDBaMIGRMQswCQYDVQQGEwJVUzETMBEG
+A1UECBMKQ2FsaWZvcm5pYTETMBEGA1UEBxMKU2FudGEgQ2xhYTEhMB8GA1UEChMY
+SW50ZXJuZXQgV2lkZ2l0cyBQdHkgTHRkMRQwEgYDVQQDEwtNaWNhaCBDb3dhbjEf
+MB0GCSqGSIb3DQEJARYQbWljYWhAY293YW4ubmFtZTCBnzANBgkqhkiG9w0BAQEF
+AAOBjQAwgYkCgYEAxgJGqBxMUjykBTWHg0jTAH59WbxV6JLMAirwskri0u9o6m9f
+Xw/ZsteKxmypgvwPcDoqZFWF5TB4sEf2l2m7N++mOLtjS9PLBaE8Y0siF1+EMXrI
+mffet9PeXXceuTMFx6bTzls7EwLMvmvSynwFK1j9EHH0mFA19MkeQwWG5zECAwEA
+AaOB+TCB9jAdBgNVHQ4EFgQU0LEi7ld7tvUls/fmbmn80+b//TAwgcYGA1UdIwSB
+vjCBu4AU0LEi7ld7tvUls/fmbmn80+b//TChgZekgZQwgZExCzAJBgNVBAYTAlVT
+MRMwEQYDVQQIEwpDYWxpZm9ybmlhMRMwEQYDVQQHEwpTYW50YSBDbGFhMSEwHwYD
+VQQKExhJbnRlcm5ldCBXaWRnaXRzIFB0eSBMdGQxFDASBgNVBAMTC01pY2FoIENv
+d2FuMR8wHQYJKoZIhvcNAQkBFhBtaWNhaEBjb3dhbi5uYW1lggkAiyhHpSJw88Qw
+DAYDVR0TBAUwAwEB/zANBgkqhkiG9w0BAQUFAAOBgQBOSi75jsItAkhiYW0Up1d8
+OFA1saDlxBDm7ZUQTcfxIQL75iYfxMUEWeWPRLmNId96a1PgMT6U2+vKrnoNj8bu
+R45xNaFPKxOzp7axWSOp9AJcR6neug2v7lKkKOcQ14dFlKH1AoP+fDuvSAZyfMeC
+7fbIfz3XFNxaR4Rd07w/OQ==
+-----END CERTIFICATE-----
diff --git a/tests/certs/server-key.pem b/tests/certs/server-key.pem
new file mode 100644
index 0000000..f3e6007
--- /dev/null
+++ b/tests/certs/server-key.pem
@@ -0,0 +1,18 @@
+-----BEGIN RSA PRIVATE KEY-----
+Proc-Type: 4,ENCRYPTED
+DEK-Info: DES-EDE3-CBC,8B09CBCC4587B80C
+
+Yikael4jBlULlN5QU2SIN38OsTqbkcNZGVcoT5rpGf2Mh+aLRRnSvpIAOqNbIcEw
+T8pOtbic9AUh2YaCUK5xw5ou47t2dkieWB0a/amfOAFiajca+94AI+f1k73D85Y9
+bqCkal7pMzIEh22+qIHrUqJLeZdFOIq/C2j4a8Ymv2qmcQ7aKHfmtM3I1XWqg/ql
+GNDwhDxTJ1C6rMvXblDQ5gb4uqdUCw03jVOKTh7kQCNjV6RZqtzFShARiuL2yt4J
+l8H116hT6JtyVAm6kQIws0wqYPiIQxgpHQV21OibDh7WwD+i2sN77vnG06bYi7C6
+l8PkHsB2VbR2GjrZXAW1MGrCIVllbouFJ3zhPTr1DsDuCQ7G9dc8J/lviaWCi+HL
+aWq99V824sjz0CuzRqdUINx1f2XR53+ltSiyXk77NpyUOj/2nGQd2RhsjC/gLHdU
+J5152dOoYRmhftubfNr9Cend76rCkwLhZ1ZOa1LDgkT7HFD+4FIeW02opwGpRo/k
+XxOIkI7EF3em1MXfbRq1GEXr/KBkTKKeiaVUYW4klytX9crOZ+Dxv9KZRANAPzuF
+Tmx1gO4qJL2d8SXlNbUd4MRwCwK2CgUyUknL9kGkt98N2sYUyJETwSWUWbNnP31g
+R0sUKSvJN1k8DfZTpP/8znW1kz+vPa66tuRjBRd96JNUDdqSHHywT4DnR/pUNzdG
+uUD4/x4VgEwMcOYOKAFeOInn5pPINecU8EE4SehLODW3YdQW4hnxxaltuXPAkvNo
+6ST/6HVi/iSJsfvqUuEEXw/SGRMB0aZ+YEIOn4hVnu+gE8N07tuyvQ==
+-----END RSA PRIVATE KEY-----
-- 
cgit v1.0-41-gc330


From b2dbe2b7e4a3d0f1bec1aa7c835879c537ff474a Mon Sep 17 00:00:00 2001
From: Micah Cowan <micah@cowan.name>
Date: Sun, 22 Jun 2008 15:07:19 -0700
Subject: stsc's better-messages-for-spider-mode patch.

---
 src/ChangeLog |  5 +++++
 src/http.c    | 14 +++++++++++++-
 2 files changed, 18 insertions(+), 1 deletion(-)

diff --git a/src/ChangeLog b/src/ChangeLog
index c9da1c8..b3defda 100644
--- a/src/ChangeLog
+++ b/src/ChangeLog
@@ -1,3 +1,8 @@
+2008-06-22  Steven Schubiger  <schubiger@gmail.com>
+
+	* http.c: Make -nv --spider include the file's name when it
+	exists.
+	
 2008-06-22  Micah Cowan  <micah@cowan.name>
 
 	* Makefile.am (version.c): Fixed version string invocation so it
diff --git a/src/http.c b/src/http.c
index 78e5737..d17b5db 100644
--- a/src/http.c
+++ b/src/http.c
@@ -1296,6 +1296,7 @@ struct http_stat
   char *remote_time;            /* remote time-stamp string */
   char *error;                  /* textual HTTP error */
   int statcode;                 /* status code */
+  char *message;                /* status message */
   wgint rd_size;                /* amount of data read from socket */
   double dltime;                /* time it took to download the data */
   const char *referer;          /* value of the referer header. */
@@ -1713,6 +1714,7 @@ gethttp (struct url *u, struct http_stat *hs, int *dt, struct url *proxy)
 
           resp = resp_new (head);
           statcode = resp_status (resp, &message);
+          hs->message = xstrdup (message);
           resp_free (resp);
           xfree (head);
           if (statcode != 200)
@@ -1795,6 +1797,7 @@ gethttp (struct url *u, struct http_stat *hs, int *dt, struct url *proxy)
   /* Check for status line.  */
   message = NULL;
   statcode = resp_status (resp, &message);
+  hs->message = xstrdup (message);
   if (!opt.server_response)
     logprintf (LOG_VERBOSE, "%2d %s\n", statcode,
                message ? quotearg_style (escape_quoting_style, message) : "");
@@ -2662,19 +2665,20 @@ The sizes do not match (local %s) -- retrieving.\n"),
               
               if (opt.spider)
                 {
+                  bool finished = true;
                   if (opt.recursive)
                     {
                       if (*dt & TEXTHTML)
                         {
                           logputs (LOG_VERBOSE, _("\
 Remote file exists and could contain links to other resources -- retrieving.\n\n"));
+                          finished = false;
                         }
                       else 
                         {
                           logprintf (LOG_VERBOSE, _("\
 Remote file exists but does not contain any link -- not retrieving.\n\n"));
                           ret = RETROK; /* RETRUNNEEDED is not for caller. */
-                          goto exit;
                         }
                     }
                   else
@@ -2691,6 +2695,14 @@ but recursion is disabled -- not retrieving.\n\n"));
 Remote file exists.\n\n"));
                         }
                       ret = RETROK; /* RETRUNNEEDED is not for caller. */
+                    }
+                  
+                  if (finished)
+                    {
+                      logprintf (LOG_NONVERBOSE, 
+                                 _("%s URL:%s %2d %s\n"), 
+                                 tms, u->url, hstat.statcode,
+                                 hstat.message ? escnonprint (hstat.message) : "");
                       goto exit;
                     }
                 }
-- 
cgit v1.0-41-gc330


From a0a9da4698657e66353dd4e5d2023a8980c711d8 Mon Sep 17 00:00:00 2001
From: Micah Cowan <micah@cowan.name>
Date: Sun, 22 Jun 2008 17:52:57 -0700
Subject: Don't run Test-proxied-https-auth.px if HTTPS support wasn't built.

---
 tests/ChangeLog                  |  3 ++-
 tests/Test-proxied-https-auth.px | 10 ++++++++++
 2 files changed, 12 insertions(+), 1 deletion(-)

diff --git a/tests/ChangeLog b/tests/ChangeLog
index 4b79696..36bc35d 100644
--- a/tests/ChangeLog
+++ b/tests/ChangeLog
@@ -2,7 +2,8 @@
 
 	* Test-proxied-https-auth.px: Shift exit code so it falls in the
 	lower bits, and actually fails when it should. Use dynamic port,
-	instead of static port.
+	instead of static port. Only run the test if our Wget was built
+	with HTTPS support.
 
 	* certs/server-cert.pem, certs/server-key.pem: Apparently failed
 	to add these from 1.11.x repo. Fixed.
diff --git a/tests/Test-proxied-https-auth.px b/tests/Test-proxied-https-auth.px
index 182c9db..a2efe5e 100755
--- a/tests/Test-proxied-https-auth.px
+++ b/tests/Test-proxied-https-auth.px
@@ -3,6 +3,16 @@ use warnings;
 use strict;
 
 use WgetTest;  # For $WGETPATH.
+
+# Have we even built an HTTPS-supporting Wget?
+{
+    my @version_lines = `${WgetTest::WGETPATH} --version`;
+    unless (grep /\+(openssl|gnutls)/, @version_lines) {
+        print "Not running test: Wget under test doesn't support HTTPS.\n";
+        exit 0;
+    }
+}
+
 use HTTP::Daemon;
 use HTTP::Request;
 use IO::Socket::SSL;
-- 
cgit v1.0-41-gc330


From 25585dce47caa71530c2bb8f7c3d214be5eb4557 Mon Sep 17 00:00:00 2001
From: Micah Cowan <micah@cowan.name>
Date: Mon, 23 Jun 2008 12:54:50 -0700
Subject: stsc's patch to initialize, free hs->message.

---
 src/ChangeLog | 5 +++++
 src/http.c    | 2 ++
 2 files changed, 7 insertions(+)

diff --git a/src/ChangeLog b/src/ChangeLog
index b3defda..7ed11cb 100644
--- a/src/ChangeLog
+++ b/src/ChangeLog
@@ -1,3 +1,8 @@
+2008-06-22  Steven Schubiger  <stsc@members.fsf.org>
+
+	* http.c: Explicitly initialize and deallocate the message
+	string used by the -nv --spider functionality.
+
 2008-06-22  Steven Schubiger  <schubiger@gmail.com>
 
 	* http.c: Make -nv --spider include the file's name when it
diff --git a/src/http.c b/src/http.c
index d17b5db..f79b1e7 100644
--- a/src/http.c
+++ b/src/http.c
@@ -1323,6 +1323,7 @@ free_hstat (struct http_stat *hs)
   xfree_null (hs->rderrmsg);
   xfree_null (hs->local_file);
   xfree_null (hs->orig_file_name);
+  xfree_null (hs->message);
 
   /* Guard against being called twice. */
   hs->newloc = NULL;
@@ -1442,6 +1443,7 @@ gethttp (struct url *u, struct http_stat *hs, int *dt, struct url *proxy)
   hs->newloc = NULL;
   hs->remote_time = NULL;
   hs->error = NULL;
+  hs->message = NULL;
 
   conn = u;
 
-- 
cgit v1.0-41-gc330


From b91e2353f54fb9b281185e85a2821028340cb187 Mon Sep 17 00:00:00 2001
From: Micah Cowan <micah@cowan.name>
Date: Tue, 24 Jun 2008 11:44:40 -0700
Subject: Don't assume time_t* is compatible with long*.

---
 src/ChangeLog | 5 +++++
 src/ftp-ls.c  | 3 ++-
 2 files changed, 7 insertions(+), 1 deletion(-)

diff --git a/src/ChangeLog b/src/ChangeLog
index 7ed11cb..5ba6690 100644
--- a/src/ChangeLog
+++ b/src/ChangeLog
@@ -1,3 +1,8 @@
+2008-06-24  Micah Cowan  <micah@cowan.name>
+
+	* ftp-ls.c (ftp_index): Don't assume time_t* is compatible with
+	long*. Fixes crash on Windows, and probably other systems.
+
 2008-06-22  Steven Schubiger  <stsc@members.fsf.org>
 
 	* http.c: Explicitly initialize and deallocate the message
diff --git a/src/ftp-ls.c b/src/ftp-ls.c
index e050c5a..409996c 100644
--- a/src/ftp-ls.c
+++ b/src/ftp-ls.c
@@ -894,7 +894,8 @@ ftp_index (const char *file, struct url *u, struct fileinfo *f)
             "Jan", "Feb", "Mar", "Apr", "May", "Jun",
             "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
           };
-          struct tm *ptm = localtime ((time_t *)&f->tstamp);
+          time_t tstamp = f->tstamp;
+          struct tm *ptm = localtime (&tstamp);
 
           fprintf (fp, "%d %s %02d ", ptm->tm_year + 1900, months[ptm->tm_mon],
                   ptm->tm_mday);
-- 
cgit v1.0-41-gc330


From 6db8909f87012ee8f65e496846962d98cd8bafea Mon Sep 17 00:00:00 2001
From: Micah Cowan <micah@cowan.name>
Date: Tue, 24 Jun 2008 12:08:46 -0700
Subject: stsc: escnonprint -> quotearg_style

---
 src/ChangeLog | 5 +++++
 src/http.c    | 2 +-
 2 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/src/ChangeLog b/src/ChangeLog
index 5ba6690..3df8dda 100644
--- a/src/ChangeLog
+++ b/src/ChangeLog
@@ -1,3 +1,8 @@
+2008-06-24  Steven Schubiger  <stsc@members.fsf.org>
+
+	* http.c (http_loop): Replace escnonprint() occurence with
+	a quotearg_style() call.
+
 2008-06-24  Micah Cowan  <micah@cowan.name>
 
 	* ftp-ls.c (ftp_index): Don't assume time_t* is compatible with
diff --git a/src/http.c b/src/http.c
index f79b1e7..113e096 100644
--- a/src/http.c
+++ b/src/http.c
@@ -2704,7 +2704,7 @@ Remote file exists.\n\n"));
                       logprintf (LOG_NONVERBOSE, 
                                  _("%s URL:%s %2d %s\n"), 
                                  tms, u->url, hstat.statcode,
-                                 hstat.message ? escnonprint (hstat.message) : "");
+                                 hstat.message ? quotearg_style (escape_quoting_style, hstat.message) : "");
                       goto exit;
                     }
                 }
-- 
cgit v1.0-41-gc330

